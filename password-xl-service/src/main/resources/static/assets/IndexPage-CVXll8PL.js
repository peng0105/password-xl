const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ExportExcel-Bd9mOAos.js","./index-DZ5-n0Cs.js","./@vue-BhCi5Yj9.js","./element-plus-DfJ8pmrs.js","./vendor-B4nIbczL.js","./ali-oss-B_Q55M9i.js","./@element-plus-C1_C3qTM.js","./element-plus-BUj08D2o.css","./cos-js-sdk-v5-B8_2Tx6c.js","./index-DTA_oh_4.css","./exceljs-eb77zzzs.js","./ImportExcel-DL9c-EVf.js","./ImportExcel-BviHWDVL.css"])))=>i.map(i=>d[i]);
import{u as Z,a as oe,b as ae,S as K,P as Q,T as ue,c as q,d as G,_ as X,e as Ke,g as me,f as Ee,h as _t,i as bt,M as Ve,j as wt,k as ge,l as xt,m as Qe,n as Re,o as kt,p as Ct,q as St,r as At,s as $t,t as De,v as tt,w as lt,x as ot,y as nt,z as st,A as Ze,B as he}from"./index-DZ5-n0Cs.js";import{d as Y,H as Ce,R as at,S as Te,n as E,v as l,D as e,u as t,a as s,B as r,C as O,o as c,r as U,c as $,F as W,j as se,z as V,ax as Ft,a1 as pe,I as J,a3 as Pt,a0 as Vt,P as rt,aa as Me,y as it,M as Rt,Q as te,x as Et,E as Dt,ay as et}from"./@vue-BhCi5Yj9.js";import{d as ye,c as ne,e as de,f as ve,k as Tt,l as Mt,i as fe,m as Se,n as Ae,o as He,p as Ge,q as Lt,r as It,s as Ut,t as Bt,u as $e,w as _e,g as Le,x as Ye,h as je,y as dt,A as ut,B as Ie,C as zt,D as Nt,F as Ot,G as pt,H as ft,a as ke,E as ie,b as le,I as Je,J as We,K as Xe,L as qe,M as Kt,N as ct,O as be,P as we,Q as Ht,R as mt}from"./element-plus-DfJ8pmrs.js";import{_ as Gt,a as Yt,b as jt,c as Jt}from"./local-DhpgDmJL.js";import{a0 as Wt,X as Xt}from"./vendor-B4nIbczL.js";import{_ as qt}from"./logo-B_J9w6Yt.js";import"./cos-js-sdk-v5-B8_2Tx6c.js";import"./ali-oss-B_Q55M9i.js";import"./@element-plus-C1_C3qTM.js";const Qt=Y({__name:"ShortcutKey",setup(H){const f=Z(),n=oe(),a=ae(),p=v=>{a.setting.enableShortcutKey&&(v.ctrlKey&&v.key.toUpperCase()==="F"?(console.log("使用快捷键 Ctrl + F"),v.preventDefault(),n.searchInputRef?.focus()):v.altKey&&v.key.toUpperCase()==="N"?(console.log("使用快捷键 Alt + N"),v.preventDefault(),n.passwordFormRef.addPasswordForm()):v.altKey&&v.key.toUpperCase()==="L"?(console.log("使用快捷键 Alt + L"),v.preventDefault(),f.serviceStatus===K.LOGGED?n.verifyPasswordRef.verifyAndUnlock():f.passwordManager.lock()):v.altKey&&v.key.toUpperCase()==="V"?(console.log("使用快捷键 Alt + V"),v.preventDefault(),a.setting.passwordDisplayMode===Q.CARD?i(Q.TABLE):i(Q.CARD)):v.altKey&&v.key.toUpperCase()==="T"&&(console.log("使用快捷键 Alt + T"),v.preventDefault(),f.isDark?w(ue.LIGHT):w(ue.DARK)))},i=v=>{a.setting.passwordDisplayMode=v,f.passwordManager.syncSetting()},w=v=>{f.setTopicMode(v)};return Ce(()=>{document.addEventListener("keydown",p)}),at(()=>{document.removeEventListener("keydown",p)}),(v,k)=>null}}),Zt=Y({__name:"ShowPassword",setup(H,{expose:f}){const n=Te({alertVisible:!1,content:"",title:""});return f({showPassword:p=>{console.log("查看密码弹窗"),n.content=p.password,n.title=p.title,n.alertVisible=!0}}),(p,i)=>{const w=ne,v=ye,k=de,y=ve;return c(),E(y,{modelValue:t(n).alertVisible,"onUpdate:modelValue":i[2]||(i[2]=_=>t(n).alertVisible=_),width:["xs","sm"].includes(t(G)().value)?"95%":"40%","append-to-body":""},{header:l(()=>[e(w,{size:"large",style:{"user-select":"none"}},{default:l(()=>[i[3]||(i[3]=s("span",{class:"iconfont icon-show-password"},null,-1)),r(" "+O(t(n).title),1)]),_:1})]),footer:l(()=>[e(w,{class:"password-length-tip",type:"info"},{default:l(()=>[...i[4]||(i[4]=[s("span",{class:"iconfont icon-info"},null,-1),r(" 密码长度大于40会以弹框形式展示密码 ",-1)])]),_:1}),e(k,{plain:"",type:"success",onClick:i[1]||(i[1]=_=>{t(q)(t(n).content),t(n).alertVisible=!1})},{default:l(()=>[...i[5]||(i[5]=[r(" 一键复制 ",-1)])]),_:1})]),default:l(()=>[e(v,{modelValue:t(n).content,"onUpdate:modelValue":i[0]||(i[0]=_=>t(n).content=_),rows:10,readonly:"",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue","width"])}}}),ht=X(Zt,[["__scopeId","data-v-f516dc24"]]),el=Y({__name:"NoviceGuide",setup(H,{expose:f}){const n=oe(),a=ae(),p=U(!1),i=U(!1),w=U(!1),v=()=>{console.log("进入新手引导"),p.value=!0},k=()=>{console.log("新手引导，添加密码"),n.passwordFormRef.addPasswordForm("示例密码"),setTimeout(()=>{i.value=!0,n.passwordFormFormRef.clearValidate(),setTimeout(()=>{n.passwordFormTitleRef.focus()},100)},350)},y=()=>{console.log("新手引导，保存密码"),n.passwordFormRef.closePasswordForm(),setTimeout(()=>{w.value=!0},350)};return f({startTour:v}),(_,A)=>{const F=ne,D=Mt,z=Tt;return c(),$(W,null,[e(z,{modelValue:t(p),"onUpdate:modelValue":A[0]||(A[0]=B=>se(p)?p.value=B:null)},{indicators:l(()=>[...A[4]||(A[4]=[])]),default:l(()=>[e(D,{"next-button-props":{onClick:k,children:"下一步"},target:t(n).createPasswordBtnRef?.$el,title:"欢迎使用 password-XL"},{default:l(()=>[e(F,null,{default:l(()=>[...A[3]||(A[3]=[r("您可以点击这里创建密码",-1)])]),_:1})]),_:1},8,["next-button-props","target"])]),_:1},8,["modelValue"]),e(z,{modelValue:t(i),"onUpdate:modelValue":A[1]||(A[1]=B=>se(i)?i.value=B:null),"target-area-clickable":!1,"z-index":9e3},{indicators:l(({current:B,total:L})=>[e(F,null,{default:l(()=>[r(O(B+1)+" / "+O(L),1)]),_:2},1024)]),default:l(()=>[e(D,{"next-button-props":{children:"下一步"},target:t(n).passwordFormTitleRef?.$el,title:"密码名称"},{default:l(()=>[e(F,null,{default:l(()=>[...A[5]||(A[5]=[r("在这里输入密码名称",-1)])]),_:1})]),_:1},8,["target"]),e(D,{"next-button-props":{children:"下一步"},target:t(n).passwordFormGenerateBtnRef?.$el,title:"随机密码"},{default:l(()=>[e(F,null,{default:l(()=>[...A[6]||(A[6]=[r("点击这里可以随机生成密码，当然您也可以在输入框直接粘贴您已有的密码",-1)])]),_:1})]),_:1},8,["target"]),e(D,{"next-button-props":{children:"下一步"},target:t(n).passwordFormGenerateRuleRef?.$el,title:"控制生成规则"},{default:l(()=>[e(F,null,{default:l(()=>[...A[7]||(A[7]=[r("拖动这里控制随机密码的长度",-1)])]),_:1})]),_:1},8,["target"]),e(D,{"next-button-props":{children:"好的",onClick:y},target:t(n).passwordFormSaveBtnRef?.$el,title:"保存"},{default:l(()=>[e(F,null,{default:l(()=>[...A[8]||(A[8]=[r("最后，点击这里即可保存密码",-1)])]),_:1})]),_:1},8,["next-button-props","target"])]),_:1},8,["modelValue"]),e(z,{modelValue:t(w),"onUpdate:modelValue":A[2]||(A[2]=B=>se(w)?w.value=B:null),"z-index":9e3},{indicators:l(()=>[...A[11]||(A[11]=[])]),default:l(()=>[t(a).setting.passwordDisplayMode===t(Q).TABLE?(c(),E(D,{key:0,"next-button-props":{children:"好的"},target:t(n).displayModeCardRef?.$el,title:"密码视图"},{default:l(()=>[e(F,null,{default:l(()=>[...A[9]||(A[9]=[r("点击这里可以切换卡片视图",-1)])]),_:1})]),_:1},8,["target"])):V("",!0),t(a).setting.passwordDisplayMode===t(Q).CARD?(c(),E(D,{key:1,"next-button-props":{children:"好的"},target:t(n).displayModeTableRef?.$el,title:"密码视图"},{default:l(()=>[e(F,null,{default:l(()=>[...A[10]||(A[10]=[r("点击这里可以切换表格视图",-1)])]),_:1})]),_:1},8,["target"])):V("",!0)]),_:1},8,["modelValue"])],64)}}}),tl={};function ll(H,f){return f[0]||(f[0]=Ft('<h2>版权声明（Copyright Notice）</h2><p>版权所有 © [2024] [黄艳鹏]</p><p>本开源项目由 [黄艳鹏] 开发，现以MPL-2.0许可协议发布。</p><h3>许可协议（License）</h3><p style="text-indent:20px;">本项目的源代码可以在MPL-2.0许可协议下使用。主要条款如下：</p><ol><li>个人或组织可以免费使用、复制和修改本项目的源代码。</li><li>禁止将本项目的源代码或修改后的代码用于任何形式的商业用途，包括但不限于售卖、租赁或其他形式的盈利活动。</li><li>禁止分发本项目的源代码或修改后的代码给第三方。</li></ol><h3>免责声明（Disclaimer）</h3><p style="text-indent:20px;"> 本项目的源代码按“现状”提供，使用者需自行承担使用风险。在任何情况下，原作者或版权持有者对因使用本项目源代码而产生的任何直接、间接、附带、特殊、惩罚性或后果性的损害不承担责任。</p>',8))}const ol=X(tl,[["render",ll]]),nl=""+new URL("donate-BWYZILYa.png",import.meta.url).href,sl="password-xl",al="1.3.4",rl="module",il="electron/main.mjs",dl={name:"黄艳鹏",email:"hyp0105@qq.com"},ul=[{name:"黄艳鹏",email:"hyp0105@qq.com",weChat:"huangyanpeng1864"}],pl="开源免费的密码管理项目",fl="https://password-xl.cn",cl={type:"git",url:"https://github.com/peng0105/password-xl"},ml={start:"vite",preview:"vue-tsc -b && vite build && vite preview",build:"vue-tsc -b && vite build","dist-to-windows":"vue-tsc -b && vite build && electron-builder build --win --config electron/electron-builder.json5","dist-to-mac":"vue-tsc -b && vite build && electron-builder build --mac --config electron/electron-builder.json5","dist-to-linux":"vue-tsc -b && vite build && electron-builder build --linux --config electron/electron-builder.json5","start-exe":"electron ."},gl={aieditor:"^1.4.0","ali-oss":"^6.23.0",axios:"^1.13.2",buffer:"^6.0.3","cos-js-sdk-v5":"^1.10.1","crypto-js":"^4.2.0","element-plus":"^2.13.0",exceljs:"^4.4.0","file-saver":"^2.0.5","node-forge":"^1.3.3",pinia:"^3.0.4",vue:"^3.5.26","vue-router":"^4.6.4"},yl={"@types/ali-oss":"^6.16.13","@types/crypto-js":"^4.2.2","@types/file-saver":"^2.0.7","@types/node":"^25.0.3","@vitejs/plugin-legacy":"^7.2.1","@vitejs/plugin-vue":"^6.0.3",electron:"^39.2.7","electron-builder":"^26.0.12",terser:"^5.44.1",typescript:"^5.9.3","unplugin-auto-import":"^20.3.0","unplugin-icons":"^22.5.0","unplugin-vue-components":"^30.0.0",vite:"^7.3.0","vue-tsc":"^3.2.2"},ee={name:sl,private:!0,version:al,type:rl,main:il,author:dl,contributors:ul,description:pl,homepage:fl,repository:cl,scripts:ml,dependencies:gl,devDependencies:yl},vl={class:"support-ul"},_l={style:{float:"left"}},bl={style:{float:"left",width:"calc(100% - 40px)","padding-left":"5px"}},wl=Y({__name:"SupportMe",setup(H){const f=[{name:"Seeking dream",money:10,time:"2024-10-11"},{name:"Ching",money:10,time:"2024-07-13"},{name:"李春雨",money:5,time:"2024-07-12"},{name:"张博文",money:50,time:"2024-07-12"}];return(n,a)=>{const p=ne,i=fe,w=Ae,v=Ge,k=He,y=Se;return c(),$(W,null,[a[19]||(a[19]=s("h2",{style:{"margin-top":"0"}},"支持我们",-1)),e(p,{size:"large",style:{"text-indent":"20px"},tag:"p"},{default:l(()=>[...a[0]||(a[0]=[r(" 为了帮助您更安全、便捷地管理密码，我们打造了一个开源免费的密码管理工具。在开发和维护过程中，我们面临着诸多困难和挑战。您的支持对项目的发展至关重要，您可以通过以下方式支持此项目： ",-1)])]),_:1}),s("ul",vl,[s("li",null,[e(p,{size:"large"},{default:l(()=>[a[2]||(a[2]=s("span",{class:"iconfont icon-praise support-icon",style:{color:"#E6A23C"}},null,-1)),a[3]||(a[3]=r(" 在项目 ",-1)),e(i,{href:t(ee).repository.url,underline:!1,style:{"font-size":"16px",position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:l(()=>[...a[1]||(a[1]=[r("开源地址 ",-1)])]),_:1},8,["href"]),a[4]||(a[4]=r(" 中为项目点赞，增加项目的曝光度。 ",-1))]),_:1})]),s("li",null,[e(p,{size:"large"},{default:l(()=>[a[6]||(a[6]=s("span",{class:"iconfont icon-report support-icon",style:{color:"#F56C6C"}},null,-1)),a[7]||(a[7]=r(" 在Github上 ",-1)),e(i,{href:t(ee).repository.url+"/issues",underline:!1,style:{"font-size":"16px",position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:l(()=>[...a[5]||(a[5]=[r("报告您遇到的错误 ",-1)])]),_:1},8,["href"]),a[8]||(a[8]=r(" ，帮助我们持续改进。 ",-1))]),_:1})]),s("li",null,[e(p,{size:"large"},{default:l(()=>[a[10]||(a[10]=s("span",{class:"iconfont icon-idea support-icon",style:{color:"#67C23A"}},null,-1)),a[11]||(a[11]=r(" 提出您的 ",-1)),e(i,{href:t(ee).repository.url+"/issues",underline:!1,style:{"font-size":"16px",position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:l(()=>[...a[9]||(a[9]=[r("建议和想法 ",-1)])]),_:1},8,["href"]),a[12]||(a[12]=r(" ，帮助我们更好地满足用户需求。 ",-1))]),_:1})]),s("li",null,[e(p,{size:"large"},{default:l(()=>[...a[13]||(a[13]=[s("span",{class:"iconfont icon-company support-icon",style:{color:"#E6A23C"}},null,-1),r(" 将此工具分享给您的朋友和家人，让更多人受益。 ",-1)])]),_:1})]),s("li",null,[s("div",_l,[e(p,{size:"large"},{default:l(()=>[...a[14]||(a[14]=[s("span",{class:"iconfont icon-money support-icon",style:{color:"#F56C6C"}},null,-1)])]),_:1})]),s("div",bl,[e(p,{size:"large"},{default:l(()=>[...a[15]||(a[15]=[r(" 如果您认可我们的努力，请考虑给予一些经济上的支持，以帮助我们为您提供更加优质的密码管理体验。 ",-1)])]),_:1})]),a[16]||(a[16]=s("div",{style:{clear:"both"}},null,-1))])]),e(y,null,{default:l(()=>[e(w,{md:{span:9},sm:{span:24},xs:{span:24},style:{"text-align":"center"}},{default:l(()=>[...a[17]||(a[17]=[s("div",{style:{"text-align":"center"}},[s("h3",{style:{"margin-top":"4px"}},"微信赞赏码"),s("div",{style:{padding:"5px 20px","text-align":"center"}},[s("img",{alt:"",src:nl,style:{width:"80%","max-width":"300px","border-radius":"50%"}})])],-1)])]),_:1}),e(w,{md:{span:15},sm:{span:24},xs:{span:24},style:{"text-align":"center","padding-right":"10px"}},{default:l(()=>[a[18]||(a[18]=s("h3",{style:{"margin-top":"4px"}},"捐赠者列表",-1)),e(k,{data:f,border:"",stripe:""},{default:l(()=>[e(v,{label:"名称",prop:"name"}),e(v,{label:"时间","min-width":"60px",prop:"time"}),e(v,{label:"金额","min-width":"40px",prop:"money"})]),_:1})]),_:1})]),_:1})],64)}}}),xl=X(wl,[["__scopeId","data-v-871290c0"]]),kl={style:{padding:"10px"}},Cl={style:{"padding-left":"25px","line-height":"26px"}},Sl=Y({__name:"About",setup(H){const f=U(["密码支持自定义信息","导出、导入Excel","支持Windows、Android客户端","支持停用动态壁纸"]);return(n,a)=>{const p=It,i=fe,w=Lt;return c(),$(W,null,[a[0]||(a[0]=s("div",null,[s("h2",{style:{"margin-top":"0"}},"关于项目")],-1)),s("div",kl,[e(w,{column:1},{default:l(()=>[e(p,{label:"项目名称:"},{default:l(()=>[r(O(t(ee).name),1)]),_:1}),e(p,{label:"当前版本:"},{default:l(()=>[r(O(t(ee).version),1)]),_:1}),e(p,{label:"官方网站:"},{default:l(()=>[e(i,{href:t(ee).homepage,target:"_blank",type:"primary"},{default:l(()=>[r(O(t(ee).homepage),1)]),_:1},8,["href"])]),_:1}),e(p,{label:"开源地址:"},{default:l(()=>[e(i,{href:t(ee).repository.url,target:"_blank",type:"primary"},{default:l(()=>[r(O(t(ee).repository.url),1)]),_:1},8,["href"])]),_:1}),e(p,{label:"作者邮箱:"},{default:l(()=>[r(O(t(ee).contributors[0].email),1)]),_:1}),e(p,{label:"作者微信:"},{default:l(()=>[r(O(t(ee).contributors[0].weChat),1)]),_:1})]),_:1})]),a[1]||(a[1]=s("div",null,[s("h2",{style:{"margin-top":"0"}},"最近更新")],-1)),s("div",null,[s("ol",Cl,[(c(!0),$(W,null,pe(t(f),v=>(c(),$("li",null,O(v),1))),256))])])],64)}}}),Al={style:{"text-indent":"15px"}},$l={style:{"text-indent":"15px"}},Fl={style:{"text-indent":"15px"}},Pl={style:{"padding-left":"15px"}},Vl={style:{"padding-left":"15px"}},Rl={style:{"padding-left":"15px"}},El={style:{"padding-left":"15px"}},Dl=Y({__name:"CommonProblem",setup(H){return(f,n)=>{const a=ne,p=$e,i=Bt,w=fe,v=_e,k=Ut;return c(),E(k,null,{default:l(()=>[e(i,{title:"1、主密码忘记了怎么办？"},{default:l(()=>[e(a,{style:{"text-indent":"15px",display:"inline-block"}},{default:l(()=>[n[10]||(n[10]=r(" 很抱歉，由于密码安全机制，主密码一旦忘记没有任何办法查看密码数据。如您需要注销账号可以登录密码存储位置删除密码文件",-1)),n[11]||(n[11]=s("br",null,null,-1)),s("div",Al,[e(a,{tag:"b"},{default:l(()=>[...n[0]||(n[0]=[r("oss：",-1)])]),_:1}),n[1]||(n[1]=r(" 请登录阿里云控制台->对象存储，删除password-xl文件夹 ",-1))]),s("div",$l,[e(a,{tag:"b"},{default:l(()=>[...n[2]||(n[2]=[r("cos：",-1)])]),_:1}),n[3]||(n[3]=r(" 请登录腾讯云控制台->对象存储，删除password-xl文件夹 ",-1))]),s("div",Fl,[e(a,{tag:"b"},{default:l(()=>[...n[4]||(n[4]=[r("私有服务：",-1)])]),_:1}),n[5]||(n[5]=r(" 请到服务端密码数据存储目录删除您的用户名文件夹 ",-1))]),s("div",Pl,[e(a,{tag:"b"},{default:l(()=>[...n[6]||(n[6]=[r("本地存储：",-1)])]),_:1}),n[8]||(n[8]=r(" 请到 C:\\Users\\您的用户名\\AppData\\Roaming\\password-xl目录下删除setting.json和store.json两个文件。",-1)),n[9]||(n[9]=s("br",null,null,-1)),e(a,{size:"small",type:"info"},{default:l(()=>[e(p,{type:"info"},{default:l(()=>[...n[7]||(n[7]=[r(" AppData是系统隐藏目录，可以通过地址栏输入C:\\Users\\您的用户名\\AppData\\Roaming\\password-xl直接进入文件夹 ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),e(i,{title:"2、如何私有部署password-XL？"},{default:l(()=>[e(a,null,{default:l(()=>[e(a,{size:"large"},{default:l(()=>[...n[12]||(n[12]=[r("项目分为前端和后端两个服务，您可以根据需要选择部署：",-1)])]),_:1}),n[16]||(n[16]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:l(()=>[...n[13]||(n[13]=[r("仅部署前端服务：",-1)])]),_:1}),n[17]||(n[17]=r(" 可以使用阿里云OSS、腾讯云COS、和本地存储功能",-1)),n[18]||(n[18]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:l(()=>[...n[14]||(n[14]=[r("仅部署后端服务：",-1)])]),_:1}),n[19]||(n[19]=r(" 可以使用官网提供的页面或安装程序将密码文件存储在您的私有服务中",-1)),n[20]||(n[20]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:l(()=>[...n[15]||(n[15]=[r("两个服务都部署：",-1)])]),_:1}),n[21]||(n[21]=r(" 可以使用部署的前端页面将密码文件存储在私有服务中",-1)),n[22]||(n[22]=s("br",null,null,-1))]),_:1}),n[31]||(n[31]=s("br",null,null,-1)),e(a,null,{default:l(()=>[e(a,{size:"large"},{default:l(()=>[...n[23]||(n[23]=[r("部署文档：",-1)])]),_:1}),s("div",Vl,[e(w,{href:t(ee).repository.url+"/wiki/%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90docker",target:"_blank",type:"primary"},{default:l(()=>[...n[24]||(n[24]=[r(" 后端-docker部署 ",-1)])]),_:1},8,["href"]),n[28]||(n[28]=s("br",null,null,-1)),e(w,{href:t(ee).repository.url+"/wiki/%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90jar",target:"_blank",type:"primary"},{default:l(()=>[...n[25]||(n[25]=[r(" 后端-jar包部署 ",-1)])]),_:1},8,["href"]),n[29]||(n[29]=s("br",null,null,-1)),e(w,{href:t(ee).repository.url+"/wiki/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90docker",target:"_blank",type:"primary"},{default:l(()=>[...n[26]||(n[26]=[r(" 前端-docker部署 ",-1)])]),_:1},8,["href"]),n[30]||(n[30]=s("br",null,null,-1)),e(w,{href:t(ee).repository.url+"/wiki/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90nginx",target:"_blank",type:"primary"},{default:l(()=>[...n[27]||(n[27]=[r(" 前端-nginx部署 ",-1)])]),_:1},8,["href"])])]),_:1})]),_:1}),e(i,{title:"3、每次输入主密码很麻烦，可以自动解锁吗？"},{default:l(()=>[e(a,{style:{"text-indent":"15px",display:"inline-block"}},{default:l(()=>[...n[32]||(n[32]=[r("      您可以在设置-> 密码安全模块中开启自动解锁功能。 ",-1)])]),_:1})]),_:1}),e(i,{title:"4、忘记登录信息如何找回？"},{default:l(()=>[s("div",Rl,[e(a,null,{default:l(()=>[e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:l(()=>[...n[33]||(n[33]=[r("阿里云OSS：",-1)])]),_:1}),n[38]||(n[38]=r(" 您可以参考 ",-1)),e(w,{href:t(ee).repository.url+"/wiki/%E9%98%BF%E9%87%8C%E4%BA%91OSS%E6%B3%A8%E5%86%8C%E6%8C%87%E5%BC%95",style:{position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:l(()=>[...n[34]||(n[34]=[r(" 阿里云OSS注册指引 ",-1)])]),_:1},8,["href"]),n[39]||(n[39]=r(" ，登录阿里云控制台重新创建子账户并在存储桶位置为账号分配权限，密码数据不会丢失",-1)),n[40]||(n[40]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:l(()=>[...n[35]||(n[35]=[r("腾讯云COS：",-1)])]),_:1}),n[41]||(n[41]=r(" 您可以参考 ",-1)),e(w,{href:t(ee).repository.url+"/wiki/%E8%85%BE%E8%AE%AF%E4%BA%91COS%E6%B3%A8%E5%86%8C%E6%8C%87%E5%BC%95",style:{position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:l(()=>[...n[36]||(n[36]=[r(" 腾讯云COS注册指引 ",-1)])]),_:1},8,["href"]),n[42]||(n[42]=r(" ，登录腾讯云控制台重新创建子账户并在存储桶位置为账号分配权限，密码数据不会丢失",-1)),n[43]||(n[43]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:l(()=>[...n[37]||(n[37]=[r("私有服务：",-1)])]),_:1}),n[44]||(n[44]=r(" 您可在服务端项目部署路径下用户配置文件中查看您的登录密码。如果不是您部署项目请联系管理员",-1)),n[45]||(n[45]=s("br",null,null,-1))]),_:1})])]),_:1}),e(i,{title:"5、如何迁移密码数据？"},{default:l(()=>[s("div",El,[e(a,{style:{"text-indent":"15px",display:"inline-block"}},{default:l(()=>[n[47]||(n[47]=r(" 您可以通过 ",-1)),e(v,null,{default:l(()=>[...n[46]||(n[46]=[r("设置->备份恢复",-1)])]),_:1}),n[48]||(n[48]=r(" 菜单下的备份恢复功能迁移密码数据。 ",-1))]),_:1})])]),_:1})]),_:1})}}}),Tl={style:{"text-align":"center","margin-bottom":"5px",width:"100%"}},Ml={style:{"text-align":"center","margin-bottom":"5px",width:"100%"}},Ll={style:{"text-align":"center","margin-bottom":"15px",width:"100%"}},Il={style:{"text-align":"center","margin-top":"50px",width:"100%"}},Ul={style:{"margin-top":"25px"}},Bl={style:{padding:"0 50px 0 20px"}},zl={style:{"text-align":"center","margin-top":"30px",width:"100%"}},Nl=Y({__name:"LoginInfo",setup(H){const f=Ke(),n=()=>!!window.electronAPI,a=()=>!!window.androidAPI;return(p,i)=>{const w=ne,v=Ye,k=de,y=ye,_=je,A=Le;return c(),E(A,{"label-width":"80px"},{default:l(()=>[t(f).loginType==="oss"?(c(),$(W,{key:0},[s("div",Tl,[i[15]||(i[15]=s("img",{alt:"",class:"login-type-image",src:Gt,style:{height:"28px"}},null,-1)),e(w,{style:{"font-size":"24px"}},{default:l(()=>[...i[14]||(i[14]=[r("阿里云OSS",-1)])]),_:1})]),e(v),s("div",null,[e(_,{label:"region"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.region,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[0]||(i[0]=F=>t(q)(t(f).loginForm.region))},{default:l(()=>[...i[16]||(i[16]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"accessKeyId"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.accessKeyId,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[1]||(i[1]=F=>t(q)(t(f).loginForm.accessKeyId))},{default:l(()=>[...i[17]||(i[17]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"accessKeySecret"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.accessKeySecret,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[2]||(i[2]=F=>t(q)(t(f).loginForm.accessKeySecret))},{default:l(()=>[...i[18]||(i[18]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"bucket"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.bucket,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[3]||(i[3]=F=>t(q)(t(f).loginForm.bucket))},{default:l(()=>[...i[19]||(i[19]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),!n()&&!a()?(c(),E(_,{key:0,label:"快速登录链接"},{default:l(()=>[e(y,{"model-value":t(me)(t(f).loginForm),readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[4]||(i[4]=F=>t(q)(t(me)(t(f).loginForm)))},{default:l(()=>[...i[20]||(i[20]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1})):V("",!0)])],64)):t(f).loginType==="cos"?(c(),$(W,{key:1},[s("div",Ml,[i[22]||(i[22]=s("img",{alt:"",class:"login-type-image",src:Yt,style:{height:"28px"}},null,-1)),e(w,{style:{"font-size":"24px"}},{default:l(()=>[...i[21]||(i[21]=[r("腾讯云COS",-1)])]),_:1})]),e(v),s("div",null,[e(_,{label:"region"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.region,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[5]||(i[5]=F=>t(q)(t(f).loginForm.region))},{default:l(()=>[...i[23]||(i[23]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"secretId"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.secretId,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[6]||(i[6]=F=>t(q)(t(f).loginForm.secretId))},{default:l(()=>[...i[24]||(i[24]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"secretKey"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.secretKey,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[7]||(i[7]=F=>t(q)(t(f).loginForm.secretKey))},{default:l(()=>[...i[25]||(i[25]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"bucket"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.bucket,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[8]||(i[8]=F=>t(q)(t(f).loginForm.bucket))},{default:l(()=>[...i[26]||(i[26]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),!n()&&!a()?(c(),E(_,{key:0,label:"快速登录链接"},{default:l(()=>[e(y,{"model-value":t(me)(t(f).loginForm),readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[9]||(i[9]=F=>t(q)(t(me)(t(f).loginForm)))},{default:l(()=>[...i[27]||(i[27]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1})):V("",!0)])],64)):t(f).loginType==="private"?(c(),$(W,{key:2},[s("div",Ll,[i[29]||(i[29]=s("img",{alt:"",class:"login-type-image",src:jt,style:{height:"28px"}},null,-1)),e(w,{style:{"font-size":"24px"}},{default:l(()=>[...i[28]||(i[28]=[r("私有服务",-1)])]),_:1})]),e(v),s("div",null,[e(_,{label:"服务地址"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.serverUrl,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[10]||(i[10]=F=>t(q)(t(f).loginForm.serverUrl))},{default:l(()=>[...i[30]||(i[30]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"用户名"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.username,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[11]||(i[11]=F=>t(q)(t(f).loginForm.username))},{default:l(()=>[...i[31]||(i[31]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(_,{label:"密码"},{default:l(()=>[e(y,{"model-value":t(f).loginForm.password,readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[12]||(i[12]=F=>t(q)(t(f).loginForm.password))},{default:l(()=>[...i[32]||(i[32]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),!n()&&!a()?(c(),E(_,{key:0,label:"快速登录链接"},{default:l(()=>[e(y,{"model-value":t(me)(t(f).loginForm),readonly:!0},{append:l(()=>[e(k,{class:"copy-btn",onClick:i[13]||(i[13]=F=>t(q)(t(me)(t(f).loginForm)))},{default:l(()=>[...i[33]||(i[33]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1})):V("",!0)])],64)):(c(),$(W,{key:3},[s("div",Il,[i[35]||(i[35]=s("img",{alt:"",class:"login-type-image",src:Jt,style:{height:"130px"}},null,-1)),s("div",Ul,[e(w,{style:{"font-size":"22px"}},{default:l(()=>[...i[34]||(i[34]=[r("您正在使用本地文件存储",-1)])]),_:1})])]),s("div",Bl,[s("div",zl,[e(w,{type:"info"},{default:l(()=>[...i[36]||(i[36]=[r("没有更多信息",-1)])]),_:1})])])],64))]),_:1})}}}),Ol=X(Nl,[["__scopeId","data-v-298341ca"]]),Kl={class:"function-div"},Hl={class:"function-header",style:{"margin-bottom":"5px"}},Gl={class:"function-div"},Yl={class:"function-header",style:{"margin-bottom":"5px"}},jl={class:"function-div"},Jl={class:"function-header"},Wl={class:"function-div"},Xl={class:"function-header"},ql={class:"function-div"},Ql={class:"function-header"},Zl={style:{"margin-top":"10px"}},hl={class:"function-div"},eo={class:"function-header"},to={class:"function-div"},lo={class:"function-header"},oo={class:"function-div"},no={class:"function-header"},so={class:"function-div"},ao={class:"function-header"},ro={class:"function-div"},io={class:"function-header"},uo={class:"function-div"},po={class:"function-header"},fo={class:"function-div"},co={class:"function-header",style:{"margin-bottom":"5px"}},mo={class:"function-div"},go={class:"function-header"},yo={class:"function-div"},vo={class:"function-header",style:{"margin-bottom":"5px"}},_o={class:"function-div"},bo={class:"function-header"},wo={class:"function-div"},xo={class:"function-header"},ko={class:"function-div"},Co={class:"function-header",style:{"margin-bottom":"5px"}},So={key:0,class:"function-div"},Ao={class:"function-header"},$o={class:"function-div"},Fo={class:"function-header"},Po={class:"function-div"},Vo={class:"function-header"},Ro={class:"function-div",style:{display:"flex","justify-content":"space-evenly"}},Eo={class:"login-info"},Do={class:"function-div"},To={class:"function-header",style:{"margin-bottom":"5px"}},Mo={class:"function-div"},Lo={class:"function-header",style:{"margin-bottom":"5px"}},Io={class:"function-div"},Uo={class:"function-header",style:{"margin-bottom":"5px"}},Bo={class:"function-div"},zo={class:"function-header",style:{"margin-bottom":"5px"}},No={class:"function-div"},Oo={class:"function-header",style:{"margin-bottom":"5px"}},Ko={class:"function-div"},Ho={class:"function-header"},Go={style:{"margin-top":"10px"}},Yo={class:"function-div",style:{"margin-top":"30px"}},jo={class:"function-header"},Jo={style:{"margin-top":"5px"}},Wo={style:{padding:"0"}},Xo={style:{padding:"0"}},qo={style:{padding:"0 15px"}},Qo=Y({__name:"Setting",setup(H,{expose:f}){const n=Z(),a=ae(),p=Ke(),i=oe(),w=U(!1),v=U(ue.AUTO),k=()=>{console.log("打开设置");let d=localStorage.getItem("topicMode");d?v.value=d:v.value=ue.AUTO,a.visSetting=!0,w.value=!1},y=()=>{console.log("关闭设置"),a.visSetting=!1},_=()=>["xs","sm"].includes(G().value)?"calc(100vh - 120px)":"500px",A=()=>{if(console.log("设置，自动登录状态改变前钩子"),a.setting.autoUnlock)return Promise.resolve(!0);let d=`为了您的账号安全，建议您不要开启记住主密码功能。开启后任何人打开您设备的password-XL时，都可以直接访问解锁后的密码列表，极大地增加了密码泄露的风险。
如您仍需开启此功能，请务必妥善保存并牢记您的主密码。当您更换设备或浏览器指纹发生变更时，仍需您手动登录并使用主密码解锁。`;return new Promise(async o=>{console.log("设置，显示重要安全提示"),ke({title:"重要安全提示",message:Pt("div",{class:"el-alert el-alert--error is-light",style:"text-indent: 20px;"},d),showConfirmButton:!0,confirmButtonText:"确认开启",confirmButtonClass:"el-button--danger"}).then(()=>{console.log("设置，显示重要安全提示，验证身份"),i.verifyPasswordRef.getAndVerify(u=>n.passwordManager.verifyPassword(u)).then(u=>{o(!0),console.log("设置，保存自动解锁主密码"),localStorage.setItem("mainPassword",_t(bt(),u))})}).catch(()=>o(!1))})},F=()=>{if(console.log("设置，回收站状态改变前钩子"),!a.setting.enableRecycleBin||!n.deletedArray.length)return Promise.resolve(!0);let d="关闭回收站将立即清空回收站中所有密码";return new Promise(async(o,u)=>{ke({message:d,showConfirmButton:!0,confirmButtonText:"清空",type:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonClass:"el-button--danger"}).then(()=>{console.log("设置，回收站状态改变前钩子，确认"),o(!0)}).catch(()=>{console.log("设置，回收站状态改变前钩子，取消"),u()})})},D=d=>(console.log("设置，切换标签之前的钩子函数 activeName：",d," loginStore.loginType：",p.loginType),w.value?Promise.resolve(!0):d==="loginInfo"&&!["local","electron"].includes(p.loginType)?(console.log("设置，切换登录信息，验证密码"),new Promise((o,u)=>{i.verifyPasswordRef.getAndVerify(g=>n.passwordManager.verifyPassword(g)).then(()=>{o(!0),console.log("设置，切换登录信息，验证密码通过"),w.value=!0}).catch(g=>{console.error("设置，切换登录信息，验证密码异常",g),u()})})):Promise.resolve(!0));f({openSetting:k,closeSetting:y}),J(()=>a.setting.showLabelCard,d=>{a.visSetting&&(console.log("显示标签卡片设置变更:",d),n.passwordManager.syncSetting().then(o=>{o.status&&i.labelTreeRef?.setCheckedNodes([])}))}),J(()=>a.setting.showNote,d=>{a.visSetting&&(console.log("启用笔记功能设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.dynamicBackground,d=>{a.visSetting&&(console.log("动态背景图设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.showFavoriteCard,d=>{a.visSetting&&(console.log("显示收藏卡片设置变更:",d),n.passwordManager.syncSetting().then(o=>{o.status&&(n.filterCondition.favoriteId=0)}))}),J(()=>a.setting.enableRecycleBin,(d,o)=>{a.visSetting&&(console.log("密码回收站设置变更:",d,o),n.passwordManager.syncSetting().then(u=>{u.status&&(d||n.passwordManager.emptyRecycle())}))}),J(()=>a.setting.enableShortcutKey,d=>{a.visSetting&&(console.log("快捷键设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.sortField,d=>{a.visSetting&&(console.log("排序字段设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.sortOrder,d=>{a.visSetting&&(console.log("排序顺序设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.showLabelForTable,d=>{a.visSetting&&(console.log("密码列表中显示标签设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.enableAiAdd,d=>{a.visSetting&&(console.log("AI创建密码设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.showTimeForTable,d=>{a.visSetting&&(console.log("密码列表中显示时间设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.showStrength,d=>{a.visSetting&&(console.log("显示密码强度设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.timeoutLock,d=>{a.visSetting&&(console.log("超时锁定设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.autoLogin,d=>{a.visSetting&&(console.log("自动登录设置变更:",d),n.passwordManager.syncSetting().then(o=>{o.status&&(d?ie.success({title:"已开启自动登录",message:"在您下次登录时将系统将记住登录信息！"}):(console.log("自动登录设置变更 同步后"),sessionStorage.removeItem("loginInfo"),localStorage.removeItem("loginInfo"),ie.success({title:"已关闭自动登录",message:"自动登录信息已清除！"}),a.setting.autoUnlock=!1))}))}),J(()=>a.setting.autoUnlock,d=>{a.visSetting&&(console.log("自动解锁设置变更:",d),n.passwordManager.syncSetting().then(o=>{o.status&&(d?(a.setting.autoLogin=!0,le.success("已开启自动解锁"),a.setting.timeoutLock=0):(localStorage.removeItem("mainPassword"),le.success("已清除主密码信息")))}))}),J(()=>a.setting.verifyShowGesture,d=>{a.visSetting&&(console.log("验证密码显示手势设置变更:",d),n.passwordManager.syncSetting(),localStorage.setItem("showGesture",d+""))}),J(()=>v.value,d=>{a.visSetting&&(console.log("主题设置变更:",d),n.setTopicMode(d))});let z=null;J(()=>a.setting.easyConfuseChat,d=>{a.visSetting&&(z&&clearTimeout(z),z=setTimeout(()=>{console.log("易混淆字符设置变更:",d),n.passwordManager.syncSetting()},300))}),J(()=>a.setting.autoGeneratePassword,d=>{a.visSetting&&(console.log("自动生成密码设置变更:",d),n.passwordManager.syncSetting())}),J(()=>a.setting.passwordColor,d=>{a.visSetting&&(console.log("显示密码颜色设置变更:",d),n.passwordManager.syncSetting())});let B=null;J(()=>a.setting.generateRule,d=>{a.visSetting&&(B&&clearTimeout(B),B=setTimeout(()=>{console.log("默认密码生成规则设置变更:",d),n.passwordManager.syncSetting()},300))},{deep:!0});const L=()=>!!window.androidAPI;return(d,o)=>{const u=ne,g=Nt,P=zt,m=Ye,T=Ot,N=ye,b=pt,x=Ae,C=ft,S=Se,j=Ie,h=ut,I=_e,Fe=$e,re=de,ce=Ol,Ue=fe,Be=Dl,Pe=Sl,ze=xl,Ne=ol,Oe=dt,M=Le,xe=ve;return c(),E(xe,{modelValue:t(a).visSetting,"onUpdate:modelValue":o[31]||(o[31]=R=>t(a).visSetting=R),fullscreen:["xs","sm"].includes(t(G)().value),draggable:"",width:"750px"},{header:l(()=>[e(u,{size:"large",style:{"user-select":"none"}},{default:l(()=>[...o[32]||(o[32]=[s("span",{class:"iconfont icon-setting"},null,-1),r(" 设置 ",-1)])]),_:1})]),default:l(()=>[e(M,{modelValue:t(a),"onUpdate:modelValue":o[30]||(o[30]=R=>se(a)?a.value=R:null),"label-position":"right","label-width":"140px"},{default:l(()=>[e(Oe,{"before-leave":D,style:{"margin-top":"10px"},"tab-position":"left"},{default:l(()=>[e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[33]||(o[33]=[s("span",{class:"iconfont icon-personalization action-icon",style:{color:"#FF5733"}},null,-1),s("span",{style:{"letter-spacing":"3px"}}," 个性化",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",Kl,[s("div",Hl,[e(u,{tag:"b"},{default:l(()=>[...o[34]||(o[34]=[r("主题",-1)])]),_:1}),e(P,{modelValue:t(v),"onUpdate:modelValue":o[0]||(o[0]=R=>se(v)?v.value=R:null),size:"small",style:{width:"100px"}},{default:l(()=>[e(g,{value:t(ue).AUTO,label:"跟随系统"},null,8,["value"]),e(g,{value:t(ue).LIGHT,label:"明亮主题"},null,8,["value"]),e(g,{value:t(ue).DARK,label:"深色主题"},null,8,["value"])]),_:1},8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[35]||(o[35]=[r(" 您可以根据个人喜好选择明亮或深色主题，也可以设置为跟随系统 ",-1)])]),_:1})]),s("div",Gl,[s("div",Yl,[e(u,{tag:"b"},{default:l(()=>[...o[36]||(o[36]=[r("显示背景图",-1)])]),_:1}),e(T,{modelValue:t(a).setting.dynamicBackground,"onUpdate:modelValue":o[1]||(o[1]=R=>t(a).setting.dynamicBackground=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[37]||(o[37]=[r(" 用于控制是否显示首页动态背景图，若浏览器卡顿您可以关闭动态背景图 ",-1)])]),_:1})]),s("div",jl,[s("div",Jl,[e(u,{tag:"b"},{default:l(()=>[...o[38]||(o[38]=[r("易混淆字符",-1)])]),_:1}),e(N,{modelValue:t(a).setting.easyConfuseChat,"onUpdate:modelValue":o[2]||(o[2]=R=>t(a).setting.easyConfuseChat=R),size:"small",style:{width:"100px"}},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[39]||(o[39]=[r(" 随机生成密码时将不会使用配置的易混淆字符 ",-1)])]),_:1})]),s("div",Wl,[s("div",Xl,[e(u,{tag:"b"},{default:l(()=>[...o[40]||(o[40]=[r("自动生成密码",-1)])]),_:1}),e(T,{modelValue:t(a).setting.autoGeneratePassword,"onUpdate:modelValue":o[3]||(o[3]=R=>t(a).setting.autoGeneratePassword=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[41]||(o[41]=[r(" 当您添加密码时是否希望系统使用默认规则自动生成一个密码 ",-1)])]),_:1})]),s("div",ql,[s("div",Ql,[e(u,{tag:"b"},{default:l(()=>[...o[42]||(o[42]=[r("随机密码生成规则",-1)])]),_:1})]),e(m,{class:"function-line"}),s("div",Zl,[s("div",null,[e(S,null,{default:l(()=>[e(x,{md:{span:10},sm:{span:24},style:{"margin-bottom":"10px","text-align":"center"}},{default:l(()=>[e(b,{modelValue:t(a).setting.generateRule.uppercase,"onUpdate:modelValue":o[4]||(o[4]=R=>t(a).setting.generateRule.uppercase=R),border:"",label:"大写",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"]),e(b,{modelValue:t(a).setting.generateRule.lowercase,"onUpdate:modelValue":o[5]||(o[5]=R=>t(a).setting.generateRule.lowercase=R),border:"",label:"小写",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"]),e(b,{modelValue:t(a).setting.generateRule.number,"onUpdate:modelValue":o[6]||(o[6]=R=>t(a).setting.generateRule.number=R),border:"",label:"数字",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"]),e(b,{modelValue:t(a).setting.generateRule.symbol,"onUpdate:modelValue":o[7]||(o[7]=R=>t(a).setting.generateRule.symbol=R),border:"",label:"符号",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"])]),_:1}),e(x,{md:{span:10},sm:{span:24},style:{"text-align":"center"}},{default:l(()=>[o[43]||(o[43]=s("span",null,"密码长度",-1)),e(C,{modelValue:t(a).setting.generateRule.length,"onUpdate:modelValue":o[8]||(o[8]=R=>t(a).setting.generateRule.length=R),max:32,min:4,size:"small",style:{"margin-top":"10px"}},null,8,["modelValue"])]),_:1})]),_:1})])])])]),_:1},8,["height"])]),_:1}),e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[44]||(o[44]=[s("span",{class:"iconfont icon-function action-icon",style:{color:"#FF33FF"}},null,-1),r(" 功能管理 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",hl,[s("div",eo,[e(u,{tag:"b"},{default:l(()=>[...o[45]||(o[45]=[r("启用AI创建",-1)])]),_:1}),e(T,{modelValue:t(a).setting.enableAiAdd,"onUpdate:modelValue":o[9]||(o[9]=R=>t(a).setting.enableAiAdd=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[46]||(o[46]=[r(" 在首页启用AI创建密码，AI创建可以把包含账号信息的文本解析成结构化的密码。 ",-1)])]),_:1})]),s("div",to,[s("div",lo,[e(u,{tag:"b"},{default:l(()=>[...o[47]||(o[47]=[r("显示标签卡片",-1)])]),_:1}),e(T,{modelValue:t(a).setting.showLabelCard,"onUpdate:modelValue":o[10]||(o[10]=R=>t(a).setting.showLabelCard=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[48]||(o[48]=[r(" 显示标签卡片后，您可以在首页方便地管理所有标签，并使用标签功能筛选密码列表。 ",-1)])]),_:1})]),s("div",oo,[s("div",no,[e(u,{tag:"b"},{default:l(()=>[...o[49]||(o[49]=[r("启用笔记功能",-1)])]),_:1}),e(T,{modelValue:t(a).setting.showNote,"onUpdate:modelValue":o[11]||(o[11]=R=>t(a).setting.showNote=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[50]||(o[50]=[r(" 启用笔记功能后可在首页进入笔记页面，如果需要记录图片请确保对象存储服务开启外网访问权限，否则图片无法正常显示。 ",-1)])]),_:1})]),s("div",so,[s("div",ao,[e(u,{tag:"b"},{default:l(()=>[...o[51]||(o[51]=[r("显示收藏卡片",-1)])]),_:1}),e(T,{modelValue:t(a).setting.showFavoriteCard,"onUpdate:modelValue":o[12]||(o[12]=R=>t(a).setting.showFavoriteCard=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[52]||(o[52]=[r(" 显示收藏卡片后，您可以在首页查看所有已收藏的密码，点击密码名称即可在密码列表中显示。 ",-1)])]),_:1})]),s("div",ro,[s("div",io,[e(u,{tag:"b"},{default:l(()=>[...o[53]||(o[53]=[r("密码回收站",-1)])]),_:1}),e(T,{modelValue:t(a).setting.enableRecycleBin,"onUpdate:modelValue":o[13]||(o[13]=R=>t(a).setting.enableRecycleBin=R),"before-change":F},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[54]||(o[54]=[r(" 开启密码回收站后，已删除的密码将会被保存至回收站，您可以选择永久删除或恢复。 ",-1)])]),_:1})]),s("div",uo,[s("div",po,[e(u,{tag:"b"},{default:l(()=>[...o[55]||(o[55]=[r("快捷键",-1)])]),_:1}),e(T,{modelValue:t(a).setting.enableShortcutKey,"onUpdate:modelValue":o[14]||(o[14]=R=>t(a).setting.enableShortcutKey=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[o[60]||(o[60]=r(" 锁定/解锁： ",-1)),e(I,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:l(()=>[...o[56]||(o[56]=[r("Alt + L",-1)])]),_:1}),o[61]||(o[61]=r(" 搜索： ",-1)),e(I,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:l(()=>[...o[57]||(o[57]=[r("Ctrl + F",-1)])]),_:1}),o[62]||(o[62]=r(" 创建： ",-1)),e(I,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:l(()=>[...o[58]||(o[58]=[r("Alt + N",-1)])]),_:1}),o[63]||(o[63]=r(" 保存： ",-1)),e(I,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:l(()=>[...o[59]||(o[59]=[r("Ctrl + S",-1)])]),_:1})]),_:1})]),e(Fe,{closable:!1,"show-icon":"",title:"若您需要更多密码显示空间，可以选择关闭标签和收藏卡片并在更多功能中使用。",type:"info"})]),_:1},8,["height"])]),_:1}),e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[64]||(o[64]=[s("span",{class:"iconfont icon-display action-icon",style:{color:"#00e329"}},null,-1),r(" 密码显示 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",fo,[s("div",co,[e(u,{tag:"b"},{default:l(()=>[...o[65]||(o[65]=[r("密码排序",-1)])]),_:1}),s("div",null,[e(P,{modelValue:t(a).setting.sortField,"onUpdate:modelValue":o[15]||(o[15]=R=>t(a).setting.sortField=R),size:"small",style:{width:"90px"}},{default:l(()=>[e(g,{label:"添加时间",value:"addTime"}),e(g,{label:"修改时间",value:"updateTime"}),e(g,{label:"密码强度",value:"strength"}),e(g,{label:"密码名称",value:"title"}),e(g,{label:"登录名",value:"username"}),e(g,{label:"收藏",value:"favorite"})]),_:1},8,["modelValue"]),e(P,{modelValue:t(a).setting.sortOrder,"onUpdate:modelValue":o[16]||(o[16]=R=>t(a).setting.sortOrder=R),size:"small",style:{width:"65px","margin-left":"5px"}},{default:l(()=>[e(g,{value:t(Ee).ASC,label:"正序"},null,8,["value"]),e(g,{value:t(Ee).DESC,label:"倒序"},null,8,["value"])]),_:1},8,["modelValue"])])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[66]||(o[66]=[r(" 此选项用于设置密码默认排序规则。您也可以通过点击密码列表中的小箭头进行临时排序，临时排序会在页面刷新后重置。 ",-1)])]),_:1})]),s("div",mo,[s("div",go,[e(u,{tag:"b"},{default:l(()=>[...o[67]||(o[67]=[r("在密码列表中显示标签",-1)])]),_:1}),e(T,{modelValue:t(a).setting.showLabelForTable,"onUpdate:modelValue":o[17]||(o[17]=R=>t(a).setting.showLabelForTable=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[68]||(o[68]=[r(" 此选项用于设置是否在密码列表中显示标签列，显示标签将会占用更多空间，您可根据需要开启。 ",-1)])]),_:1})]),s("div",yo,[s("div",vo,[e(u,{tag:"b"},{default:l(()=>[...o[69]||(o[69]=[r("在密码列表中显示时间",-1)])]),_:1}),e(P,{modelValue:t(a).setting.showTimeForTable,"onUpdate:modelValue":o[18]||(o[18]=R=>t(a).setting.showTimeForTable=R),size:"small",style:{width:"100px"}},{default:l(()=>[e(g,{label:"不显示时间",value:"no"}),e(g,{label:"显示添加时间",value:"addTime"}),e(g,{label:"显示修改时间",value:"updateTime"})]),_:1},8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[70]||(o[70]=[r(" 此选项用于设置是否在密码列表中显示时间，显示时间将会占用更多空间，您可根据需要开启。 ",-1)])]),_:1})]),s("div",_o,[s("div",bo,[e(u,{tag:"b"},{default:l(()=>[...o[71]||(o[71]=[r("显示密码强度",-1)])]),_:1}),e(T,{modelValue:t(a).setting.showStrength,"onUpdate:modelValue":o[19]||(o[19]=R=>t(a).setting.showStrength=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[72]||(o[72]=[r(" 我们根据密码组成将密码分为弱、中、强3个等级，分别用颜色 ",-1),s("div",{class:"password-strength",style:{"background-color":"#F56C6C"}},null,-1),s("div",{class:"password-strength",style:{"background-color":"#FF9700"}},null,-1),s("div",{class:"password-strength",style:{"background-color":"#67C23A"}},null,-1),r(" 表示，若您不喜欢此功能可在此关闭。 ",-1)])]),_:1})]),s("div",wo,[s("div",xo,[e(u,{tag:"b"},{default:l(()=>[...o[73]||(o[73]=[r("密码颜色",-1)])]),_:1}),e(T,{modelValue:t(a).setting.passwordColor,"onUpdate:modelValue":o[20]||(o[20]=R=>t(a).setting.passwordColor=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[74]||(o[74]=[r(" 开启此功能后您可以在创建密码时选择密码颜色，并在卡片或表格中显示 ",-1)])]),_:1})])]),_:1},8,["height"])]),_:1}),e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[75]||(o[75]=[s("span",{class:"iconfont icon-verify action-icon",style:{color:"#33CFFF"}},null,-1),r(" 密码安全 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",ko,[s("div",Co,[e(u,{tag:"b"},{default:l(()=>[...o[76]||(o[76]=[r("超时锁定",-1)])]),_:1}),e(P,{modelValue:t(a).setting.timeoutLock,"onUpdate:modelValue":o[21]||(o[21]=R=>t(a).setting.timeoutLock=R),disabled:t(a).setting.autoUnlock,title:t(a).setting.autoUnlock?"已开启自动解锁无法设置自动锁定":"",size:"small",style:{width:"100px"}},{default:l(()=>[e(g,{value:0,label:"永不超时"}),e(g,{value:30,label:"30秒"}),e(g,{value:60,label:"1分钟"}),e(g,{value:300,label:"5分钟"}),e(g,{value:600,label:"10分钟"}),e(g,{value:1800,label:"30分钟"}),e(g,{value:3600,label:"1小时"}),e(g,{value:14400,label:"4小时"}),e(g,{value:28800,label:"8小时"}),e(g,{value:43200,label:"12小时"})]),_:1},8,["modelValue","disabled","title"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[77]||(o[77]=[r(" 系统将在此时间后自动锁定密码列表。 ",-1)])]),_:1})]),t(p).loginType!=="local"?(c(),$("div",So,[s("div",Ao,[e(u,{tag:"b"},{default:l(()=>[...o[78]||(o[78]=[r("自动登录",-1)])]),_:1}),e(T,{modelValue:t(a).setting.autoLogin,"onUpdate:modelValue":o[22]||(o[22]=R=>t(a).setting.autoLogin=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[79]||(o[79]=[r(" 开启自动登录功能后，系统会将您的登录信息通过浏览器指纹加密后存储在浏览器中。当您再次打开password-XL并成功验证主密码时，系统会自动登录。 ",-1)])]),_:1})])):V("",!0),s("div",$o,[s("div",Fo,[e(u,{tag:"b"},{default:l(()=>[...o[80]||(o[80]=[r("自动解锁",-1)])]),_:1}),e(T,{modelValue:t(a).setting.autoUnlock,"onUpdate:modelValue":o[23]||(o[23]=R=>t(a).setting.autoUnlock=R),"before-change":A},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[81]||(o[81]=[r(" 开启自动解锁功能后，系统会将您的主密码通过浏览器指纹加密后存储在浏览器中。当您再次打开password-XL时，系统会自动登录并使用主密码解锁。 ",-1)])]),_:1})]),s("div",Po,[s("div",Vo,[e(u,{tag:"b"},{default:l(()=>[...o[82]||(o[82]=[r("验证密码时显示手势",-1)])]),_:1}),e(T,{modelValue:t(a).setting.verifyShowGesture,"onUpdate:modelValue":o[24]||(o[24]=R=>t(a).setting.verifyShowGesture=R)},null,8,["modelValue"])]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[83]||(o[83]=[r(" 当您使用手势密码时可以在此配置是否显示手势滑动轨迹。 ",-1)])]),_:1})]),s("div",Ro,[e(re,{plain:"",type:"primary",onClick:t(i).setPasswordRef.setMainPassword},{default:l(()=>[...o[84]||(o[84]=[r("修改主密码",-1)])]),_:1},8,["onClick"]),e(re,{type:"danger",onClick:t(i).cancelAccountRef.showCloseAccount},{default:l(()=>[...o[85]||(o[85]=[r("注销账户",-1)])]),_:1},8,["onClick"])])]),_:1},8,["height"])]),_:1}),e(h,{name:"loginInfo"},{label:l(()=>[e(u,null,{default:l(()=>[...o[86]||(o[86]=[s("span",{class:"iconfont icon-info action-icon",style:{color:"#409EFF"}},null,-1),r(" 登录信息 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",Eo,[e(ce)])]),_:1},8,["height"])]),_:1}),L()?V("",!0):(c(),E(h,{key:0},{label:l(()=>[e(u,null,{default:l(()=>[...o[87]||(o[87]=[s("span",{class:"iconfont icon-recovery action-icon",style:{color:"#ffc400"}},null,-1),r(" 备份恢复 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[e(Fe,{style:{"margin-bottom":"10px"},type:"warning"},{default:l(()=>[...o[88]||(o[88]=[r("笔记数据不会被备份或导出，请注意",-1)])]),_:1}),s("div",Do,[s("div",To,[e(u,{tag:"b"},{default:l(()=>[...o[89]||(o[89]=[r("备份密码",-1)])]),_:1}),e(re,{plain:"",size:"small",type:"primary",onClick:o[25]||(o[25]=R=>t(i).backupAndRecoveryRef.backup(!1))},{default:l(()=>[...o[90]||(o[90]=[r("备份 ",-1)])]),_:1})]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[o[92]||(o[92]=r(" 密码备份功能可以安全的将加密后的密码文件导出，在需要时通过 ",-1)),e(u,null,{default:l(()=>[...o[91]||(o[91]=[r("恢复备份密码",-1)])]),_:1}),o[93]||(o[93]=r(" 功能还原。 ",-1))]),_:1})]),s("div",Mo,[s("div",Lo,[e(u,{tag:"b"},{default:l(()=>[...o[94]||(o[94]=[r("恢复备份密码",-1)])]),_:1}),e(re,{plain:"",size:"small",type:"primary",onClick:o[26]||(o[26]=R=>t(i).backupAndRecoveryRef.recovery())},{default:l(()=>[...o[95]||(o[95]=[r("恢复 ",-1)])]),_:1})]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[96]||(o[96]=[r(" 此功能可以将备份文件中的密码恢复到密码列表。在验证备份文件的主密码后，您可以选择合并或覆盖方式恢复密码。 ",-1)])]),_:1})]),s("div",Io,[s("div",Uo,[e(u,{tag:"b"},{default:l(()=>[...o[97]||(o[97]=[r("导出密码",-1)])]),_:1}),e(re,{plain:"",size:"small",type:"primary",onClick:o[27]||(o[27]=R=>t(i).exportExcelRef.exportExcel(!1))},{default:l(()=>[...o[98]||(o[98]=[r("导出 Excel ",-1)])]),_:1})]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[99]||(o[99]=[r(" 导出密码会将敏感信息明文存储在excel表格中，请注意密码安全。若您仅需要迁移账号或备份密码建议使用密码备份与恢复功能更加高效安全。 ",-1)])]),_:1})]),s("div",Bo,[s("div",zo,[e(u,{tag:"b"},{default:l(()=>[...o[100]||(o[100]=[r("导入密码",-1)])]),_:1}),e(re,{plain:"",size:"small",type:"primary",onClick:o[28]||(o[28]=R=>t(i).importExcelRef&&t(i).importExcelRef.importExcel())},{default:l(()=>[...o[101]||(o[101]=[r("导入 Excel ",-1)])]),_:1})]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[...o[102]||(o[102]=[r(" 密码导入功能支持按照密码模板导入excel文件中的密码，您可以通过下载模板功能获取密码模板。 ",-1)])]),_:1})]),s("div",No,[s("div",Oo,[e(u,{tag:"b"},{default:l(()=>[...o[103]||(o[103]=[r("下载导入模板",-1)])]),_:1}),e(re,{plain:"",size:"small",type:"primary",onClick:o[29]||(o[29]=R=>t(i).exportExcelRef&&t(i).exportExcelRef.exportExcel(!0))},{default:l(()=>[...o[104]||(o[104]=[r("下载 ",-1)])]),_:1})]),e(m,{class:"function-line"}),e(u,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:l(()=>[o[106]||(o[106]=r(" 您可在下载的Excel模板中按照要求填写您的密码列表（ ",-1)),e(u,{type:"danger"},{default:l(()=>[...o[105]||(o[105]=[r("密码名称为必填",-1)])]),_:1}),o[107]||(o[107]=r(" ），然后使用密码导入功能导入您的密码。 ",-1))]),_:1})])]),_:1},8,["height"])]),_:1})),e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[108]||(o[108]=[s("span",{class:"iconfont icon-problem action-icon",style:{color:"#FF69B4"}},null,-1),r(" 问题反馈 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",Ko,[s("div",Ho,[e(u,{tag:"b"},{default:l(()=>[...o[109]||(o[109]=[r("建议反馈",-1)])]),_:1})]),e(m,{class:"function-line"}),s("div",Go,[e(u,{style:{"text-indent":"10px"},tag:"p"},{default:l(()=>[o[111]||(o[111]=r(" 您的建议是我们不断进步的动力，您可以在此项目 ",-1)),e(Ue,{href:t(ee).repository.url+"/issues",style:{position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:l(()=>[...o[110]||(o[110]=[r("开源地址 ",-1)])]),_:1},8,["href"]),o[112]||(o[112]=r(" 中留下您遇到的问题或提出宝贵的建议。 ",-1))]),_:1})])]),s("div",Yo,[s("div",jo,[e(u,{tag:"b"},{default:l(()=>[...o[113]||(o[113]=[r("常见问题",-1)])]),_:1})]),s("div",Jo,[e(Be)])])]),_:1},8,["height"])]),_:1}),e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[114]||(o[114]=[s("span",{class:"iconfont icon-about action-icon",style:{color:"#FF4500"}},null,-1),r(" 关于项目 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",Wo,[e(Pe)])]),_:1},8,["height"])]),_:1}),e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[115]||(o[115]=[s("span",{class:"iconfont icon-coffee action-icon",style:{color:"#FF5858FF"}},null,-1),r(" 支持我们 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",Xo,[e(ze)])]),_:1},8,["height"])]),_:1}),e(h,null,{label:l(()=>[e(u,null,{default:l(()=>[...o[116]||(o[116]=[s("span",{class:"iconfont icon-copyright action-icon",style:{color:"#FF8C00"}},null,-1),r(" 版权声明 ",-1)])]),_:1})]),default:l(()=>[e(j,{height:_()},{default:l(()=>[s("div",qo,[e(Ne)])]),_:1},8,["height"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","fullscreen"])}}}),Zo=X(Qo,[["__scopeId","data-v-50541de6"]]),ho={key:0,style:{"margin-top":"10px","text-align":"center"}},en=Y({__name:"SetPassword",setup(H,{expose:f}){const n=Z(),a=Ke(),p=oe(),i=U(),w=U(),v=U(),k=U(!1),y=U(JSON.parse(JSON.stringify(n.mainPasswordType))),_=U(""),A=U(""),F=Te({firstMainPassword:"",secondMainPassword:""}),D=Te({firstMainPassword:[{required:!0,message:"请输入主密码",trigger:"blur"}],secondMainPassword:[{required:!0,message:"请再次输入主密码",trigger:"blur"}]}),z=()=>{console.log("进入设置密码"),F.firstMainPassword="",F.secondMainPassword="",A.value="",n.serviceStatus===K.WAIT_INIT?(console.log("设置密码，初始化主密码"),k.value=!0):(console.log("设置密码，先验证当前密码是否正确"),p.verifyPasswordRef.getAndVerify(u=>n.passwordManager.verifyPassword(u)).then(u=>{_.value=u,k.value=!0,console.log("设置密码，验证当前密码是否正确 通过")}))},B=u=>{console.log("设置密码，标准主密码 确认"),u.validate(g=>{if(g){if(F.firstMainPassword!==F.secondMainPassword){console.log("设置密码，标准主密码 两次输入的密码不一致"),le.error("两次输入的密码不一致");return}if(F.firstMainPassword===_.value){console.log("设置密码，标准主密码 新密码与原密码一致"),le.error("新密码与原密码一致");return}n.serviceStatus===K.WAIT_INIT?d(F.firstMainPassword):o(F.firstMainPassword)}})},L=u=>{if(console.log("设置密码，手势主密码 绘制完成事件"),!A.value){console.log("设置密码，手势主密码 第一次绘制"),A.value=u;return}if(!(u.length<5)){if(A.value!==u){A.value="",le.warning("两次绘制的密码不一致");return}if(A.value===_.value){A.value="",console.log("设置密码，手势主密码 新密码与原密码一致"),le.error("新密码与原密码一致");return}n.serviceStatus===K.WAIT_INIT?d(A.value):o(A.value)}},d=u=>{console.log("设置密码，输入完成 初始化主密码"),n.loading(),n.passwordManager.initMainPassword(y.value,u).then(g=>{g.status?(k.value=!1,console.log("设置密码，设置成功"),le.success("设置成功"),a.setAutoLoginInfo(u)):(console.log("设置密码，设置失败 ",g.message),le.error(g.message)),n.unloading()}).catch(()=>{n.unloading()})},o=u=>{console.log("设置密码，输入完成 修改主密码"),n.passwordManager.updateMainPassword(_.value,y.value,u).then(g=>{g.status?(k.value=!1,a.setAutoLoginInfo(u),console.log("设置密码，修改成功"),le.success("修改成功")):(console.log("设置密码，修改失败：",g.message),le.error(g.message)),n.unloading()}).catch(()=>{n.unloading()})};return J(y,()=>{i.value?.clearValidate()}),f({setMainPassword:z}),(u,g)=>{const P=ne,m=$e,T=ye,N=je,b=Le,x=ut,C=wt,S=dt,j=de,h=ve;return c(),E(h,{modelValue:t(k),"onUpdate:modelValue":g[7]||(g[7]=I=>se(k)?k.value=I:null),"close-on-click-modal":!1,"close-on-press-escape":t(n).serviceStatus!==t(K).WAIT_INIT,"show-close":t(n).serviceStatus!==t(K).WAIT_INIT,width:["xs"].includes(t(G)().value)?"95%":"550px",onOpen:g[8]||(g[8]=I=>t(i)?.resetFields()),onOpened:g[9]||(g[9]=I=>t(w)?.focus())},Vt({header:l(()=>[e(P,{size:"large",style:{"user-select":"none"}},{default:l(()=>[...g[10]||(g[10]=[s("span",{class:"iconfont icon-verify"},null,-1),r(" 设置主密码 ",-1)])]),_:1})]),default:l(()=>[e(m,{closable:!1,"show-icon":"",style:{"margin-top":"10px"},title:"主密码一旦遗忘，所有密码均无法找回！请慎重设置您的主密码。",type:"warning"}),e(S,{modelValue:t(y),"onUpdate:modelValue":g[5]||(g[5]=I=>se(y)?y.value=I:null),style:{"margin-top":"15px"},type:"card"},{default:l(()=>[e(x,{name:t(Ve).STANDARD,label:"标准密码"},{default:l(()=>[e(b,{ref_key:"setPasswordFormRef",ref:i,model:t(F),rules:t(D),"label-width":"80px",style:{width:"300px",margin:"20px auto"},onSubmit:g[4]||(g[4]=rt(()=>{},["prevent"]))},{default:l(()=>[e(N,{label:"主密码",prop:"firstMainPassword"},{default:l(()=>[e(T,{ref_key:"firstPasswordInputRef",ref:w,modelValue:t(F).firstMainPassword,"onUpdate:modelValue":g[0]||(g[0]=I=>t(F).firstMainPassword=I),autocomplete:"new-password",placeholder:"请输入主密码","show-password":"",type:"password",onKeyup:g[1]||(g[1]=Me(I=>t(v).focus(),["enter","native"]))},null,8,["modelValue"])]),_:1}),e(N,{label:"确认密码",prop:"secondMainPassword",style:{"padding-top":"10px"}},{default:l(()=>[e(T,{ref_key:"secondMainPasswordRef",ref:v,modelValue:t(F).secondMainPassword,"onUpdate:modelValue":g[2]||(g[2]=I=>t(F).secondMainPassword=I),autocomplete:"new-password",placeholder:"请再次输入主密码","show-password":"",type:"password",onKeyup:g[3]||(g[3]=Me(I=>B(t(i)),["enter","native"]))},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["name"]),e(x,{disabled:t(n).globalLoading.vis,name:t(Ve).GESTURE,label:"手势密码"},{default:l(()=>[t(y)===t(Ve).GESTURE?(c(),$("div",ho,[t(A)?(c(),E(P,{key:1},{default:l(()=>[...g[12]||(g[12]=[r("请再次绘制手势密码",-1)])]),_:1})):(c(),E(P,{key:0},{default:l(()=>[...g[11]||(g[11]=[r("请绘制手势密码",-1)])]),_:1})),e(C,{style:{width:"350px",margin:"0 auto"},onComplete:L})])):V("",!0)]),_:1},8,["disabled","name"])]),_:1},8,["modelValue"])]),_:2},[t(y)===t(Ve).STANDARD?{name:"footer",fn:l(()=>[e(j,{disabled:t(n).globalLoading.vis,type:"primary",onClick:g[6]||(g[6]=I=>B(t(i)))},{default:l(()=>[...g[13]||(g[13]=[r("确定 ",-1)])]),_:1},8,["disabled"])]),key:"0"}:void 0]),1032,["modelValue","close-on-press-escape","show-close","width"])}}}),tn=X(en,[["__scopeId","data-v-c3cf4cd1"]]),ln={style:{position:"absolute",padding:"7px"}},on={style:{"margin-top":"20px",padding:"10px"}},nn={style:{"margin-top":"20px",padding:"10px"}},sn=Y({__name:"BackupAndRecovery",setup(H,{expose:f}){const n=Z(),a=oe(),p=U(!1),i=U(),w=U([]),v=U([]),k=d=>{console.log("密码备份 auto:",d);let o=n.passwordManager.getStoreData();if(!o){console.error("系统异常 备份文件不存在"),ie.error({title:"系统异常",message:"备份文件不存在"});return}let u=d?`您与“${ge(Date.now(),"YYYY-MM-DD HH:mm")}” 进行密码恢复时系统自动备份了该文件，`:`您于“${ge(Date.now(),"YYYY-MM-DD HH:mm")}” 手动备份了该文件，`,g=n.allPasswordArray.length,P=xt(),m={explain:`此文件为password-XL 密码备份文件，${u}此文件包含：${g} 个密码、${P} 个标签。 password-XL 官网服务地址为：https://password-xl.cn`,storeData:o,backupTime:Date.now()},T="密码备份 "+ge(Date.now(),"YYYY-MM-DD HH:mm:ss")+".json";const N=new Blob([JSON.stringify(m)],{type:"text/plain;charset=utf-8"});console.log("密码备份 导出文件:",T),Wt.saveAs(N,T)},y=()=>{console.log("密码恢复"),i.value.click()},_=()=>{if(i.value.files.length===0)return;console.log("密码备份,文件选择器选择了文件：",i.value.files.length);let d=i.value.files[0],o=new FileReader;o.onload=()=>{if(o.result)try{let u=JSON.parse(o.result);i.value.value="",A(u)}catch(u){console.error(u),ie.error({title:"恢复失败",message:"请检查备份文件是否正确"})}},o.readAsText(d)},A=async d=>{console.log("密码备份,开始恢复密码");let o,u,g=Qe(n.mainPassword,d.storeData.passwordData);if(console.log("密码备份, 检查当前主密码是否可以解锁备份文件:",g),g)o=Re(n.mainPassword,d.storeData.passwordData),u=Re(n.mainPassword,d.storeData.labelData);else{let P=await a.verifyPasswordRef.getAndVerify(m=>Qe(m,d.storeData.passwordData),d.storeData.mainPasswordType);console.log("密码备份, 需要用户输入备份文件的主密码 mainPassword:",P),P&&(o=Re(P,d.storeData.passwordData),u=Re(P,d.storeData.labelData))}if(!o||!u)return console.log("密码恢复失败, 请检查备份文件及主密码是否正确"),ie.error({title:"恢复失败",message:"请检查备份文件及主密码是否正确"}),!1;w.value=kt(JSON.parse(o)),v.value=JSON.parse(u),console.log("密码恢复, 解压缩密码列表: ",w.value.length,v.value),!n.allPasswordArray.length&&!n.labelArray.length?(console.log("密码恢复, 当前列表没有密码直接恢复"),F()):p.value=!0},F=()=>{console.log("密码恢复, 覆盖方式恢复 验证密码"),a.verifyPasswordRef.getAndVerify(d=>n.passwordManager.verifyPassword(d)).then(()=>{D()})},D=()=>{console.log("密码恢复, 覆盖方式恢复"),(n.allPasswordArray.length||n.labelArray.length)&&(console.log("密码恢复, 恢复前先备份当前数据"),k(!0),le.success("已为您自动备份现有密码")),console.log("密码恢复, 覆盖 数据确认：",n.allPasswordArray.length,w.value.length,n.labelArray.length,v.value.length),n.allPasswordArray=w.value,n.labelArray=v.value,L()},z=()=>{console.log("密码恢复, 合并方式恢复 验证密码"),a.verifyPasswordRef.getAndVerify(d=>n.passwordManager.verifyPassword(d)).then(()=>{B()})},B=()=>{console.log("密码恢复, 合并方式恢复"),(n.allPasswordArray.length||n.labelArray.length)&&(console.log("密码恢复, 恢复前先备份当前数据"),k(!0),le.success("已为您自动备份现有密码")),Ct(n.allPasswordArray,w.value),St(n.labelArray,v.value),L()},L=async()=>{console.log("密码恢复, 同步密码与标签文件");let d=await n.passwordManager.syncStoreData().catch(o=>o);console.log("密码恢复, 同步密码与标签文件 结果：",d),d.status?(le.success("密码恢复成功"),p.value=!1):ie.error({title:"系统异常",message:d.message})};return f({backup:k,recovery:y}),(d,o)=>{const u=ne,g=_e,P=Ae,m=Se,T=ve;return c(),$(W,null,[s("input",{ref_key:"fileInput",ref:i,accept:"application/json",style:{display:"none"},type:"file",onChange:o[0]||(o[0]=N=>_())},null,544),e(T,{modelValue:t(p),"onUpdate:modelValue":o[1]||(o[1]=N=>se(p)?p.value=N:null),fullscreen:["xs","sm"].includes(t(G)().value),draggable:"",width:"600px"},{header:l(()=>[e(u,{size:"large",style:{"user-select":"none"}},{default:l(()=>[...o[2]||(o[2]=[s("span",{class:"iconfont icon-recovery"},null,-1),r(" 恢复密码 ",-1),s("span",{style:{"font-weight":"bold"}},"·",-1),r(" 请选择恢复方式 ",-1)])]),_:1})]),default:l(()=>[e(m,null,{default:l(()=>[e(P,{md:{span:12},sm:{span:24},class:"recovery-col"},{default:l(()=>[s("div",{class:"recovery-type recovery-merge",onClick:z},[s("div",ln,[e(g,{effect:"dark",type:"success"},{default:l(()=>[...o[3]||(o[3]=[r("推荐",-1)])]),_:1})]),o[6]||(o[6]=s("div",{class:"icon-div"},[s("span",{class:"iconfont icon-merge"})],-1)),e(u,{class:"recovery-text"},{default:l(()=>[...o[4]||(o[4]=[r(" 合并恢复 ",-1)])]),_:1}),s("div",on,[e(u,null,{default:l(()=>[...o[5]||(o[5]=[r("将现有密码与备份文件中的密码合并（修改过的密码会添加备注说明）",-1)])]),_:1})])])]),_:1}),e(P,{md:{span:12},sm:{span:24},class:"recovery-col"},{default:l(()=>[s("div",{class:"recovery-type recovery-cover",onClick:F},[o[9]||(o[9]=s("div",{class:"icon-div"},[s("span",{class:"iconfont icon-cover"})],-1)),e(u,{class:"recovery-text"},{default:l(()=>[...o[7]||(o[7]=[r(" 覆盖恢复 ",-1)])]),_:1}),s("div",nn,[e(u,null,{default:l(()=>[...o[8]||(o[8]=[r("使用备份文件覆盖密码列表，现有的密码和标签都将被删除",-1)])]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])],64)}}}),an=X(sn,[["__scopeId","data-v-9c120f14"]]),rn={key:1,style:{"text-align":"center"}},dn={style:{margin:"20px"}},un={style:{margin:"40px"}},pn=Y({__name:"RecycleBin",setup(H,{expose:f}){const n=Z(),a=ae(),p=U(!1),i=()=>{console.log("打开回收站"),p.value=!0},w=()=>{console.log("启用回收站功能"),a.setting.enableRecycleBin=!0,n.passwordManager.syncSetting().then(y=>{y&&y.status&&le.success("已开启密码回收站")})},v=y=>{console.log("彻底删除密码：",y.id),n.passwordManager.completelyDeletePassword(y.id).then(_=>{_.status&&le.success("删除成功")})},k=y=>{console.log("还原密码：",y.id),n.passwordManager.cancelDeletePassword(y.id)};return f({openRecycleBin:i}),(y,_)=>{const A=ne,F=Ge,D=fe,z=He,B=de,L=ve;return c(),E(L,{modelValue:t(p),"onUpdate:modelValue":_[0]||(_[0]=d=>se(p)?p.value=d:null),fullscreen:["xs"].includes(t(G)().value),class:"recycle-bin",draggable:"",width:"600px"},{header:l(()=>[e(A,{size:"large",style:{"user-select":"none"}},{default:l(()=>[..._[1]||(_[1]=[s("span",{class:"iconfont icon-recycle-bin"},null,-1),r(" 回收站 ",-1)])]),_:1})]),default:l(()=>[t(a).setting.enableRecycleBin?(c(),E(z,{key:0,data:t(n).deletedArray,"header-cell-style":{padding:0},height:"380px"},{empty:l(()=>[e(A,{type:"info"},{default:l(()=>[..._[2]||(_[2]=[r("这里空空如也",-1)])]),_:1})]),default:l(()=>[e(F,{prop:"title"}),e(F,{width:"150px"},{default:l(d=>[e(D,{underline:!1,type:"primary",onClick:o=>k(d.row)},{default:l(()=>[..._[3]||(_[3]=[r("还原",-1)])]),_:1},8,["onClick"]),e(D,{underline:!1,style:{"margin-left":"15px"},type:"danger",onClick:o=>v(d.row)},{default:l(()=>[..._[4]||(_[4]=[r(" 彻底删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])):(c(),$("div",rn,[_[7]||(_[7]=s("div",{style:{"margin-top":"20px"}},[s("span",{class:"iconfont icon-recycle-bin not-enabled-recycle-bin-icon"})],-1)),s("div",dn,[e(A,{type:"info"},{default:l(()=>[..._[5]||(_[5]=[r("当前未开启密码回收站功能",-1)])]),_:1})]),s("div",un,[e(B,{plain:"",type:"primary",onClick:w},{default:l(()=>[..._[6]||(_[6]=[r("开启回收站",-1)])]),_:1})])]))]),_:1},8,["modelValue","fullscreen"])}}}),fn=X(pn,[["__scopeId","data-v-681a38ee"]]),cn={key:0,class:"empty-favorite"},mn={key:1},gn=Y({__name:"Favorite",setup(H){const f=Z(),n=oe(),a=U(0),p=v=>{console.log("取消收藏：",v.id),v.favorite=!1,a.value=0,f.filterCondition.favoriteId=0,f.passwordManager.updatePassword(v)},i=v=>{console.log("收藏夹过滤密码：",v,f.filterCondition.favoriteId),f.filterCondition.favoriteId===v?f.filterCondition.favoriteId=0:(f.filterCondition.favoriteId=v,console.log("收藏夹密码过滤，清除标签密码过滤：",f.filterCondition.favoriteId),n.labelTreeRef?n.labelTreeRef.setCheckedNodes([]):f.filterCondition.labelArray=[])},w=v=>f.filterCondition.favoriteId===v.id?"dark":a.value===v.id?"light":"plain";return(v,k)=>{const y=_e,_=Xe,A=We,F=Je,D=Ie;return c(),E(D,{height:"calc(50vh - 106px)"},{default:l(()=>[t(f).favoritePasswordArray.length?V("",!0):(c(),$("div",cn," 暂无收藏 ")),t(f).favoritePasswordArray.length?(c(),$("div",mn,[(c(!0),$(W,null,pe(t(f).favoritePasswordArray,z=>(c(),E(F,{trigger:"contextmenu"},{dropdown:l(()=>[e(A,null,{default:l(()=>[e(_,{onClick:B=>p(z)},{default:l(()=>[...k[1]||(k[1]=[s("span",{class:"iconfont icon-edit cancel-favorite"},null,-1),r(" 取消收藏 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:l(()=>[e(y,{effect:w(z),class:"favorite-tag",size:"large",type:"warning",onClick:B=>i(z.id),onMouseenter:B=>a.value=z.id,onMouseleave:k[0]||(k[0]=B=>a.value=0)},{default:l(()=>[r(O(z.title),1)]),_:2},1032,["effect","onClick","onMouseenter"])]),_:2},1024))),256))])):V("",!0)]),_:1})}}}),gt=X(gn,[["__scopeId","data-v-6e060ee0"]]),yn={key:0,style:{"font-size":"12px",color:"#999","margin-bottom":"20px"}},vn=Y({__name:"FavoriteDrawer",setup(H,{expose:f}){const n=Z(),a=U(!1);return f({showFavoriteDrawer:()=>{a.value=!0}}),J(()=>n.filterCondition.favoriteId,()=>{a.value=!1}),(i,w)=>{const v=gt,k=qe;return c(),$("div",null,[e(k,{modelValue:t(a),"onUpdate:modelValue":w[0]||(w[0]=y=>se(a)?a.value=y:null),direction:["xs","sm"].includes(t(G)().value)?"btt":"rtl",size:["xs","sm"].includes(t(G)().value)?"60%":"350px",title:"收藏"},{default:l(()=>[t(n).favoritePasswordArray.length?(c(),$("div",yn,[...w[1]||(w[1]=[s("span",{class:"iconfont icon-info",style:{"font-size":"100%"}},null,-1),r(" 点击收藏内容即可查看密码 ",-1)])])):V("",!0),e(v)]),_:1},8,["modelValue","direction","size"])])}}}),_n=X(vn,[["__scopeId","data-v-e746cfbb"]]),bn=["onClick","onContextmenu"],wn={key:1,style:{width:"100%"}},xn=Y({__name:"LabelTree",setup(H,{expose:f}){const n=Z(),a=oe(),p=U({}),i={},w=U(0),v=()=>n.labelArray.map(d=>d.id),k=d=>d.data.id!==w.value,y=(d,o)=>{console.log("标签，添加标签");let u=0;d&&(u=o==="peer"?d.data.pid:d.data.id);let g={id:Date.now(),pid:u,name:"新标签",children:[]};w.value=g.id,d?o==="peer"?a.labelTreeRef.insertAfter(g,d.data.id):a.labelTreeRef.append(g,d.data.id):a.labelTreeRef.append(g),a.labelTreeRef.setCurrentKey(g.id,!0),setTimeout(function(){console.log("标签，设置输入焦点"),i[g.id]?.focus()},150)},_=d=>{console.log("标签，编辑标签: ",d.data),w.value=d.data.id,setTimeout(function(){i[d.data.id]?.focus()},150)},A=d=>{console.log("标签，删除标签: ",d.data),ke.confirm("确认删除“"+d.data.name+"”吗？","删除标签",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{F(d)}).catch(()=>{})},F=d=>{console.log("标签，确认删除标签: ",d.data);const o=(P,m)=>{m.push(P.id);for(let T=0;T<P.children.length;T++)o(P.children[T],m)};let u=[];o(d.data,u);let g=!1;for(let P=0;P<n.allPasswordArray.length;P++){let m=n.allPasswordArray[P];for(let T=0;T<m.labels.length;T++)u.includes(m.labels[T])&&(m.labels.splice(T--,1),g=!0)}a.labelTreeRef.remove(d.data.id);for(let P=0;P<n.filterCondition.labelArray.length;P++)u.includes(n.filterCondition.labelArray[P])&&n.filterCondition.labelArray.splice(P,1);for(let P=0;P<u.length;P++)delete i[u[P]];n.passwordManager.syncStoreData(),g&&n.passwordManager.syncStoreData()},D=d=>{console.log("标签，保存标签:",d),d.name.trim()&&w.value!==0&&(w.value=0,n.passwordManager.syncStoreData())},z=d=>{w.value===0&&a.labelTreeRef.setChecked(d,!d.checked)},B=()=>{let d=a.labelTreeRef.getCheckedKeys();console.log("标签密码过滤：",d),d.length>0&&(console.log("标签密码过滤，清除收藏密码过滤：",n.filterCondition.favoriteId),n.filterCondition.favoriteId=0),n.filterCondition.labelArray=d},L=(d,o)=>{console.log("标签 右键菜单"),d.stopPropagation(),a.contextmenuRef.hideContextmenu();for(let u in p.value)p.value[u]&&p.value[u].handleClose()};return f({addLabel:y}),(d,o)=>{const u=de,g=ye,P=Xe,m=We,T=Je,N=Kt,b=Ie;return c(),E(b,{height:"calc(50vh - 106px)"},{default:l(()=>[e(N,{ref:x=>t(a).labelTreeRef=x,"allow-drag":k,"check-strictly":!0,data:t(n).labelArray,"default-expanded-keys":v(),"expand-on-click-node":!1,draggable:"","node-key":"id","show-checkbox":"",style:{"background-color":"rgba(0,0,0,0)"},onCheckChange:B,onNodeDrop:o[1]||(o[1]=x=>t(n).passwordManager.syncStoreData())},{empty:l(()=>[t(n).serviceStatus===t(K).UNLOCKED?(c(),E(u,{key:0,plain:"",size:"small",type:"primary",onClick:o[0]||(o[0]=x=>y(null,"sub"))},{default:l(()=>[...o[2]||(o[2]=[r(" 创建密码标签 ",-1)])]),_:1})):V("",!0)]),default:l(({node:x,data:C})=>[e(T,{ref:S=>t(p)[C.id]=S,disabled:t(w)!==0,"hide-timeout":0,style:{width:"100%"},trigger:"contextmenu"},{dropdown:l(()=>[e(m,null,{default:l(()=>[e(P,{onClick:S=>y(x,"peer")},{default:l(()=>[...o[3]||(o[3]=[s("span",{class:"iconfont icon-peer-directory more-item",style:{color:"rgb(22 220 109)"}},null,-1),r(" 添加同级标签 ",-1)])]),_:1},8,["onClick"]),e(P,{onClick:S=>y(x,"sub")},{default:l(()=>[...o[4]||(o[4]=[s("span",{class:"iconfont icon-sub-directory more-item",style:{color:"rgb(0 147 255)"}},null,-1),r(" 添加子级标签 ",-1)])]),_:1},8,["onClick"]),e(P,{divided:"",onClick:S=>_(x)},{default:l(()=>[...o[5]||(o[5]=[s("span",{class:"iconfont icon-edit more-item",style:{color:"#FF9700","font-size":"130%"}},null,-1),r(" 修改标签 ",-1)])]),_:1},8,["onClick"]),e(P,{onClick:S=>A(x)},{default:l(()=>[...o[6]||(o[6]=[s("span",{class:"iconfont icon-delete more-item",style:{color:"rgb(255,23,23)","font-size":"130%"}},null,-1),r(" 删除标签 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:l(()=>[C.id!==t(w)?(c(),$("div",{key:0,class:"label-content",onClick:S=>z(x),onContextmenu:S=>L(S,C.id)},O(C.name),41,bn)):V("",!0),C.id===t(w)?(c(),$("div",wn,[e(g,{ref:S=>i[x.data.id]=S,modelValue:C.name,"onUpdate:modelValue":S=>C.name=S,size:"small",onBlur:S=>D(C),onKeyup:Me(S=>D(C),["enter"])},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])])):V("",!0)]),_:2},1032,["disabled"])]),_:1},8,["data","default-expanded-keys"])]),_:1})}}}),yt=X(xn,[["__scopeId","data-v-7bfb6101"]]),kn=Y({__name:"LabelDrawer",setup(H,{expose:f}){const n=U(!1);return f({showLabelDrawer:()=>{n.value=!0}}),(p,i)=>{const w=yt,v=qe;return c(),$("div",null,[e(v,{modelValue:t(n),"onUpdate:modelValue":i[0]||(i[0]=k=>se(n)?n.value=k:null),direction:["xs","sm"].includes(t(G)().value)?"btt":"rtl",size:["xs","sm"].includes(t(G)().value)?"80%":"350px",title:"标签"},{default:l(()=>[i[1]||(i[1]=s("div",{style:{"font-size":"12px",color:"#999","margin-bottom":"20px"}},[s("span",{class:"iconfont icon-info",style:{"font-size":"100%"}}),r(" 选中标签可以对密码列表进行过滤 ")],-1)),e(w)]),_:1},8,["modelValue","direction","size"])])}}}),Cn=X(kn,[["__scopeId","data-v-df4b86cb"]]),Sn={class:"generate-input-div"},An={class:"generate-use-type-div"},$n={class:"generate-length-div"},Fn=["onClick"],Pn={class:"iconfont icon-check-mark",style:{"font-size":"14px"}},Vn={style:{display:"flex","justify-content":"end"}},Rn=Y({__name:"PasswordForm",setup(H,{expose:f}){const n=oe(),a=Z(),p=ae(),i=U(!1),w=U(""),v=U(!1),k=()=>({id:0,title:"",address:"",username:"",password:"",remark:"",addTime:0,updateTime:0,deleteTime:0,favoriteTime:0,favorite:!1,customFields:[],labels:[],status:At.NORMAL,bgColor:""}),y=U(k()),_=U(JSON.parse(JSON.stringify(p.setting.generateRule))),A=Te({title:[{required:!0,message:"请输入名称",trigger:"blur"}]}),F=b=>{console.log("显示添加密码表单 title：",b),w.value="add",y.value=k(),_.value=JSON.parse(JSON.stringify(p.setting.generateRule)),i.value=!0,n.passwordFormFormRef?.clearValidate(),p.setting.autoGeneratePassword&&(console.log("显示添加密码表单 settingStore"),u()),b&&Rt(()=>{y.value.title=b}),setTimeout(()=>{console.log("显示添加密码表单 设置焦点"),n.passwordFormTitleRef?.focus()},300)},D=b=>{console.log("设置密码表单：",b),d!==null&&clearInterval(d),o!==null&&clearTimeout(o),b.name&&(y.value.title=b.name),b.address&&(y.value.address=b.address),b.username&&(y.value.username=b.username),b.password&&(y.value.password=b.password),b.remark&&(y.value.remark=b.remark),console.log("设置密码表单2：",y.value)},z=b=>{console.log("显示修改密码表单：",b.id),w.value="edit",_.value=JSON.parse(JSON.stringify(p.setting.generateRule)),y.value=JSON.parse(JSON.stringify(b)),i.value=!0,n.passwordFormFormRef?.clearValidate()},B=()=>{console.log("关闭密码表单"),i.value=!1},L=(b,x)=>{if(console.log("用户名自动预测 queryString:",b),!b){x([]);return}let C=a.passwordArray.filter(S=>S.username.startsWith(b)).map(S=>({value:S.username})).filter((S,j,h)=>j===h.findIndex(I=>I.value===S.value));x([...new Set(C)])};let d=null,o=null;const u=()=>{console.log("随机生成密码"),v.value=!1,d!==null&&clearInterval(d),o=setTimeout(()=>{v.value=!0,y.value.password="";const b=$t(_.value);if(!b)return;let x=0;d=setInterval(()=>{y.value.password+=b[x++],x>=b.length&&(clearInterval(d),d=null)},500/_.value.length/4)},1)},g=()=>a.labelArray.map(b=>b.id),P=()=>{y.value.customFields instanceof Array||(y.value.customFields=[]),y.value.customFields.push({key:"",val:""})},m=async b=>{console.log("保存密码"),await b.validate(x=>{x&&(console.log("保存密码 校验通过"),w.value==="add"?(console.log("新增密码保存"),a.passwordManager.addPassword(JSON.parse(JSON.stringify(y.value))).then(C=>{C.status?(le.success("保存成功"),i.value=!1):ie.error({title:"系统异常",message:C.message})})):(console.log("修改密码保存"),y.value.updateTime=Date.now(),a.passwordManager.updatePassword(JSON.parse(JSON.stringify(y.value))).then(C=>{C.status?(le.success("修改成功"),i.value=!1):ie.error({title:"系统异常",message:C.message})})))})};f({addPasswordForm:F,editPasswordForm:z,setPasswordForm:D,closePasswordForm:B});const T=b=>{p.setting.enableShortcutKey&&b.ctrlKey&&b.key.toUpperCase()==="S"&&(console.log("使用快捷键 Ctrl + S"),b.preventDefault(),m(n.passwordFormFormRef))},N=b=>{y.value.customFields.splice(b,1)};return Ce(()=>{document.addEventListener("keydown",T)}),at(()=>{document.removeEventListener("keydown",T)}),(b,x)=>{const C=ne,S=ye,j=je,h=ct,I=de,Fe=we,re=pt,ce=Ae,Ue=Se,Be=ft,Pe=be,ze=Ht,Ne=Le,Oe=qe;return c(),E(Oe,{modelValue:t(i),"onUpdate:modelValue":x[15]||(x[15]=M=>se(i)?i.value=M:null),direction:["xs","sm"].includes(t(G)().value)?"btt":"rtl","show-close":!1,size:["xs","sm"].includes(t(G)().value)?"80%":"540px"},{header:l(()=>[e(C,{style:{"font-size":"16px"}},{default:l(()=>[r(O(t(w)==="add"?"添加密码":"修改密码"),1)]),_:1})]),default:l(()=>[e(Ne,{ref:M=>t(n).passwordFormFormRef=M,model:t(y),rules:t(A),"label-width":"60px"},{default:l(()=>[e(j,{label:"名称",prop:"title"},{default:l(()=>[e(S,{ref:M=>t(n).passwordFormTitleRef=M,modelValue:t(y).title,"onUpdate:modelValue":x[0]||(x[0]=M=>t(y).title=M),autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),_:1}),e(j,{label:"地址",prop:"address"},{default:l(()=>[e(S,{modelValue:t(y).address,"onUpdate:modelValue":x[1]||(x[1]=M=>t(y).address=M),autocomplete:"new-password",clearable:"",placeholder:"https://"},null,8,["modelValue"])]),_:1}),e(j,{label:"用户名",prop:"username"},{default:l(()=>[e(h,{modelValue:t(y).username,"onUpdate:modelValue":x[2]||(x[2]=M=>t(y).username=M),"fetch-suggestions":L,autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),_:1}),e(j,{label:"密码"},{default:l(()=>[e(Pe,{class:"generate-card"},{default:l(()=>[s("div",Sn,[e(S,{modelValue:t(y).password,"onUpdate:modelValue":x[4]||(x[4]=M=>t(y).password=M),autocomplete:"new-password",class:"generate-input",clearable:"",placeholder:"输入密码或随机生成"},{append:l(()=>[e(Fe,{content:"随机生成",placement:"top"},{default:l(()=>[e(I,{ref:M=>t(n).passwordFormGenerateBtnRef=M,class:"refresh-password",tabindex:"-1",onClick:u},{default:l(()=>[s("i",{class:it([{"random-dice":t(v)},"iconfont icon-dice"]),onAnimationend:x[3]||(x[3]=M=>v.value=!1)},null,34)]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(I,{plain:"",tabindex:"-1",type:"success",onClick:x[5]||(x[5]=M=>t(q)(t(y).password))},{default:l(()=>[...x[16]||(x[16]=[r("复制",-1)])]),_:1})]),s("div",An,[e(Ue,null,{default:l(()=>[e(ce,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:l(()=>[e(re,{modelValue:t(_).uppercase,"onUpdate:modelValue":x[6]||(x[6]=M=>t(_).uppercase=M),disabled:!t(_).lowercase&&!t(_).number&&!t(_).symbol,border:"",class:"generate-type-checkbox",label:"大写",size:"small",tabindex:"-1",onChange:u},null,8,["modelValue","disabled"])]),_:1}),e(ce,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:l(()=>[e(re,{modelValue:t(_).lowercase,"onUpdate:modelValue":x[7]||(x[7]=M=>t(_).lowercase=M),disabled:!t(_).uppercase&&!t(_).number&&!t(_).symbol,border:"",class:"generate-type-checkbox",label:"小写",size:"small",tabindex:"-1",onChange:u},null,8,["modelValue","disabled"])]),_:1}),e(ce,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:l(()=>[e(re,{modelValue:t(_).number,"onUpdate:modelValue":x[8]||(x[8]=M=>t(_).number=M),disabled:!t(_).uppercase&&!t(_).lowercase&&!t(_).symbol,border:"",class:"generate-type-checkbox",label:"数字",size:"small",tabindex:"-1",onChange:u},null,8,["modelValue","disabled"])]),_:1}),e(ce,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:l(()=>[e(re,{modelValue:t(_).symbol,"onUpdate:modelValue":x[9]||(x[9]=M=>t(_).symbol=M),disabled:!t(_).uppercase&&!t(_).lowercase&&!t(_).number,border:"",class:"generate-type-checkbox",label:"符号",size:"small",tabindex:"-1",onChange:u},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),s("div",$n,[e(Be,{ref:M=>t(n).passwordFormGenerateRuleRef=M,modelValue:t(_).length,"onUpdate:modelValue":x[10]||(x[10]=M=>t(_).length=M),max:32,min:4,"show-input-controls":!1,"show-input":"",size:"small",tabindex:"-1",onChange:u},null,8,["modelValue"])])]),_:1})]),_:1}),e(j,{label:"标签"},{default:l(()=>[e(ze,{modelValue:t(y).labels,"onUpdate:modelValue":x[11]||(x[11]=M=>t(y).labels=M),"check-strictly":!0,data:t(a).labelArray,"default-expanded-keys":g(),props:{label:"name"},multiple:"","node-key":"id","show-checkbox":""},null,8,["modelValue","data","default-expanded-keys"])]),_:1}),e(j,{label:"备注"},{default:l(()=>[e(S,{modelValue:t(y).remark,"onUpdate:modelValue":x[12]||(x[12]=M=>t(y).remark=M),rows:2,autocomplete:"new-password",placeholder:"备注...",type:"textarea"},null,8,["modelValue"])]),_:1}),t(p).setting.passwordColor?(c(),E(j,{key:0},{default:l(()=>[(c(!0),$(W,null,pe(t(p).setting.bgColors,M=>(c(),$("div",{style:te({"background-color":t(De)(M,t(y).bgColor===M?"0.5":"0.3"),transform:t(y).bgColor===M?"scale(1.5)":"scale(1)"}),class:"bg-color-item",onClick:xe=>t(y).bgColor===M?t(y).bgColor="":t(y).bgColor=M},[Et(s("span",Pn,null,512),[[Dt,t(y).bgColor===M]])],12,Fn))),256))]),_:1})):V("",!0),e(j,{label:"自定义"},{default:l(()=>[t(y).customFields&&t(y).customFields.length>0?(c(),E(Pe,{key:0,style:{width:"100%"}},{default:l(()=>[(c(!0),$(W,null,pe(t(y).customFields,(M,xe)=>(c(),$("div",{style:te([{"margin-bottom":xe!==t(y).customFields.length-1?"15px":"0"},{display:"flex"}])},[e(S,{modelValue:M.key,"onUpdate:modelValue":R=>M.key=R,placeholder:"名称",style:{"margin-right":"10px",flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),e(S,{modelValue:M.val,"onUpdate:modelValue":R=>M.val=R,placeholder:"内容",style:{"margin-right":"10px",flex:"2"}},null,8,["modelValue","onUpdate:modelValue"]),e(I,{plain:"",title:"删除",type:"danger",onClick:R=>N(xe)},{default:l(()=>[...x[17]||(x[17]=[s("span",{class:"iconfont icon-clean"},null,-1)])]),_:1},8,["onClick"])],4))),256))]),_:1})):V("",!0),e(I,{plain:"",style:{"margin-top":"10px"},type:"primary",onClick:x[13]||(x[13]=M=>P())},{default:l(()=>[...x[18]||(x[18]=[r("添加自定义信息",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"]),s("div",Vn,[e(I,{ref:M=>t(n).passwordFormSaveBtnRef=M,type:"primary",onClick:x[14]||(x[14]=M=>m(t(n).passwordFormFormRef))},{default:l(()=>[...x[19]||(x[19]=[r("保存 ",-1)])]),_:1},512)])]),_:1},8,["modelValue","direction","size"])}}}),En=X(Rn,[["__scopeId","data-v-d853bf10"]]),Dn=Y({__name:"CancelAccount",setup(H,{expose:f}){const n=oe(),a=Z(),p=U(!1),i=()=>{console.log("准备注销账户"),p.value=!0},w=()=>{console.log("准备注销账户 验证密码"),n.verifyPasswordRef.getAndVerify(v=>a.passwordManager.verifyPassword(v)).then(()=>{console.log("准备注销账户 发起注销"),a.passwordManager.closeAccount().then(v=>{console.log("准备注销账户 结果：",v.status),v.status?(ie.success({title:"账户注销成功",message:"欢迎再次使用！"}),console.log("准备注销账户 退出登录"),a.logout()):ie.error({title:"账户注销失败",message:v.message})})})};return f({showCloseAccount:i}),(v,k)=>{const y=ne,_=$e,A=de,F=ve;return c(),E(F,{modelValue:t(p),"onUpdate:modelValue":k[1]||(k[1]=D=>se(p)?p.value=D:null),width:["xs"].includes(t(G)().value)?"95%":"400px"},{header:l(()=>[e(y,{size:"large",style:{"user-select":"none"}},{default:l(()=>[...k[2]||(k[2]=[s("span",{class:"iconfont icon-risk"},null,-1),r(" 注销账户 ",-1)])]),_:1})]),footer:l(()=>[e(A,{plain:"",type:"primary",onClick:k[0]||(k[0]=D=>p.value=!1)},{default:l(()=>[...k[4]||(k[4]=[r("我点错了",-1)])]),_:1}),e(A,{type:"danger",onClick:w},{default:l(()=>[...k[5]||(k[5]=[r("确认注销",-1)])]),_:1})]),default:l(()=>[e(_,{closable:!1,type:"error"},{default:l(()=>[...k[3]||(k[3]=[r("注销账户将永久删除所有密码和标签且不可恢复，确认注销账户吗？",-1)])]),_:1})]),_:1},8,["modelValue","width"])}}}),Tn=X(Dn,[["__scopeId","data-v-c6356025"]]),Mn={style:{display:"flex","justify-content":"space-between"}},Ln=Y({__name:"FavoriteCard",setup(H){const f=Z(),n=ae();return(a,p)=>{const i=ne,w=mt,v=we,k=gt,y=be;return t(n).setting.showFavoriteCard?(c(),E(y,{key:0,style:te({"background-color":t(f).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"}),class:"favorite-card"},{header:l(()=>[s("div",Mn,[s("div",null,[p[2]||(p[2]=s("span",{class:"iconfont icon-collect",style:{color:"#FF9700","margin-right":"8px","font-size":"110%"}},null,-1)),e(i,{size:"large"},{default:l(()=>[...p[1]||(p[1]=[r("收藏",-1)])]),_:1})]),s("div",null,[t(f).filterCondition.favoriteId!==0?(c(),E(v,{key:0,content:"收藏过滤生效中，点击取消",placement:"left"},{default:l(()=>[e(w,{class:"item","is-dot":""},{default:l(()=>[s("span",{class:"iconfont icon-filtration filter-icon",onClick:p[0]||(p[0]=_=>t(f).filterCondition.favoriteId=0)})]),_:1})]),_:1})):V("",!0)])])]),default:l(()=>[e(k)]),_:1},8,["style"])):V("",!0)}}}),In=X(Ln,[["__scopeId","data-v-27e83281"]]),Un={style:{display:"flex","justify-content":"space-between"}},Bn=Y({__name:"LabelCard",setup(H){const f=Z(),n=oe(),a=ae();return(p,i)=>{const w=ne,v=mt,k=we,y=yt,_=be;return t(a).setting.showLabelCard?(c(),E(_,{key:0,style:te({"background-color":t(f).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"}),class:"label-card",header:"标签"},{header:l(()=>[s("div",Un,[s("div",null,[i[2]||(i[2]=s("span",{class:"iconfont icon-label",style:{color:"#409EFF","margin-right":"8px","font-size":"110%"}},null,-1)),e(w,{size:"large"},{default:l(()=>[...i[1]||(i[1]=[r("标签",-1)])]),_:1})]),s("div",null,[t(f).filterCondition.labelArray.length?(c(),E(k,{key:0,content:"标签过滤生效中，点击取消",placement:"left"},{default:l(()=>[e(v,{class:"item","is-dot":""},{default:l(()=>[s("span",{class:"iconfont icon-filtration filter-icon",onClick:i[0]||(i[0]=A=>t(n).labelTreeRef.setCheckedNodes([]))})]),_:1})]),_:1})):V("",!0)])])]),default:l(()=>[e(y,{ref:A=>t(n).labelTreeDivRef=A},null,512)]),_:1},8,["style"])):V("",!0)}}}),zn=X(Bn,[["__scopeId","data-v-565bc2b0"]]),Nn=""+new URL("empty-CTwObXQe.svg",import.meta.url).href,On={class:"empty-list-div"},Kn={key:0},Hn={key:1},Gn=Y({__name:"EmptyList",setup(H){const f=Z(),n=oe();return(a,p)=>{const i=de;return c(),$("div",On,[t(f).serviceStatus===t(K).LOGGED?(c(),$("div",Kn,[p[3]||(p[3]=s("span",{class:"iconfont icon-lock-close"},null,-1)),p[4]||(p[4]=s("div",{class:"status-tip"},"已锁定",-1)),e(i,{plain:"",style:{"margin-top":"30px"},type:"primary",onClick:p[0]||(p[0]=w=>t(n).verifyPasswordRef.verifyAndUnlock())},{default:l(()=>[...p[2]||(p[2]=[r(" 解锁 ",-1)])]),_:1})])):V("",!0),t(f).serviceStatus===t(K).UNLOCKED?(c(),$("div",Hn,[p[6]||(p[6]=s("img",{alt:"",src:Nn},null,-1)),p[7]||(p[7]=s("div",{class:"status-tip"},"这里一个密码都没有",-1)),t(f).passwordArray.length===0?(c(),E(i,{key:0,plain:"",style:{"margin-top":"30px"},type:"primary",onClick:p[1]||(p[1]=w=>t(n).passwordFormRef.addPasswordForm())},{default:l(()=>[...p[5]||(p[5]=[r(" 添加我的第一个密码 ",-1)])]),_:1})):V("",!0)])):V("",!0)])}}}),vt=X(Gn,[["__scopeId","data-v-46971f0f"]]),Yn=["onClick"],jn={class:"password-field-ul",style:{height:"100%"}},Jn={key:0,class:"empty-card"},Wn={key:1},Xn={key:2},qn={class:"card-username-div"},Qn=["onClick"],Zn={key:3},hn={key:0,class:"card-password-span"},es={key:1,style:{position:"relative",top:"3px"}},ts=["onClick"],ls=["onClick"],os={key:4},ns={key:5},ss={key:0},as={style:{display:"flex","justify-content":"space-between"}},rs=Y({__name:"PasswordCards",setup(H){const f=Z(),n=oe(),a=ae(),p=U(0),i=U(),w=d=>{console.log("收藏密码：",d.id),d.favorite=!d.favorite,d.favoriteTime=Date.now(),f.passwordManager.updatePassword(d)},v=d=>{console.log("card 查看密码：",d.id),d.password.length>40?(console.log("card 查看密码 长度大于40"),n.showPasswordRef.showPassword(d),p.value=0):p.value=d.id},k=d=>{console.log("card 删除密码：",d.id),ke.confirm("确认删除“"+d.title+"”吗？","删除密码",{confirmButtonClass:"confirm-delete-btn",confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("card 确认删除：",d.id),f.passwordManager.deletePassword(d.id).then(o=>{o.status||(console.log("card 删除密码异常：",o.message),ie.error({title:"系统异常",message:o.message}))})}).catch(()=>{})},y=()=>["xs"].includes(G().value)?1:["sm","md"].includes(G().value)?2:["lg"].includes(G().value)?3:4,_=d=>{let o=f.isDark?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.1)";return a.setting.passwordColor?{"background-color":De(d.bgColor,"0.06"),"border-bottom":d.bgColor?"1px solid "+De(d.bgColor,"0.06"):"1px solid "+o}:{"background-color":"rgba(0,0,0,0)","border-bottom":"1px solid "+o}},A=()=>a.setting.dynamicBackground?{"background-color":f.isDark?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.1)"}:{"background-color":f.isDark?"rgba(0,0,0,1)":"rgba(255,255,255,1)"},F=U(1),D=U(y()*5),z=()=>f.visPasswordArray.slice(0,F.value*D.value),B=()=>{const d=i.value.wrapRef;d.scrollTop+d.clientHeight>=d.scrollHeight-200&&F.value*D.value<f.visPasswordArray.length&&F.value++},L=()=>{i.value.wrapRef.addEventListener("scroll",()=>{B()})};return Ce(()=>{B(),L()}),(d,o)=>{const u=we,g=ne,P=fe,m=_e,T=de,N=be,b=vt,x=Ie;return c(),E(x,{ref_key:"passwordCardScrollbar",ref:i,height:"calc(100vh - 85px)"},{default:l(()=>[t(f).visPasswordArray.length?(c(),$("div",{key:0,style:te([{"grid-template-columns":"repeat("+y()+", 1fr)"},{display:"grid",padding:"6px"}])},[(c(!0),$(W,null,pe(z(),C=>(c(),$("div",null,[e(N,{style:A,"body-style":"height: 100%;",class:"password-card"},{header:l(()=>[s("div",{style:te(_(C)),class:"password-header-div"},[s("div",null,[t(a).setting.showStrength&&C.password?(c(),E(u,{key:0,content:t(nt)(C.password),placement:"top"},{default:l(()=>[s("div",{style:te({"background-color":t(st)(C.password)}),class:"password-strength"},null,4)]),_:2},1032,["content"])):V("",!0),e(g,{style:{"font-size":"17px"}},{default:l(()=>[r(O(C.title),1)]),_:2},1024)]),s("div",null,[e(u,{content:C.favorite?"取消收藏":"收藏",placement:"top"},{default:l(()=>[s("span",{class:it([C.favorite?"icon-favorited":"icon-collect","iconfont icon-favorited card-opt-icon"]),style:te([{color:C.favorite?"#FF9700":"rgb(255 151 0 / 75%)"},{"font-size":"115%"}]),onClick:S=>w(C)},null,14,Yn)]),_:2},1032,["content"])])],4)]),footer:l(()=>[s("div",as,[e(g,{style:{"font-size":"80%"},type:"info"},{default:l(()=>[r(O(t(ge)(C.updateTime,"YYYY-MM-DD HH:mm")),1)]),_:2},1024),s("div",null,[e(u,{content:"删除",placement:"top"},{default:l(()=>[e(T,{plain:"",size:"small",type:"danger",onClick:S=>k(C)},{default:l(()=>[...o[13]||(o[13]=[s("span",{class:"iconfont icon-delete card-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(u,{content:"修改",placement:"top"},{default:l(()=>[e(T,{plain:"",size:"small",type:"primary",onClick:S=>t(n).passwordFormRef.editPasswordForm(C)},{default:l(()=>[...o[14]||(o[14]=[s("span",{class:"iconfont icon-edit card-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(u,{content:"分享",placement:"top"},{default:l(()=>[e(T,{plain:"",size:"small",type:"success",onClick:S=>t(ot)(C)},{default:l(()=>[...o[15]||(o[15]=[s("span",{class:"iconfont icon-share card-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),default:l(()=>[s("ul",jn,[!C.address&&!C.username&&!C.password&&!C.remark&&!C.labels.length&&!(C.customFields&&C.customFields.length>0)?(c(),$("li",Jn,[e(g,{style:{margin:"20px 0"}},{default:l(()=>[...o[1]||(o[1]=[r(" 空空如也！ ",-1)])]),_:1})])):V("",!0),C.address?(c(),$("li",Wn,[e(g,{class:"password-field-name"},{default:l(()=>[...o[2]||(o[2]=[r("地址:",-1)])]),_:1}),e(g,{class:"password-field-value"},{default:l(()=>[t(tt)(C.address)?(c(),E(P,{key:0,href:C.address,target:"_blank",type:"primary"},{default:l(()=>[r(O(C.address),1)]),_:2},1032,["href"])):(c(),E(g,{key:1},{default:l(()=>[r(O(C.address),1)]),_:2},1024))]),_:2},1024),o[3]||(o[3]=s("div",{class:"clear"},null,-1))])):V("",!0),C.username?(c(),$("li",Xn,[e(g,{class:"password-field-name"},{default:l(()=>[...o[4]||(o[4]=[r("用户名:",-1)])]),_:1}),e(g,{class:"password-field-value"},{default:l(()=>[s("div",qn,[r(O(C.username)+" ",1),e(u,{"hide-after":0,"show-after":300,content:"复制用户名",placement:"top"},{default:l(()=>[s("span",{class:"iconfont icon-copy password-row-icon copy-username",onClick:S=>t(q)(C.username)},null,8,Qn)]),_:2},1024)])]),_:2},1024),o[5]||(o[5]=s("div",{class:"clear"},null,-1))])):V("",!0),C.password?(c(),$("li",Zn,[e(g,{class:"password-field-name"},{default:l(()=>[...o[6]||(o[6]=[r("密码:",-1)])]),_:1}),e(g,{class:"password-field-value"},{default:l(()=>[t(p)===C.id?(c(),$("span",hn,O(C.password),1)):(c(),$("span",es,"**********")),t(p)===C.id?(c(),$("span",{key:2,class:"iconfont icon-hide password-card-icon",onClick:o[0]||(o[0]=S=>p.value=0)})):(c(),$("span",{key:3,class:"iconfont icon-show password-card-icon",onClick:S=>v(C)},null,8,ts)),s("span",{class:"iconfont icon-copy password-card-icon",style:{},onClick:S=>t(q)(C.password)},null,8,ls)]),_:2},1024),o[7]||(o[7]=s("div",{class:"clear"},null,-1))])):V("",!0),C.remark?(c(),$("li",os,[e(g,{class:"password-field-name"},{default:l(()=>[...o[8]||(o[8]=[r("备注:",-1)])]),_:1}),e(g,{class:"password-field-value"},{default:l(()=>[r(O(C.remark),1)]),_:2},1024),o[9]||(o[9]=s("div",{class:"clear"},null,-1))])):V("",!0),C.labels.length?(c(),$("li",ns,[e(g,{class:"password-field-name"},{default:l(()=>[...o[10]||(o[10]=[r("标签:",-1)])]),_:1}),e(g,{class:"password-field-value"},{default:l(()=>[(c(!0),$(W,null,pe(t(lt)(C),S=>(c(),E(m,{class:"card-label"},{default:l(()=>[r(O(S.name),1)]),_:2},1024))),256))]),_:2},1024),o[11]||(o[11]=s("div",{class:"clear"},null,-1))])):V("",!0),(c(!0),$(W,null,pe(C.customFields,S=>(c(),$(W,null,[S.key||S.val?(c(),$("li",ss,[e(g,{class:"password-field-name"},{default:l(()=>[r(O(S.key)+":",1)]),_:2},1024),e(g,{class:"password-field-value"},{default:l(()=>[r(O(S.val),1)]),_:2},1024),o[12]||(o[12]=s("div",{class:"clear"},null,-1))])):V("",!0)],64))),256))])]),_:2},1024)]))),256))],4)):(c(),E(b,{key:1}))]),_:1},512)}}}),is=X(rs,[["__scopeId","data-v-b3387e13"]]),ds={key:0,class:"password-card-table"},us={key:0,class:"username-div"},ps={class:"username-text"},fs=["onClick"],cs={key:0,class:"table-password-div"},ms={style:{width:"150px"}},gs={key:0,class:"table-password-span"},ys={key:1,class:"table-password-symbol"},vs=["onClick"],_s=["onClick"],bs={style:{display:"flex","justify-content":"space-evenly"}},ws=Y({__name:"PasswordTable",setup(H){const f=Z(),n=oe(),a=ae(),p=U(0),i=U(),w=L=>{console.log("table 查看密码：",L.id),L.password.length>40?(console.log("table 查看密码 长度大于40"),n.showPasswordRef.showPassword(L),p.value=0):p.value=L.id},v=L=>{console.log("table 删除密码：",L.id),ke.confirm("确认删除“"+L.title+"”吗？","删除密码",{confirmButtonClass:"confirm-delete-btn",confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("table 确认删除：",L.id),f.passwordManager.deletePassword(L.id).then(d=>{d.status||(console.log("table 删除密码异常：",d.message),ie.error({title:"系统异常",message:d.message}))})}).catch(()=>{})},k=L=>{L.favorite?(console.log("取消收藏密码"),L.favorite=!1):(console.log("收藏密码"),L.favorite=!0),L.favoriteTime=Date.now(),f.passwordManager.updatePassword(L)},y=(L,d)=>{let o=Ze(L.password),u=Ze(d.password);return o>u?a.setting.sortOrder===Ee.ASC?1:-1:o<u?a.setting.sortOrder===Ee.ASC?-1:1:0},_=L=>a.setting.passwordColor&&L.row.bgColor?{"background-color":De(L.row.bgColor,"0.1")}:{"background-color":"rgba(0,0,0,0)"},A=U(1),F=U(Math.ceil(innerHeight/62)+5),D=()=>f.visPasswordArray.slice(0,A.value*F.value),z=()=>{const L=i.value?.$el.querySelector(".el-scrollbar__wrap");L.scrollTop+L.clientHeight>=L.scrollHeight-200&&A.value*F.value<f.visPasswordArray.length&&A.value++},B=()=>{i.value.$el.querySelector(".el-scrollbar__wrap").addEventListener("scroll",()=>{z()})};return Ce(()=>{z(),B()}),(L,d)=>{const o=we,u=Ge,g=fe,P=ne,m=_e,T=He,N=vt;return t(f).visPasswordArray.length?(c(),$("div",ds,[e(T,{ref_key:"passwordTableRef",ref:i,"cell-style":{"background-color":"rgba(0,0,0,0)"},data:D(),"header-cell-style":{"background-color":"rgba(0,0,0,0)"},"header-row-style":{"background-color":"rgba(0,0,0,0)"},"row-style":_,height:"calc(100vh - 120px)",style:{"background-color":"rgba(0,0,0,0)"}},{default:l(()=>[t(a).setting.showStrength?(c(),E(u,{key:0,"sort-method":y,prop:"strength",sortable:"",width:"30px"},{default:l(b=>[e(o,{content:t(nt)(b.row.password),placement:"top"},{default:l(()=>[s("div",{style:te({"background-color":t(st)(b.row.password)}),class:"password-strength"},null,4)]),_:2},1032,["content"])]),_:1})):V("",!0),e(u,{label:"名称","min-width":"130px",prop:"title",sortable:""}),e(u,{label:"地址","min-width":"200px",prop:"address"},{default:l(b=>[s("div",null,[t(tt)(b.row.address)?(c(),E(g,{key:0,href:b.row.address,class:"address-link",target:"_blank",type:"primary"},{default:l(()=>[r(O(b.row.address),1)]),_:2},1032,["href"])):(c(),E(P,{key:1},{default:l(()=>[r(O(b.row.address),1)]),_:2},1024))])]),_:1}),e(u,{label:"用户名","min-width":"180px",prop:"username",sortable:""},{default:l(b=>[b.row.username?(c(),$("div",us,[s("div",ps,O(b.row.username),1),s("div",null,[s("span",{class:"iconfont icon-copy password-row-icon copy-username",onClick:x=>t(q)(b.row.username)},null,8,fs)])])):V("",!0)]),_:1}),e(u,{label:"密码",prop:"password",width:"220px"},{default:l(b=>[b.row.password?(c(),$("div",cs,[s("div",ms,[t(p)===b.row.id?(c(),$("span",gs,O(b.row.password),1)):V("",!0),t(p)!==b.row.id?(c(),$("span",ys,"*******")):V("",!0)]),s("div",null,[t(p)===b.row.id?(c(),$("span",{key:0,class:"iconfont icon-hide password-row-icon",onClick:d[0]||(d[0]=x=>p.value=0)})):V("",!0),t(p)!==b.row.id?(c(),$("span",{key:1,class:"iconfont icon-show password-row-icon",onClick:x=>w(b.row)},null,8,vs)):V("",!0),s("span",{class:"iconfont icon-copy password-row-icon",onClick:x=>t(q)(b.row.password)},null,8,_s)])])):V("",!0)]),_:1}),t(a).setting.showTimeForTable==="addTime"?(c(),E(u,{key:1,formatter:b=>t(ge)(b.addTime,"YYYY-MM-DD HH:mm"),label:"添加时间","min-width":"150px",prop:"addTime",sortable:""},null,8,["formatter"])):V("",!0),t(a).setting.showTimeForTable==="updateTime"?(c(),E(u,{key:2,formatter:b=>t(ge)(b.updateTime,"YYYY-MM-DD HH:mm"),label:"修改时间","min-width":"150px",prop:"updateTime",sortable:""},null,8,["formatter"])):V("",!0),t(a).setting.showLabelForTable?(c(),E(u,{key:3,label:"标签","min-width":"110px",prop:"labels"},{default:l(b=>[(c(!0),$(W,null,pe(t(lt)(b.row),x=>(c(),E(m,{class:"table-label"},{default:l(()=>[r(O(x.name),1)]),_:2},1024))),256))]),_:1})):V("",!0),e(u,{label:"备注","min-width":"130px",prop:"remark"}),e(u,{label:"操作","min-width":"145px",width:"150px"},{default:l(b=>[s("div",bs,[e(o,{content:"分享",placement:"top"},{default:l(()=>[e(g,{underline:!1,type:"success",onClick:x=>t(ot)(b.row)},{default:l(()=>[...d[1]||(d[1]=[s("span",{class:"iconfont icon-share table-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(o,{content:"修改",placement:"top"},{default:l(()=>[e(g,{underline:!1,type:"primary",onClick:x=>t(n).passwordFormRef.editPasswordForm(b.row)},{default:l(()=>[...d[2]||(d[2]=[s("span",{class:"iconfont icon-edit table-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(o,{content:b.row.favorite?"取消收藏":"收藏",placement:"top"},{default:l(()=>[b.row.favorite?(c(),E(g,{key:0,underline:!1,type:"primary",onClick:x=>k(b.row)},{default:l(()=>[...d[3]||(d[3]=[s("span",{class:"iconfont icon-favorited table-opt-icon",style:{color:"#FF9700"}},null,-1)])]),_:1},8,["onClick"])):V("",!0),b.row.favorite?V("",!0):(c(),E(g,{key:1,underline:!1,type:"primary",onClick:x=>k(b.row)},{default:l(()=>[...d[4]||(d[4]=[s("span",{class:"iconfont icon-collect table-opt-icon",style:{color:"#FF9700"}},null,-1)])]),_:1},8,["onClick"]))]),_:2},1032,["content"]),e(o,{content:"删除",placement:"top"},{default:l(()=>[e(g,{underline:!1,type:"danger",onClick:x=>v(b.row)},{default:l(()=>[...d[5]||(d[5]=[s("span",{class:"iconfont icon-delete table-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024)])]),_:1})]),_:1},8,["data"])])):(c(),E(N,{key:1}))}}}),xs=X(ws,[["__scopeId","data-v-2b6dba48"]]),ks=Y({__name:"FilteringTip",setup(H){const f=Z(),n=oe(),a=ae(),p=()=>f.filterCondition.favoriteId?!a.setting.showFavoriteCard||["xs","sm"].includes(G().value):!1,i=()=>f.filterCondition.labelArray.length===0?!1:!a.setting.showLabelCard||["xs","sm"].includes(G().value);return(w,v)=>{const k=$e;return c(),$(W,null,[p()?(c(),$("div",{key:0,style:te({"background-color":t(f).isDark?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"})},[e(k,{center:"","close-text":"取消筛选","show-icon":"",title:"现在显示的是根据收藏筛选后的密码",type:"warning",onClose:v[0]||(v[0]=y=>t(f).filterCondition.favoriteId=0)})],4)):V("",!0),i()?(c(),$("div",{key:1,style:te({"background-color":t(f).isDark?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"})},[e(k,{center:"","close-text":"取消筛选","show-icon":"",title:"现在显示的是根据标签筛选后的密码",type:"warning",onClose:v[1]||(v[1]=y=>t(n).labelTreeRef.setCheckedNodes([]))})],4)):V("",!0)],64)}}}),Cs={class:"password-card-header"},Ss={class:"password-count"},As={style:{display:"flex"}},$s={key:0,class:"clear-history",style:{"text-align":"center","margin-left":"-20px","margin-right":"-20px"}},Fs={key:1},Ps={style:{display:"flex"}},Vs=Y({__name:"PasswordHeader",setup(H){const f=Z(),n=oe(),a=Xt(),p=ae(),i=U(""),w=U(!1),v=P=>{console.log("header 过滤密码 searchText:",i.value," 触发方式："+P),f.filterCondition.searchText=i.value},k=()=>{if(!i.value||!i.value.trim())return;console.log("header 保存搜索记录：",i.value);let P=[],m=localStorage.getItem("searchHistory");m&&(P=JSON.parse(m));let T=P.findIndex(N=>N===i.value.trim());T>-1&&(console.log("header 保存搜索记录 删除已存在的搜索历史"),P.splice(T,1)),P.unshift(i.value),P.length>100&&(P=P.splice(0,100)),localStorage.setItem("searchHistory",JSON.stringify(P))},y=(P,m)=>{if(!P){m([]);return}console.log("header 自动补全：",P);let T=localStorage.getItem("searchHistory");if(T){let N=JSON.parse(T);if(N&&N.length>0){let b=P?N.filter(C=>C.includes(P)):N;b=b.slice(0,5);let x=b.map((C=>({value:C})));x.push({value:i.value,type:"cleanHistory"}),m(x);return}}m([])},_=()=>{console.log("header 清除搜索历史"),localStorage.removeItem("searchHistory")};let A=null;const F=()=>{if(A&&clearTimeout(A),i.value===""&&!w.value){v("textBlank");return}A=setTimeout(function(){v("delayed")},200)},D=()=>{console.log("header 添加密码"),n.passwordFormRef.addPasswordForm()},z=()=>{console.log("header 解锁"),n.verifyPasswordRef.verifyAndUnlock()},B=()=>{f.passwordManager.lock()},L=P=>{f.setTopicMode(P)},d=()=>{n.recycleBinRef.openRecycleBin()},o=()=>{a.push("/note")},u=()=>{location.href="https://home.password-xl.cn"},g=()=>{n.aiAddPasswordRef.show()};return(P,m)=>{const T=ne,N=de,b=ct,x=we,C=Xe,S=We,j=Je,h=Ye;return c(),$(W,null,[s("div",Cs,[s("div",null,[t(p).setting.showPasswordStatistics?(c(),E(T,{key:0,class:"hidden-sm-and-down password-title",style:{width:"300px"}},{default:l(()=>[t(f).visPasswordArray.length>0?(c(),$(W,{key:0},[m[13]||(m[13]=s("span",null," 共 ",-1)),s("span",Ss,O(t(f).visPasswordArray.length),1),m[14]||(m[14]=s("span",null," 个密码 ",-1))],64)):t(f).passwordArray.length?V("",!0):(c(),$(W,{key:1},[r(" 没有保存的密码 ")],64))]),_:1})):(c(),$("div",{key:1,class:"hidden-xs-only",style:{height:"32px"},onClick:u},[...m[15]||(m[15]=[s("img",{alt:"",src:qt,style:{height:"32px",cursor:"pointer"}},null,-1)])]))]),s("div",As,[e(b,{ref:I=>t(n).searchInputRef=I,modelValue:t(i),"onUpdate:modelValue":m[1]||(m[1]=I=>se(i)?i.value=I:null),debounce:10,disabled:t(f).serviceStatus!==t(K).UNLOCKED,"fetch-suggestions":y,class:"search-input",clearable:"",placeholder:"搜索..",onBlur:m[2]||(m[2]=I=>{w.value=!1,k()}),onChange:m[3]||(m[3]=I=>v("change")),onClear:m[4]||(m[4]=I=>v("clear")),onCompositionend:m[5]||(m[5]=I=>w.value=!1),onCompositionstart:m[6]||(m[6]=I=>w.value=!0),onKeyup:[F,m[7]||(m[7]=Me(I=>v("inputEnter"),["enter","native"]))]},{default:l(({item:I})=>[I.type==="cleanHistory"?(c(),$("div",$s,[s("span",{class:"clear-history-text",onClick:_},"清除搜索历史")])):(c(),$("div",Fs,O(I.value),1))]),append:l(()=>[e(N,{class:"search-btn",onClick:m[0]||(m[0]=I=>v("searchBtn"))},{default:l(()=>[...m[16]||(m[16]=[s("span",{class:"iconfont icon-search search-input-icon"},null,-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),s("div",Ps,[t(p).setting.enableAiAdd?(c(),E(N,{key:0,ref:I=>t(n).aiCreatePasswordBtnRef=I,disabled:t(f).serviceStatus!==t(K).UNLOCKED,class:"ai-add-password-btn",plain:"",type:"primary",onClick:g},{default:l(()=>[...m[17]||(m[17]=[r(" Ai ",-1)])]),_:1},8,["disabled"])):V("",!0),e(N,{ref:I=>t(n).createPasswordBtnRef=I,disabled:t(f).serviceStatus!==t(K).UNLOCKED,class:"add-password-btn",plain:"",type:"primary",onClick:D},{default:l(()=>[...m[18]||(m[18]=[r(" 添加 ",-1)])]),_:1},8,["disabled"]),t(f).serviceStatus===t(K).UNLOCKED&&!["xs","sm"].includes(t(G)().value)&&t(p).setting.showNote?(c(),E(x,{key:1,content:"打开笔记"},{default:l(()=>[e(N,{class:"to-note-btn",plain:"",onClick:o},{default:l(()=>[s("span",{style:te([{color:t(f).isDark?"#ccc":"#666"},{"font-size":"125%",transform:"scaleX(1.1)"}]),class:"iconfont icon-note"},null,4)]),_:1})]),_:1})):V("",!0),t(f).serviceStatus===t(K).UNLOCKED?(c(),E(x,{key:2,content:"锁定"},{default:l(()=>[e(N,{class:"lock-btn",plain:"",onClick:B},{default:l(()=>[s("span",{style:te([{color:t(f).isDark?"#ccc":"#666"},{"font-size":"120%"}]),class:"iconfont icon-lock"},null,4)]),_:1})]),_:1})):V("",!0),t(f).serviceStatus===t(K).LOGGED?(c(),E(x,{key:3,content:"解锁"},{default:l(()=>[e(N,{class:"unlock-btn",plain:"",onClick:z},{default:l(()=>[s("span",{style:te([{color:t(f).isDark?"#ccc":"#666"},{"font-size":"120%"}]),class:"iconfont icon-unlock"},null,4)]),_:1})]),_:1})):V("",!0),e(j,{trigger:"click"},{dropdown:l(()=>[e(S,null,{default:l(()=>[["xs","sm"].includes(t(G)().value)||!t(p).setting.showLabelCard?(c(),E(C,{key:0,disabled:t(f).serviceStatus!==t(K).UNLOCKED,onClick:t(n).labelDrawer?.showLabelDrawer},{default:l(()=>[...m[20]||(m[20]=[s("span",{class:"iconfont icon-label menu-item",style:{color:"#409EFF"}},null,-1),r(" 标签 ",-1)])]),_:1},8,["disabled","onClick"])):V("",!0),["xs","sm"].includes(t(G)().value)||!t(p).setting.showFavoriteCard?(c(),E(C,{key:1,disabled:t(f).serviceStatus!==t(K).UNLOCKED,onClick:t(n).favoriteDrawer?.showFavoriteDrawer},{default:l(()=>[...m[21]||(m[21]=[s("span",{class:"iconfont icon-collect menu-item",style:{color:"#FF9700"}},null,-1),r(" 收藏 ",-1)])]),_:1},8,["disabled","onClick"])):V("",!0),t(p).setting.passwordDisplayMode===t(Q).TABLE?(c(),E(C,{key:2,divided:["xs","sm"].includes(t(G)().value)||!t(p).setting.showFavoriteCard||!t(p).setting.showLabelCard,onClick:m[8]||(m[8]=I=>t(p).setting.passwordDisplayMode=t(Q).CARD)},{default:l(()=>[...m[22]||(m[22]=[s("span",{class:"iconfont icon-card menu-item",style:{color:"#67c23a"}},null,-1),r(" 卡片视图 ",-1)])]),_:1},8,["divided"])):V("",!0),t(p).setting.passwordDisplayMode===t(Q).CARD?(c(),E(C,{key:3,onClick:m[9]||(m[9]=I=>t(p).setting.passwordDisplayMode=t(Q).TABLE)},{default:l(()=>[...m[23]||(m[23]=[s("span",{class:"iconfont icon-list menu-item",style:{color:"#409eff"}},null,-1),r(" 列表视图 ",-1)])]),_:1})):V("",!0),e(C,{disabled:t(f).serviceStatus!==t(K).UNLOCKED,divided:"",onClick:o},{default:l(()=>[...m[24]||(m[24]=[s("span",{class:"iconfont icon-note menu-item",style:{color:"#67C23A",transform:"scaleX(1.1)"}},null,-1),r(" 打开笔记 ",-1)])]),_:1},8,["disabled"]),t(f).isDark?V("",!0):(c(),E(C,{key:4,divided:["xs","sm"].includes(t(G)().value),onClick:m[10]||(m[10]=I=>L(t(ue).DARK))},{default:l(()=>[...m[25]||(m[25]=[s("span",{class:"iconfont icon-dark-mode menu-item",style:{color:"rgb(96 0 255)"}},null,-1),r(" 深色主题 ",-1)])]),_:1},8,["divided"])),t(f).isDark?(c(),E(C,{key:5,divided:["xs","sm"].includes(t(G)().value),onClick:m[11]||(m[11]=I=>L(t(ue).LIGHT))},{default:l(()=>[...m[26]||(m[26]=[s("span",{class:"iconfont icon-right-mode menu-item",style:{color:"rgb(186 255 0)"}},null,-1),r(" 明亮主题 ",-1)])]),_:1},8,["divided"])):V("",!0),e(C,{disabled:t(f).serviceStatus!==t(K).UNLOCKED,divided:"",onClick:t(n).settingRef?.openSetting},{default:l(()=>[...m[27]||(m[27]=[s("span",{class:"iconfont icon-setting menu-item",style:{color:"#409EFF"}},null,-1),r(" 系统设置 ",-1)])]),_:1},8,["disabled","onClick"]),e(C,{disabled:t(f).serviceStatus!==t(K).UNLOCKED,onClick:d},{default:l(()=>[...m[28]||(m[28]=[s("span",{class:"iconfont icon-recycle-bin menu-item",style:{color:"#E6A23C"}},null,-1),r(" 回收站 ",-1)])]),_:1},8,["disabled"]),e(C,{divided:"",onClick:m[12]||(m[12]=I=>t(f).logout())},{default:l(()=>[...m[29]||(m[29]=[s("span",{class:"iconfont icon-exit menu-item",style:{color:"#F56C6C"}},null,-1),r(" 退出登录 ",-1)])]),_:1})]),_:1})]),default:l(()=>[e(N,{style:te({color:t(f).isDark?"#ccc":"#666"}),class:"menu-btn",plain:""},{default:l(()=>[...m[19]||(m[19]=[s("span",{class:"iconfont icon-menu",style:{"font-size":"130%"}},null,-1)])]),_:1},8,["style"])]),_:1})])]),e(h,{class:"password-head-body-line"})],64)}}}),Rs=X(Vs,[["__scopeId","data-v-20d86cb1"]]),Es={id:"contextmenu-ul"},Ds=Y({__name:"Contextmenu",setup(H,{expose:f}){const n=Z(),a=oe(),p=ae(),i=U({show:!1,x:0,y:0}),w=F=>{console.log("显示右键菜单"),F.preventDefault(),i.value.x=F.clientX,i.value.y=F.clientY,i.value.show=!0},v=()=>{i.value.show=!1},k=F=>{console.log("右键菜单，切换密码展示方式"),p.setting.passwordDisplayMode=F,n.passwordManager.syncSetting(),i.value.show=!1},y=()=>{if(console.log("右键菜单，创建密码"),n.serviceStatus===K.UNLOCKED){a.passwordFormRef.addPasswordForm(),i.value.show=!1;return}console.log("右键菜单，创建密码 需要解锁"),a.verifyPasswordRef.verifyAndUnlock().then(()=>{a.passwordFormRef.addPasswordForm(),i.value.show=!1})},_=()=>{if(console.log("右键菜单，打开回收站"),n.serviceStatus===K.UNLOCKED){a.recycleBinRef.openRecycleBin(),i.value.show=!1;return}console.log("右键菜单，打开回收站 需要解锁"),a.verifyPasswordRef.verifyAndUnlock().then(()=>{a.recycleBinRef.openRecycleBin(),i.value.show=!1})},A=()=>{if(console.log("右键菜单，添加标签"),n.serviceStatus===K.UNLOCKED){a.labelTreeDivRef.addLabel(null,"sub"),i.value.show=!1;return}console.log("右键菜单，添加标签 需要解锁"),a.verifyPasswordRef.verifyAndUnlock().then(()=>{a.labelTreeDivRef.addLabel(null,"sub"),i.value.show=!1})};return f({showContextmenu:w,hideContextmenu:v}),(F,D)=>{const z=be;return t(i).show?(c(),$("div",{key:0,style:te({top:t(i).y+"px",left:t(i).x+"px"}),class:"contextmenu-div"},[e(z,null,{default:l(()=>[s("ul",Es,[s("li",{onClick:y},[...D[4]||(D[4]=[s("span",{class:"iconfont icon-create",style:{color:"#409EFF"}},null,-1),r(" 创建密码 ",-1)])]),t(n).serviceStatus===t(K).LOGGED?(c(),$("li",{key:0,onClick:D[0]||(D[0]=B=>t(a).verifyPasswordRef.verifyAndUnlock())},[...D[5]||(D[5]=[s("span",{class:"iconfont icon-lock",style:{color:"#E6A23C"}},null,-1),r(" 解锁 ",-1)])])):V("",!0),t(n).serviceStatus===t(K).UNLOCKED?(c(),$("li",{key:1,onClick:D[1]||(D[1]=B=>t(n).passwordManager.lock())},[...D[6]||(D[6]=[s("span",{class:"iconfont icon-unlock",style:{color:"#E6A23C"}},null,-1),r(" 锁定 ",-1)])])):V("",!0),t(p).setting.passwordDisplayMode===t(Q).CARD?(c(),$("li",{key:2,onClick:D[2]||(D[2]=B=>k(t(Q).TABLE))},[...D[7]||(D[7]=[s("span",{class:"iconfont icon-list",style:{color:"#67C23A"}},null,-1),r(" 表格视图 ",-1)])])):V("",!0),t(p).setting.passwordDisplayMode===t(Q).TABLE?(c(),$("li",{key:3,onClick:D[3]||(D[3]=B=>k(t(Q).CARD))},[...D[8]||(D[8]=[s("span",{class:"iconfont icon-card",style:{color:"#67C23A"}},null,-1),r(" 卡片视图 ",-1)])])):V("",!0),s("li",{onClick:A},[...D[9]||(D[9]=[s("span",{class:"iconfont icon-label",style:{color:"#409EFF"}},null,-1),r(" 添加标签 ",-1)])]),s("li",{onClick:_},[...D[10]||(D[10]=[s("span",{class:"iconfont icon-recycle-bin",style:{color:"#F56C6C"}},null,-1),r(" 回收站 ",-1)])])])]),_:1})],4)):V("",!0)}}}),Ts=X(Ds,[["__scopeId","data-v-15310a4c"]]),Ms=Y({__name:"IndexPage",setup(H){const f=et(()=>he(()=>import("./ExportExcel-Bd9mOAos.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),n=et(()=>he(()=>import("./ImportExcel-DL9c-EVf.js"),__vite__mapDeps([11,3,2,4,5,6,7,10,1,8,9,12]),import.meta.url)),a=Z(),p=oe(),i=ae();return Ce(()=>{a.serviceStatus===K.LOGGED?(console.log("页面加载完成，验证并解锁"),p.verifyPasswordRef.verifyAndUnlock(),i.setting.autoUnlock||localStorage.removeItem("mainPassword")):a.serviceStatus===K.WAIT_INIT&&(console.log("页面加载完成，初始化主密码"),p.setPasswordRef.setMainPassword())}),["xs","sm"].includes(G().value)&&i.setting.passwordDisplayMode===Q.TABLE&&(i.setting.passwordDisplayMode=Q.CARD),(w,v)=>{const k=Rs,y=ks,_=xs,A=is,F=be,D=Ae,z=zn,B=In,L=Se,d=Tn,o=En,u=Cn,g=_n,P=fn,m=an,T=tn,N=Zo,b=el,x=ht,C=Qt;return c(),$(W,null,[["xs","sm"].includes(t(G)().value)?(c(),$("div",{key:1,style:te([{"background-color":t(a).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"},{"backdrop-filter":"blur(50px)",height:"100vh"}])},[e(k),e(y),t(i).setting.passwordDisplayMode===t(Q).TABLE?(c(),E(_,{key:0})):V("",!0),t(i).setting.passwordDisplayMode===t(Q).CARD?(c(),E(A,{key:1})):V("",!0)],4)):(c(),$("div",{key:0,onClick:v[0]||(v[0]=S=>t(p).contextmenuRef&&t(p).contextmenuRef.hideContextmenu()),onContextmenu:v[1]||(v[1]=rt(S=>t(p).contextmenuRef.showContextmenu(S),["prevent"]))},[e(L,{class:"password-body-row"},{default:l(()=>[e(D,{lg:{span:!t(i).setting.showLabelCard&&!t(i).setting.showFavoriteCard?24:20},md:{span:!t(i).setting.showLabelCard&&!t(i).setting.showFavoriteCard?24:18},xl:{span:!t(i).setting.showLabelCard&&!t(i).setting.showFavoriteCard?24:21}},{default:l(()=>[e(F,{style:te({"background-color":t(a).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"}),"body-class":"password-card-body",class:"password-card"},{default:l(()=>[e(k),e(y),t(i).setting.passwordDisplayMode===t(Q).TABLE?(c(),E(_,{key:0})):V("",!0),t(i).setting.passwordDisplayMode===t(Q).CARD?(c(),E(A,{key:1})):V("",!0)]),_:1},8,["style"])]),_:1},8,["lg","md","xl"]),t(i).setting.showLabelCard||t(i).setting.showFavoriteCard?(c(),E(D,{key:0,lg:{span:4},md:{span:6},xl:{span:3}},{default:l(()=>[e(z),e(B)]),_:1})):V("",!0)]),_:1})],32)),e(d,{ref:S=>t(p).cancelAccountRef=S},null,512),e(o,{ref:S=>t(p).passwordFormRef=S},null,512),e(u,{ref:S=>t(p).labelDrawer=S},null,512),e(g,{ref:S=>t(p).favoriteDrawer=S},null,512),e(P,{ref:S=>t(p).recycleBinRef=S},null,512),e(m,{ref:S=>t(p).backupAndRecoveryRef=S},null,512),e(T,{ref:S=>t(p).setPasswordRef=S},null,512),e(N,{ref:S=>t(p).settingRef=S},null,512),e(b,{ref:S=>t(p).tourRef=S},null,512),e(x,{ref:S=>t(p).showPasswordRef=S},null,512),t(i).visSetting?(c(),$(W,{key:2},[e(t(f),{ref:S=>t(p).exportExcelRef=S},null,512),e(t(n),{ref:S=>t(p).importExcelRef=S},null,512)],64)):V("",!0),e(Ts,{ref:S=>t(p).contextmenuRef=S},null,512),e(C)],64)}}}),Gs=X(Ms,[["__scopeId","data-v-43ce5cfc"]]);export{Gs as default};
