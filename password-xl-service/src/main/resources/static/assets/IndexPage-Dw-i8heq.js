const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ExportExcel-DQsUL2HF.js","./index-HOZrobza.js","./@vue-BhCi5Yj9.js","./element-plus-BZLLPOmQ.js","./vendor-B4nIbczL.js","./ali-oss-B_Q55M9i.js","./@element-plus-C1_C3qTM.js","./element-plus-DtJdknO8.css","./cos-js-sdk-v5-B8_2Tx6c.js","./index-DTA_oh_4.css","./exceljs-eb77zzzs.js","./ImportExcel-BVzN8J8u.js","./ImportExcel-DbM67cRW.css"])))=>i.map(i=>d[i]);
import{u as Q,a as le,d as Y,c as Ze,P as je,e as Ct,i as St,_ as X,b as ie,S as j,f as ee,T as ue,g as At,h as q,j as Ye,k as ve,s as Re,l as Ee,m as $t,n as Pt,M as Ve,o as Ft,p as _e,q as Vt,r as et,t as De,v as Dt,w as Rt,x as Et,y as Tt,z as Te,A as nt,B as st,C as at,D as rt,E as it,F as tt,G as ot}from"./index-HOZrobza.js";import{d as ce,k as Le,l as Ue,m as me,c as ne,e as de,b as Z,E as se,f as ge,v as It,n as Mt,o as Lt,i as ye,p as Ce,q as Se,r as Ut,s as Bt,t as zt,u as Nt,w as Ae,x as we,g as Be,y as Je,h as he,A as dt,B as ut,C as ze,D as Ot,F as Kt,G as Ht,H as pt,I as ft,a as ke,J as We,K as Xe,L as qe,M as Qe,N as Gt,O as ct,P as be,Q as jt,R as Yt,S as mt}from"./element-plus-BZLLPOmQ.js";import{d as J,r as z,n as V,v as o,c as k,z as A,x as gt,u as t,D as e,j as re,a as s,B as r,C as K,M as yt,o as f,H as $e,R as vt,S as Ie,F as W,ax as Jt,a1 as fe,I as h,a3 as ht,a0 as Wt,P as _t,aa as Me,y as wt,Q as oe,E as Xt,ay as lt}from"./@vue-BhCi5Yj9.js";import{_ as qt,a as Qt,b as Zt,c as eo}from"./local-DhpgDmJL.js";import{a0 as to,X as oo}from"./vendor-B4nIbczL.js";import{_ as lo}from"./logo-B_J9w6Yt.js";import"./cos-js-sdk-v5-B8_2Tx6c.js";import"./ali-oss-B_Q55M9i.js";import"./@element-plus-C1_C3qTM.js";const no={key:0},so={key:1,"element-loading-text":"正在解析...",style:{height:"55vh"}},ao={key:2},ro=J({__name:"AiImport",setup(H,{expose:c}){const n=z(),a=z(!1),p=z(1),i=Q(),b=le(),v=z(""),m=z([]),_=()=>{if(console.log("AI导入 确认导入已选中密码与标签"),!n.value.getSelectionRows().length){console.log("AI导入 未选择密码"),Z.warning("请选择要导入的密码");return}console.log("AI导入 验证身份"),b.verifyPasswordRef.getAndVerify(l=>i.passwordManager.verifyPassword(l)).then(()=>{console.log("AI导入 确认开始导入"),D()})},D=()=>{try{const l=n.value.getSelectionRows().map(y=>y.id),d=m.value.filter(y=>l.includes(y.id));console.log("要导入的密码：",d),$(i.allPasswordArray,d),i.passwordManager.syncStoreData(),a.value=!1,m.value=[],v.value="",se.success("导入成功")}catch(u){console.error(u),se.error("导入失败")}},$=(u,l)=>{l.forEach(d=>{const y=u.find(x=>Ze(x,d));y?y.status=je.NORMAL:u.push(d)})},P=()=>{if(!v.value){Z.warning("请输入密码信息");return}console.log("AI解析，开始解析密码"),m.value=[],p.value=2,Ct(v.value,!0).then(u=>{p.value=3,console.log("AI解析，解析密码完成");const l=JSON.parse(u);for(let d=0;d<l.length;d++)m.value.push({id:St(),title:l[d].name,address:l[d].address,username:l[d].username,password:l[d].password,remark:l[d].remark,addTime:Date.now(),updateTime:Date.now(),deleteTime:0,favoriteTime:0,favorite:!1,customFields:[],labels:[],status:je.NORMAL,bgColor:""});yt(()=>{console.log("AI导入 全选密码列表"),n.value.toggleAllSelection()})}).catch(u=>{p.value=1,se.error(u)})},E=()=>!v.value,O=()=>n.value?!n.value.getSelectionRows().length:!0,N=u=>!i.passwordArray.find(l=>Ze(l,u));return c({batchImport:()=>{p.value=1,a.value=!0}}),(u,l)=>{const d=ce,y=Ue,x=me,g=ne,L=Le,S=de,w=ge,U=It;return f(),V(w,{modelValue:t(a),"onUpdate:modelValue":l[1]||(l[1]=M=>re(a)?a.value=M:null),title:"AI批量导入",top:"10vh",width:["xs","sm","md"].includes(t(Y)().value)?"95%":"70%"},{footer:o(()=>[t(p)===1?(f(),V(S,{key:0,disabled:E(),type:"primary",onClick:P},{default:o(()=>[...l[4]||(l[4]=[r("开始解析",-1)])]),_:1},8,["disabled"])):A("",!0),t(p)===3?(f(),V(S,{key:1,disabled:O(),type:"primary",onClick:_},{default:o(()=>[...l[5]||(l[5]=[r("确认导入",-1)])]),_:1},8,["disabled"])):A("",!0)]),default:o(()=>[t(p)===1?(f(),k("div",no,[e(d,{type:"textarea",class:"password-text-input",modelValue:t(v),"onUpdate:modelValue":l[0]||(l[0]=M=>re(v)?v.value=M:null),placeholder:`请粘贴密码内容，例如：\r
      阿里云ECS 10.12.3.45 root/P@x92Q5m#jjL\r
      2026年临时用的`},null,8,["modelValue"])])):A("",!0),t(p)===2?gt((f(),k("div",so,null,512)),[[U,!0]]):A("",!0),t(p)===3?(f(),k("div",ao,[e(L,{ref_key:"passwordTableRef",ref:n,data:t(m),height:"55vh"},{default:o(()=>[e(y,{type:"selection",selectable:N,width:"55"}),e(y,{width:"55"},{default:o(M=>[N(M.row)?(f(),V(x,{key:0,content:"可导入",placement:"top"},{default:o(()=>[...l[2]||(l[2]=[s("span",{class:"iconfont icon-info",style:{color:"#409EFF","font-size":"16px"}},null,-1)])]),_:1})):(f(),V(x,{key:1,content:"已存在密码不可导入",placement:"top"},{default:o(()=>[...l[3]||(l[3]=[s("span",{class:"iconfont icon-info",style:{color:"#ff9600","font-size":"16px"}},null,-1)])]),_:1}))]),_:1}),e(y,{label:"名称","min-width":"100px",prop:"title"}),e(y,{label:"地址","min-width":"150px",prop:"address"}),e(y,{label:"用户名","min-width":"100px",prop:"username"}),e(y,{label:"密码",prop:"password",width:"180px"},{default:o(M=>[e(g,{"line-clamp":"3",truncated:""},{default:o(()=>[r(K(M.row.password),1)]),_:2},1024)]),_:1}),e(y,{label:"备注","min-width":"100px",prop:"remark"})]),_:1},8,["data"])])):A("",!0)]),_:1},8,["modelValue","width"])}}}),io=X(ro,[["__scopeId","data-v-eed2512e"]]),uo=J({__name:"ShortcutKey",setup(H){const c=Q(),n=le(),a=ie(),p=v=>{a.setting.enableShortcutKey&&(v.ctrlKey&&v.key.toUpperCase()==="F"?(console.log("使用快捷键 Ctrl + F 搜索"),v.preventDefault(),n.searchInputRef?.focus()):v.altKey&&v.key.toUpperCase()==="N"?(console.log("使用快捷键 Alt + N 新建密码"),v.preventDefault(),n.passwordFormRef.addPasswordForm()):v.altKey&&v.key.toUpperCase()==="L"?(console.log("使用快捷键 Alt + L 锁定/解锁密码库"),v.preventDefault(),c.serviceStatus===j.LOGGED?n.verifyPasswordRef.verifyAndUnlock():c.passwordManager.lock()):v.altKey&&v.key.toUpperCase()==="V"?(console.log("使用快捷键 Alt + V 切换密码展示方式"),v.preventDefault(),a.setting.passwordDisplayMode===ee.CARD?i(ee.TABLE):i(ee.CARD)):v.altKey&&v.key.toUpperCase()==="T"?(console.log("使用快捷键 Alt + T 切换主题"),v.preventDefault(),c.isDark?b(ue.LIGHT):b(ue.DARK)):v.key.toUpperCase()==="/"&&!At(v.target)&&!c.passwordFormDrawerVis&&!a.visSetting&&!c.recycleBinDialogVis&&(console.log("使用快捷键 / 聚焦搜索"),v.preventDefault(),n.searchInputRef?.focus()))},i=v=>{a.setting.passwordDisplayMode=v,c.passwordManager.syncSetting()},b=v=>{c.setTopicMode(v)};return $e(()=>{document.addEventListener("keydown",p)}),vt(()=>{document.removeEventListener("keydown",p)}),(v,m)=>null}}),po=J({__name:"ShowPassword",setup(H,{expose:c}){const n=Ie({alertVisible:!1,content:"",title:""});return c({showPassword:p=>{console.log("查看密码弹窗"),n.content=p.password,n.title=p.title,n.alertVisible=!0}}),(p,i)=>{const b=ne,v=ce,m=de,_=ge;return f(),V(_,{modelValue:t(n).alertVisible,"onUpdate:modelValue":i[2]||(i[2]=D=>t(n).alertVisible=D),width:["xs","sm"].includes(t(Y)().value)?"95%":"40%","append-to-body":""},{header:o(()=>[e(b,{size:"large",style:{"user-select":"none"}},{default:o(()=>[i[3]||(i[3]=s("span",{class:"iconfont icon-show-password"},null,-1)),r(" "+K(t(n).title),1)]),_:1})]),footer:o(()=>[e(b,{class:"password-length-tip",type:"info"},{default:o(()=>[...i[4]||(i[4]=[s("span",{class:"iconfont icon-info"},null,-1),r(" 密码长度大于40会以弹框形式展示密码 ",-1)])]),_:1}),e(m,{plain:"",type:"success",onClick:i[1]||(i[1]=D=>{t(q)(t(n).content),t(n).alertVisible=!1})},{default:o(()=>[...i[5]||(i[5]=[r(" 一键复制 ",-1)])]),_:1})]),default:o(()=>[e(v,{modelValue:t(n).content,"onUpdate:modelValue":i[0]||(i[0]=D=>t(n).content=D),rows:10,readonly:"",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue","width"])}}}),fo=X(po,[["__scopeId","data-v-f516dc24"]]),co=J({__name:"NoviceGuide",setup(H,{expose:c}){const n=le(),a=ie(),p=z(!1),i=z(!1),b=z(!1),v=()=>{console.log("进入新手引导"),p.value=!0},m=()=>{console.log("新手引导，添加密码"),n.passwordFormRef.addPasswordForm("示例密码"),setTimeout(()=>{i.value=!0,n.passwordFormFormRef.clearValidate(),setTimeout(()=>{n.passwordFormTitleRef.focus()},100)},350)},_=()=>{console.log("新手引导，保存密码"),n.passwordFormRef.closePasswordForm(),setTimeout(()=>{b.value=!0},350)};return c({startTour:v}),(D,$)=>{const P=ne,E=Lt,O=Mt;return f(),k(W,null,[e(O,{modelValue:t(p),"onUpdate:modelValue":$[0]||($[0]=N=>re(p)?p.value=N:null)},{indicators:o(()=>[...$[4]||($[4]=[])]),default:o(()=>[e(E,{"next-button-props":{onClick:m,children:"下一步"},target:t(n).createPasswordBtnRef?.$el,title:"欢迎使用 password-XL"},{default:o(()=>[e(P,null,{default:o(()=>[...$[3]||($[3]=[r("您可以点击这里创建密码",-1)])]),_:1})]),_:1},8,["next-button-props","target"])]),_:1},8,["modelValue"]),e(O,{modelValue:t(i),"onUpdate:modelValue":$[1]||($[1]=N=>re(i)?i.value=N:null),"target-area-clickable":!1,"z-index":9e3},{indicators:o(({current:N,total:T})=>[e(P,null,{default:o(()=>[r(K(N+1)+" / "+K(T),1)]),_:2},1024)]),default:o(()=>[e(E,{"next-button-props":{children:"下一步"},target:t(n).passwordFormTitleRef?.$el,title:"密码名称"},{default:o(()=>[e(P,null,{default:o(()=>[...$[5]||($[5]=[r("在这里输入密码名称",-1)])]),_:1})]),_:1},8,["target"]),e(E,{"next-button-props":{children:"下一步"},target:t(n).passwordFormGenerateBtnRef?.$el,title:"随机密码"},{default:o(()=>[e(P,null,{default:o(()=>[...$[6]||($[6]=[r("点击这里可以随机生成密码，当然您也可以在输入框直接粘贴您已有的密码",-1)])]),_:1})]),_:1},8,["target"]),e(E,{"next-button-props":{children:"下一步"},target:t(n).passwordFormGenerateRuleRef?.$el,title:"控制生成规则"},{default:o(()=>[e(P,null,{default:o(()=>[...$[7]||($[7]=[r("拖动这里控制随机密码的长度",-1)])]),_:1})]),_:1},8,["target"]),e(E,{"next-button-props":{children:"好的",onClick:_},target:t(n).passwordFormSaveBtnRef?.$el,title:"保存"},{default:o(()=>[e(P,null,{default:o(()=>[...$[8]||($[8]=[r("最后，点击这里即可保存密码",-1)])]),_:1})]),_:1},8,["next-button-props","target"])]),_:1},8,["modelValue"]),e(O,{modelValue:t(b),"onUpdate:modelValue":$[2]||($[2]=N=>re(b)?b.value=N:null),"z-index":9e3},{indicators:o(()=>[...$[11]||($[11]=[])]),default:o(()=>[t(a).setting.passwordDisplayMode===t(ee).TABLE?(f(),V(E,{key:0,"next-button-props":{children:"好的"},target:t(n).displayModeCardRef?.$el,title:"密码视图"},{default:o(()=>[e(P,null,{default:o(()=>[...$[9]||($[9]=[r("点击这里可以切换卡片视图",-1)])]),_:1})]),_:1},8,["target"])):A("",!0),t(a).setting.passwordDisplayMode===t(ee).CARD?(f(),V(E,{key:1,"next-button-props":{children:"好的"},target:t(n).displayModeTableRef?.$el,title:"密码视图"},{default:o(()=>[e(P,null,{default:o(()=>[...$[10]||($[10]=[r("点击这里可以切换表格视图",-1)])]),_:1})]),_:1},8,["target"])):A("",!0)]),_:1},8,["modelValue"])],64)}}}),mo={};function go(H,c){return c[0]||(c[0]=Jt('<h2>版权声明（Copyright Notice）</h2><p>版权所有 © [2024] [黄艳鹏]</p><p>本开源项目由 [黄艳鹏] 开发，现以MPL-2.0许可协议发布。</p><h3>许可协议（License）</h3><p style="text-indent:20px;">本项目的源代码可以在MPL-2.0许可协议下使用。主要条款如下：</p><ol><li>个人或组织可以免费使用、复制和修改本项目的源代码。</li><li>禁止将本项目的源代码或修改后的代码用于任何形式的商业用途，包括但不限于售卖、租赁或其他形式的盈利活动。</li><li>禁止分发本项目的源代码或修改后的代码给第三方。</li></ol><h3>免责声明（Disclaimer）</h3><p style="text-indent:20px;"> 本项目的源代码按“现状”提供，使用者需自行承担使用风险。在任何情况下，原作者或版权持有者对因使用本项目源代码而产生的任何直接、间接、附带、特殊、惩罚性或后果性的损害不承担责任。</p>',8))}const yo=X(mo,[["render",go]]),vo=""+new URL("donate-BWYZILYa.png",import.meta.url).href,_o="password-xl",wo="1.3.11",bo="module",xo="electron/main.mjs",ko={name:"黄艳鹏",email:"hyp0105@qq.com"},Co=[{name:"黄艳鹏",email:"hyp0105@qq.com",weChat:"huangyanpeng1864"}],So="开源免费的密码管理项目",Ao="https://password-xl.cn",$o={type:"git",url:"https://github.com/peng0105/password-xl"},Po={start:"vite",preview:"vue-tsc -b && vite build && vite preview",build:"vue-tsc -b && vite build","dist-to-windows":"vue-tsc -b && vite build && electron-builder build --win --config electron/electron-builder.json5","dist-to-mac":"vue-tsc -b && vite build && electron-builder build --mac --config electron/electron-builder.json5","dist-to-linux":"vue-tsc -b && vite build && electron-builder build --linux --config electron/electron-builder.json5","start-exe":"electron ."},Fo={aieditor:"^1.4.0","ali-oss":"^6.23.0",axios:"^1.13.2",buffer:"^6.0.3","cos-js-sdk-v5":"^1.10.1","crypto-js":"^4.2.0","element-plus":"^2.13.0",exceljs:"^4.4.0","file-saver":"^2.0.5","node-forge":"^1.3.3",pinia:"^3.0.4",vue:"^3.5.26","vue-router":"^4.6.4"},Vo={"@types/ali-oss":"^6.16.13","@types/crypto-js":"^4.2.2","@types/file-saver":"^2.0.7","@types/node":"^25.0.3","@vitejs/plugin-legacy":"^7.2.1","@vitejs/plugin-vue":"^6.0.3",electron:"^39.2.7","electron-builder":"^26.0.12",terser:"^5.44.1",typescript:"^5.9.3","unplugin-auto-import":"^20.3.0","unplugin-icons":"^22.5.0","unplugin-vue-components":"^30.0.0",vite:"^7.3.0","vue-tsc":"^3.2.2"},te={name:_o,private:!0,version:wo,type:bo,main:xo,author:ko,contributors:Co,description:So,homepage:Ao,repository:$o,scripts:Po,dependencies:Fo,devDependencies:Vo},Do={class:"support-ul"},Ro={style:{float:"left"}},Eo={style:{float:"left",width:"calc(100% - 40px)","padding-left":"5px"}},To=J({__name:"SupportMe",setup(H){const c=[{name:"Seeking dream",money:10,time:"2024-10-11"},{name:"Ching",money:10,time:"2024-07-13"},{name:"李春雨",money:5,time:"2024-07-12"},{name:"张博文",money:50,time:"2024-07-12"}];return(n,a)=>{const p=ne,i=ye,b=Se,v=Ue,m=Le,_=Ce;return f(),k(W,null,[a[19]||(a[19]=s("h2",{style:{"margin-top":"0"}},"支持我们",-1)),e(p,{size:"large",style:{"text-indent":"20px"},tag:"p"},{default:o(()=>[...a[0]||(a[0]=[r(" 为了帮助您更安全、便捷地管理密码，我们打造了一个开源免费的密码管理工具。在开发和维护过程中，我们面临着诸多困难和挑战。您的支持对项目的发展至关重要，您可以通过以下方式支持此项目： ",-1)])]),_:1}),s("ul",Do,[s("li",null,[e(p,{size:"large"},{default:o(()=>[a[2]||(a[2]=s("span",{class:"iconfont icon-praise support-icon",style:{color:"#E6A23C"}},null,-1)),a[3]||(a[3]=r(" 在项目 ",-1)),e(i,{href:t(te).repository.url,underline:!1,style:{"font-size":"16px",position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:o(()=>[...a[1]||(a[1]=[r("开源地址 ",-1)])]),_:1},8,["href"]),a[4]||(a[4]=r(" 中为项目点赞，增加项目的曝光度。 ",-1))]),_:1})]),s("li",null,[e(p,{size:"large"},{default:o(()=>[a[6]||(a[6]=s("span",{class:"iconfont icon-report support-icon",style:{color:"#F56C6C"}},null,-1)),a[7]||(a[7]=r(" 在Github上 ",-1)),e(i,{href:t(te).repository.url+"/issues",underline:!1,style:{"font-size":"16px",position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:o(()=>[...a[5]||(a[5]=[r("报告您遇到的错误 ",-1)])]),_:1},8,["href"]),a[8]||(a[8]=r(" ，帮助我们持续改进。 ",-1))]),_:1})]),s("li",null,[e(p,{size:"large"},{default:o(()=>[a[10]||(a[10]=s("span",{class:"iconfont icon-idea support-icon",style:{color:"#67C23A"}},null,-1)),a[11]||(a[11]=r(" 提出您的 ",-1)),e(i,{href:t(te).repository.url+"/issues",underline:!1,style:{"font-size":"16px",position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:o(()=>[...a[9]||(a[9]=[r("建议和想法 ",-1)])]),_:1},8,["href"]),a[12]||(a[12]=r(" ，帮助我们更好地满足用户需求。 ",-1))]),_:1})]),s("li",null,[e(p,{size:"large"},{default:o(()=>[...a[13]||(a[13]=[s("span",{class:"iconfont icon-company support-icon",style:{color:"#E6A23C"}},null,-1),r(" 将此工具分享给您的朋友和家人，让更多人受益。 ",-1)])]),_:1})]),s("li",null,[s("div",Ro,[e(p,{size:"large"},{default:o(()=>[...a[14]||(a[14]=[s("span",{class:"iconfont icon-money support-icon",style:{color:"#F56C6C"}},null,-1)])]),_:1})]),s("div",Eo,[e(p,{size:"large"},{default:o(()=>[...a[15]||(a[15]=[r(" 如果您认可我们的努力，请考虑给予一些经济上的支持，以帮助我们为您提供更加优质的密码管理体验。 ",-1)])]),_:1})]),a[16]||(a[16]=s("div",{style:{clear:"both"}},null,-1))])]),e(_,null,{default:o(()=>[e(b,{md:{span:9},sm:{span:24},xs:{span:24},style:{"text-align":"center"}},{default:o(()=>[...a[17]||(a[17]=[s("div",{style:{"text-align":"center"}},[s("h3",{style:{"margin-top":"4px"}},"微信赞赏码"),s("div",{style:{padding:"5px 20px","text-align":"center"}},[s("img",{alt:"",src:vo,style:{width:"80%","max-width":"300px","border-radius":"50%"}})])],-1)])]),_:1}),e(b,{md:{span:15},sm:{span:24},xs:{span:24},style:{"text-align":"center","padding-right":"10px"}},{default:o(()=>[a[18]||(a[18]=s("h3",{style:{"margin-top":"4px"}},"捐赠者列表",-1)),e(m,{data:c,border:"",stripe:""},{default:o(()=>[e(v,{label:"名称",prop:"name"}),e(v,{label:"时间","min-width":"60px",prop:"time"}),e(v,{label:"金额","min-width":"40px",prop:"money"})]),_:1})]),_:1})]),_:1})],64)}}}),Io=X(To,[["__scopeId","data-v-871290c0"]]),Mo={style:{padding:"10px"}},Lo={style:{"padding-left":"25px","line-height":"26px"}},Uo=J({__name:"About",setup(H){const c=z(["密码支持自定义信息","导出、导入Excel","支持Windows、Android客户端","支持停用动态壁纸"]);return(n,a)=>{const p=Bt,i=ye,b=Ut;return f(),k(W,null,[a[0]||(a[0]=s("div",null,[s("h2",{style:{"margin-top":"0"}},"关于项目")],-1)),s("div",Mo,[e(b,{column:1},{default:o(()=>[e(p,{label:"项目名称:"},{default:o(()=>[r(K(t(te).name),1)]),_:1}),e(p,{label:"当前版本:"},{default:o(()=>[r(K(t(te).version),1)]),_:1}),e(p,{label:"官方网站:"},{default:o(()=>[e(i,{href:t(te).homepage,target:"_blank",type:"primary"},{default:o(()=>[r(K(t(te).homepage),1)]),_:1},8,["href"])]),_:1}),e(p,{label:"开源地址:"},{default:o(()=>[e(i,{href:t(te).repository.url,target:"_blank",type:"primary"},{default:o(()=>[r(K(t(te).repository.url),1)]),_:1},8,["href"])]),_:1}),e(p,{label:"作者邮箱:"},{default:o(()=>[r(K(t(te).contributors[0].email),1)]),_:1}),e(p,{label:"作者微信:"},{default:o(()=>[r(K(t(te).contributors[0].weChat),1)]),_:1})]),_:1})]),a[1]||(a[1]=s("div",null,[s("h2",{style:{"margin-top":"0"}},"最近更新")],-1)),s("div",null,[s("ol",Lo,[(f(!0),k(W,null,fe(t(c),v=>(f(),k("li",null,K(v),1))),256))])])],64)}}}),Bo={style:{"text-indent":"15px"}},zo={style:{"text-indent":"15px"}},No={style:{"text-indent":"15px"}},Oo={style:{"padding-left":"15px"}},Ko={style:{"padding-left":"15px"}},Ho={style:{"padding-left":"15px"}},Go={style:{"padding-left":"15px"}},jo=J({__name:"CommonProblem",setup(H){return(c,n)=>{const a=ne,p=Ae,i=Nt,b=ye,v=we,m=zt;return f(),V(m,null,{default:o(()=>[e(i,{title:"1、主密码忘记了怎么办？"},{default:o(()=>[e(a,{style:{"text-indent":"15px",display:"inline-block"}},{default:o(()=>[n[10]||(n[10]=r(" 很抱歉，由于密码安全机制，主密码一旦忘记没有任何办法查看密码数据。如您需要注销账号可以登录密码存储位置删除密码文件",-1)),n[11]||(n[11]=s("br",null,null,-1)),s("div",Bo,[e(a,{tag:"b"},{default:o(()=>[...n[0]||(n[0]=[r("oss：",-1)])]),_:1}),n[1]||(n[1]=r(" 请登录阿里云控制台->对象存储，删除password-xl文件夹 ",-1))]),s("div",zo,[e(a,{tag:"b"},{default:o(()=>[...n[2]||(n[2]=[r("cos：",-1)])]),_:1}),n[3]||(n[3]=r(" 请登录腾讯云控制台->对象存储，删除password-xl文件夹 ",-1))]),s("div",No,[e(a,{tag:"b"},{default:o(()=>[...n[4]||(n[4]=[r("私有服务：",-1)])]),_:1}),n[5]||(n[5]=r(" 请到服务端密码数据存储目录删除您的用户名文件夹 ",-1))]),s("div",Oo,[e(a,{tag:"b"},{default:o(()=>[...n[6]||(n[6]=[r("本地存储：",-1)])]),_:1}),n[8]||(n[8]=r(" 请到 C:\\Users\\您的用户名\\AppData\\Roaming\\password-xl目录下删除setting.json和store.json两个文件。",-1)),n[9]||(n[9]=s("br",null,null,-1)),e(a,{size:"small",type:"info"},{default:o(()=>[e(p,{type:"info"},{default:o(()=>[...n[7]||(n[7]=[r(" AppData是系统隐藏目录，可以通过地址栏输入C:\\Users\\您的用户名\\AppData\\Roaming\\password-xl直接进入文件夹 ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),e(i,{title:"2、如何私有部署password-XL？"},{default:o(()=>[e(a,null,{default:o(()=>[e(a,{size:"large"},{default:o(()=>[...n[12]||(n[12]=[r("项目分为前端和后端两个服务，您可以根据需要选择部署：",-1)])]),_:1}),n[16]||(n[16]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:o(()=>[...n[13]||(n[13]=[r("仅部署前端服务：",-1)])]),_:1}),n[17]||(n[17]=r(" 可以使用阿里云OSS、腾讯云COS、和本地存储功能",-1)),n[18]||(n[18]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:o(()=>[...n[14]||(n[14]=[r("仅部署后端服务：",-1)])]),_:1}),n[19]||(n[19]=r(" 可以使用官网提供的页面或安装程序将密码文件存储在您的私有服务中",-1)),n[20]||(n[20]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:o(()=>[...n[15]||(n[15]=[r("两个服务都部署：",-1)])]),_:1}),n[21]||(n[21]=r(" 可以使用部署的前端页面将密码文件存储在私有服务中",-1)),n[22]||(n[22]=s("br",null,null,-1))]),_:1}),n[31]||(n[31]=s("br",null,null,-1)),e(a,null,{default:o(()=>[e(a,{size:"large"},{default:o(()=>[...n[23]||(n[23]=[r("部署文档：",-1)])]),_:1}),s("div",Ko,[e(b,{href:t(te).repository.url+"/wiki/%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90docker",target:"_blank",type:"primary"},{default:o(()=>[...n[24]||(n[24]=[r(" 后端-docker部署 ",-1)])]),_:1},8,["href"]),n[28]||(n[28]=s("br",null,null,-1)),e(b,{href:t(te).repository.url+"/wiki/%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90jar",target:"_blank",type:"primary"},{default:o(()=>[...n[25]||(n[25]=[r(" 后端-jar包部署 ",-1)])]),_:1},8,["href"]),n[29]||(n[29]=s("br",null,null,-1)),e(b,{href:t(te).repository.url+"/wiki/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90docker",target:"_blank",type:"primary"},{default:o(()=>[...n[26]||(n[26]=[r(" 前端-docker部署 ",-1)])]),_:1},8,["href"]),n[30]||(n[30]=s("br",null,null,-1)),e(b,{href:t(te).repository.url+"/wiki/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3%E2%80%90nginx",target:"_blank",type:"primary"},{default:o(()=>[...n[27]||(n[27]=[r(" 前端-nginx部署 ",-1)])]),_:1},8,["href"])])]),_:1})]),_:1}),e(i,{title:"3、每次输入主密码很麻烦，可以自动解锁吗？"},{default:o(()=>[e(a,{style:{"text-indent":"15px",display:"inline-block"}},{default:o(()=>[...n[32]||(n[32]=[r("      您可以在设置-> 密码安全模块中开启自动解锁功能。 ",-1)])]),_:1})]),_:1}),e(i,{title:"4、忘记登录信息如何找回？"},{default:o(()=>[s("div",Ho,[e(a,null,{default:o(()=>[e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:o(()=>[...n[33]||(n[33]=[r("阿里云OSS：",-1)])]),_:1}),n[38]||(n[38]=r(" 您可以参考 ",-1)),e(b,{href:t(te).repository.url+"/wiki/%E9%98%BF%E9%87%8C%E4%BA%91OSS%E6%B3%A8%E5%86%8C%E6%8C%87%E5%BC%95",style:{position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:o(()=>[...n[34]||(n[34]=[r(" 阿里云OSS注册指引 ",-1)])]),_:1},8,["href"]),n[39]||(n[39]=r(" ，登录阿里云控制台重新创建子账户并在存储桶位置为账号分配权限，密码数据不会丢失",-1)),n[40]||(n[40]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:o(()=>[...n[35]||(n[35]=[r("腾讯云COS：",-1)])]),_:1}),n[41]||(n[41]=r(" 您可以参考 ",-1)),e(b,{href:t(te).repository.url+"/wiki/%E8%85%BE%E8%AE%AF%E4%BA%91COS%E6%B3%A8%E5%86%8C%E6%8C%87%E5%BC%95",style:{position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:o(()=>[...n[36]||(n[36]=[r(" 腾讯云COS注册指引 ",-1)])]),_:1},8,["href"]),n[42]||(n[42]=r(" ，登录腾讯云控制台重新创建子账户并在存储桶位置为账号分配权限，密码数据不会丢失",-1)),n[43]||(n[43]=s("br",null,null,-1)),e(a,{style:{"text-indent":"15px",display:"inline-block"},tag:"b"},{default:o(()=>[...n[37]||(n[37]=[r("私有服务：",-1)])]),_:1}),n[44]||(n[44]=r(" 您可在服务端项目部署路径下用户配置文件中查看您的登录密码。如果不是您部署项目请联系管理员",-1)),n[45]||(n[45]=s("br",null,null,-1))]),_:1})])]),_:1}),e(i,{title:"5、如何迁移密码数据？"},{default:o(()=>[s("div",Go,[e(a,{style:{"text-indent":"15px",display:"inline-block"}},{default:o(()=>[n[47]||(n[47]=r(" 您可以通过 ",-1)),e(v,null,{default:o(()=>[...n[46]||(n[46]=[r("设置->备份恢复",-1)])]),_:1}),n[48]||(n[48]=r(" 菜单下的备份恢复功能迁移密码数据。 ",-1))]),_:1})])]),_:1})]),_:1})}}}),Yo={style:{"text-align":"center","margin-bottom":"5px",width:"100%"}},Jo={style:{"text-align":"center","margin-bottom":"5px",width:"100%"}},ho={style:{"text-align":"center","margin-bottom":"15px",width:"100%"}},Wo={style:{"text-align":"center","margin-top":"50px",width:"100%"}},Xo={style:{"margin-top":"25px"}},qo={style:{padding:"0 50px 0 20px"}},Qo={style:{"text-align":"center","margin-top":"30px",width:"100%"}},Zo=J({__name:"LoginInfo",setup(H){const c=Ye(),n=()=>!!window.electronAPI,a=()=>!!window.androidAPI;return(p,i)=>{const b=ne,v=Je,m=de,_=ce,D=he,$=Be;return f(),V($,{"label-width":"80px"},{default:o(()=>[t(c).loginType==="oss"?(f(),k(W,{key:0},[s("div",Yo,[i[15]||(i[15]=s("img",{alt:"",class:"login-type-image",src:qt,style:{height:"28px"}},null,-1)),e(b,{style:{"font-size":"24px"}},{default:o(()=>[...i[14]||(i[14]=[r("阿里云OSS",-1)])]),_:1})]),e(v),s("div",null,[e(D,{label:"region"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.region,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[0]||(i[0]=P=>t(q)(t(c).loginForm.region))},{default:o(()=>[...i[16]||(i[16]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"accessKeyId"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.accessKeyId,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[1]||(i[1]=P=>t(q)(t(c).loginForm.accessKeyId))},{default:o(()=>[...i[17]||(i[17]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"accessKeySecret"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.accessKeySecret,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[2]||(i[2]=P=>t(q)(t(c).loginForm.accessKeySecret))},{default:o(()=>[...i[18]||(i[18]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"bucket"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.bucket,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[3]||(i[3]=P=>t(q)(t(c).loginForm.bucket))},{default:o(()=>[...i[19]||(i[19]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),!n()&&!a()?(f(),V(D,{key:0,label:"快速登录链接"},{default:o(()=>[e(_,{"model-value":t(ve)(t(c).loginForm),readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[4]||(i[4]=P=>t(q)(t(ve)(t(c).loginForm)))},{default:o(()=>[...i[20]||(i[20]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1})):A("",!0)])],64)):t(c).loginType==="cos"?(f(),k(W,{key:1},[s("div",Jo,[i[22]||(i[22]=s("img",{alt:"",class:"login-type-image",src:Qt,style:{height:"28px"}},null,-1)),e(b,{style:{"font-size":"24px"}},{default:o(()=>[...i[21]||(i[21]=[r("腾讯云COS",-1)])]),_:1})]),e(v),s("div",null,[e(D,{label:"region"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.region,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[5]||(i[5]=P=>t(q)(t(c).loginForm.region))},{default:o(()=>[...i[23]||(i[23]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"secretId"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.secretId,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[6]||(i[6]=P=>t(q)(t(c).loginForm.secretId))},{default:o(()=>[...i[24]||(i[24]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"secretKey"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.secretKey,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[7]||(i[7]=P=>t(q)(t(c).loginForm.secretKey))},{default:o(()=>[...i[25]||(i[25]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"bucket"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.bucket,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[8]||(i[8]=P=>t(q)(t(c).loginForm.bucket))},{default:o(()=>[...i[26]||(i[26]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),!n()&&!a()?(f(),V(D,{key:0,label:"快速登录链接"},{default:o(()=>[e(_,{"model-value":t(ve)(t(c).loginForm),readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[9]||(i[9]=P=>t(q)(t(ve)(t(c).loginForm)))},{default:o(()=>[...i[27]||(i[27]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1})):A("",!0)])],64)):t(c).loginType==="private"?(f(),k(W,{key:2},[s("div",ho,[i[29]||(i[29]=s("img",{alt:"",class:"login-type-image",src:Zt,style:{height:"28px"}},null,-1)),e(b,{style:{"font-size":"24px"}},{default:o(()=>[...i[28]||(i[28]=[r("私有服务",-1)])]),_:1})]),e(v),s("div",null,[e(D,{label:"服务地址"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.serverUrl,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[10]||(i[10]=P=>t(q)(t(c).loginForm.serverUrl))},{default:o(()=>[...i[30]||(i[30]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"用户名"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.username,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[11]||(i[11]=P=>t(q)(t(c).loginForm.username))},{default:o(()=>[...i[31]||(i[31]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(D,{label:"密码"},{default:o(()=>[e(_,{"model-value":t(c).loginForm.password,readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[12]||(i[12]=P=>t(q)(t(c).loginForm.password))},{default:o(()=>[...i[32]||(i[32]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),!n()&&!a()?(f(),V(D,{key:0,label:"快速登录链接"},{default:o(()=>[e(_,{"model-value":t(ve)(t(c).loginForm),readonly:!0},{append:o(()=>[e(m,{class:"copy-btn",onClick:i[13]||(i[13]=P=>t(q)(t(ve)(t(c).loginForm)))},{default:o(()=>[...i[33]||(i[33]=[s("span",{class:"iconfont icon-copy"},null,-1)])]),_:1})]),_:1},8,["model-value"])]),_:1})):A("",!0)])],64)):(f(),k(W,{key:3},[s("div",Wo,[i[35]||(i[35]=s("img",{alt:"",class:"login-type-image",src:eo,style:{height:"130px"}},null,-1)),s("div",Xo,[e(b,{style:{"font-size":"22px"}},{default:o(()=>[...i[34]||(i[34]=[r("您正在使用本地文件存储",-1)])]),_:1})])]),s("div",qo,[s("div",Qo,[e(b,{type:"info"},{default:o(()=>[...i[36]||(i[36]=[r("没有更多信息",-1)])]),_:1})])])],64))]),_:1})}}}),el=X(Zo,[["__scopeId","data-v-298341ca"]]),tl={class:"function-div"},ol={class:"function-header",style:{"margin-bottom":"5px"}},ll={class:"function-div"},nl={class:"function-header",style:{"margin-bottom":"5px"}},sl={class:"function-div"},al={class:"function-header"},rl={class:"function-div"},il={class:"function-header"},dl={class:"function-div"},ul={class:"function-header"},pl={style:{"margin-top":"10px"}},fl={key:0,class:"function-div"},cl={class:"function-header"},ml={class:"function-div"},gl={class:"function-header"},yl={class:"function-div"},vl={class:"function-header"},_l={class:"function-div"},wl={class:"function-header"},bl={class:"function-div"},xl={class:"function-header"},kl={class:"function-div"},Cl={class:"function-header"},Sl={class:"function-div"},Al={class:"function-header",style:{"margin-bottom":"5px"}},$l={class:"function-div"},Pl={class:"function-header"},Fl={class:"function-div"},Vl={class:"function-header",style:{"margin-bottom":"5px"}},Dl={class:"function-div"},Rl={class:"function-header"},El={class:"function-div"},Tl={class:"function-header"},Il={class:"function-div"},Ml={class:"function-header",style:{"margin-bottom":"5px"}},Ll={key:0,class:"function-div"},Ul={class:"function-header"},Bl={class:"function-div"},zl={class:"function-header"},Nl={class:"function-div"},Ol={class:"function-header"},Kl={class:"function-div",style:{display:"flex","justify-content":"space-evenly"}},Hl={class:"login-info"},Gl={class:"function-div"},jl={class:"function-header",style:{"margin-bottom":"5px"}},Yl={key:1,class:"function-div"},Jl={class:"function-header",style:{"margin-bottom":"5px"}},hl={class:"function-div"},Wl={class:"function-header",style:{"margin-bottom":"5px"}},Xl={class:"function-div"},ql={class:"function-header",style:{"margin-bottom":"5px"}},Ql={class:"function-div"},Zl={class:"function-header",style:{"margin-bottom":"5px"}},en={class:"function-div"},tn={class:"function-header",style:{"margin-bottom":"5px"}},on={class:"function-div"},ln={class:"function-header"},nn={style:{"margin-top":"10px"}},sn={class:"function-div",style:{"margin-top":"30px"}},an={class:"function-header"},rn={style:{"margin-top":"5px"}},dn={style:{padding:"0"}},un={style:{padding:"0"}},pn={style:{padding:"0 15px"}},fn=J({__name:"Setting",setup(H,{expose:c}){const n=Q(),a=ie(),p=Ye(),i=le(),b=z(!1),v=z(ue.AUTO),m=()=>{console.log("打开设置");let u=localStorage.getItem("topicMode");u?v.value=u:v.value=ue.AUTO,a.visSetting=!0,b.value=!1},_=()=>{console.log("关闭设置"),a.visSetting=!1},D=()=>["xs","sm"].includes(Y().value)?"calc(100vh - 120px)":"500px",$=()=>{if(console.log("设置，自动登录状态改变前钩子"),a.setting.autoUnlock)return Promise.resolve(!0);let u=`为了您的账号安全，建议您不要开启记住主密码功能。开启后任何人打开您设备的password-XL时，都可以直接访问解锁后的密码列表，极大地增加了密码泄露的风险。
如您仍需开启此功能，请务必妥善保存并牢记您的主密码。当您更换设备或浏览器指纹发生变更时，仍需您手动登录并使用主密码解锁。`;return new Promise(async l=>{console.log("设置，显示重要安全提示"),ke({title:"重要安全提示",message:ht("div",{class:"el-alert el-alert--error is-light",style:"text-indent: 20px;"},u),showConfirmButton:!0,confirmButtonText:"确认开启",confirmButtonClass:"el-button--danger"}).then(()=>{console.log("设置，显示重要安全提示，验证身份"),i.verifyPasswordRef.getAndVerify(d=>n.passwordManager.verifyPassword(d)).then(d=>{l(!0),console.log("设置，保存自动解锁主密码"),localStorage.setItem("mainPassword",$t(Pt(),d))})}).catch(()=>l(!1))})},P=()=>{if(console.log("设置，回收站状态改变前钩子"),!a.setting.enableRecycleBin||!n.deletedArray.length)return Promise.resolve(!0);let u="关闭回收站将立即清空回收站中所有密码";return new Promise(async(l,d)=>{ke({message:u,showConfirmButton:!0,confirmButtonText:"清空",type:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonClass:"el-button--danger"}).then(()=>{console.log("设置，回收站状态改变前钩子，确认"),l(!0)}).catch(()=>{console.log("设置，回收站状态改变前钩子，取消"),d()})})},E=u=>(console.log("设置，切换标签之前的钩子函数 activeName：",u," loginStore.loginType：",p.loginType),b.value?Promise.resolve(!0):u==="loginInfo"&&!["local","electron"].includes(p.loginType)?(console.log("设置，切换登录信息，验证密码"),new Promise((l,d)=>{i.verifyPasswordRef.getAndVerify(y=>n.passwordManager.verifyPassword(y)).then(()=>{l(!0),console.log("设置，切换登录信息，验证密码通过"),b.value=!0}).catch(y=>{console.error("设置，切换登录信息，验证密码异常",y),d()})})):Promise.resolve(!0));c({openSetting:m,closeSetting:_}),h(()=>a.setting.showLabelCard,u=>{a.visSetting&&(console.log("显示标签卡片设置变更:",u),n.passwordManager.syncSetting().then(l=>{l.status&&i.labelTreeRef?.setCheckedNodes([])}))}),h(()=>a.setting.showNote,u=>{a.visSetting&&(console.log("启用笔记功能设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.dynamicBackground,u=>{a.visSetting&&(console.log("动态背景图设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.showFavoriteCard,u=>{a.visSetting&&(console.log("显示收藏卡片设置变更:",u),n.passwordManager.syncSetting().then(l=>{l.status&&(n.filterCondition.favoriteId=0)}))}),h(()=>a.setting.enableRecycleBin,(u,l)=>{a.visSetting&&(console.log("密码回收站设置变更:",u,l),n.passwordManager.syncSetting().then(d=>{d.status&&(u||n.passwordManager.emptyRecycle())}))}),h(()=>a.setting.enableShortcutKey,u=>{a.visSetting&&(console.log("快捷键设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.sortField,u=>{a.visSetting&&(console.log("排序字段设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.sortOrder,u=>{a.visSetting&&(console.log("排序顺序设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.showLabelForTable,u=>{a.visSetting&&(console.log("密码列表中显示标签设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.enableAiAdd,u=>{a.visSetting&&(console.log("AI创建密码设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.showTimeForTable,u=>{a.visSetting&&(console.log("密码列表中显示时间设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.showStrength,u=>{a.visSetting&&(console.log("显示密码强度设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.timeoutLock,u=>{a.visSetting&&(console.log("超时锁定设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.autoLogin,u=>{a.visSetting&&(console.log("自动登录设置变更:",u),n.passwordManager.syncSetting().then(l=>{l.status&&(u?se.success({title:"已开启自动登录",message:"在您下次登录时将系统将记住登录信息！"}):(console.log("自动登录设置变更 同步后"),sessionStorage.removeItem("loginInfo"),localStorage.removeItem("loginInfo"),se.success({title:"已关闭自动登录",message:"自动登录信息已清除！"}),a.setting.autoUnlock=!1))}))}),h(()=>a.setting.autoUnlock,u=>{a.visSetting&&(console.log("自动解锁设置变更:",u),n.passwordManager.syncSetting().then(l=>{l.status&&(u?(a.setting.autoLogin=!0,Z.success("已开启自动解锁"),a.setting.timeoutLock=0):(localStorage.removeItem("mainPassword"),Z.success("已清除主密码信息")))}))}),h(()=>a.setting.verifyShowGesture,u=>{a.visSetting&&(console.log("验证密码显示手势设置变更:",u),n.passwordManager.syncSetting(),localStorage.setItem("showGesture",u+""))}),h(()=>v.value,u=>{a.visSetting&&(console.log("主题设置变更:",u),n.setTopicMode(u))});let O=null;h(()=>a.setting.easyConfuseChat,u=>{a.visSetting&&(O&&clearTimeout(O),O=setTimeout(()=>{console.log("易混淆字符设置变更:",u),n.passwordManager.syncSetting()},300))}),h(()=>a.setting.autoGeneratePassword,u=>{a.visSetting&&(console.log("自动生成密码设置变更:",u),n.passwordManager.syncSetting())}),h(()=>a.setting.passwordColor,u=>{a.visSetting&&(console.log("显示密码颜色设置变更:",u),n.passwordManager.syncSetting())});let N=null;h(()=>a.setting.generateRule,u=>{a.visSetting&&(N&&clearTimeout(N),N=setTimeout(()=>{console.log("默认密码生成规则设置变更:",u),n.passwordManager.syncSetting()},300))},{deep:!0});const T=()=>!!window.androidAPI;return(u,l)=>{const d=ne,y=Kt,x=Ot,g=Je,L=Ht,S=ce,w=pt,U=Se,M=ft,C=Ce,F=ze,G=ut,B=we,pe=Ae,ae=de,Ne=el,Oe=ye,Pe=jo,Ke=Uo,Fe=Io,He=yo,Ge=dt,I=Be,xe=ge;return f(),V(xe,{modelValue:t(a).visSetting,"onUpdate:modelValue":l[31]||(l[31]=R=>t(a).visSetting=R),fullscreen:["xs","sm"].includes(t(Y)().value),draggable:"",width:"750px"},{header:o(()=>[e(d,{size:"large",style:{"user-select":"none"}},{default:o(()=>[...l[32]||(l[32]=[s("span",{class:"iconfont icon-setting"},null,-1),r(" 设置 ",-1)])]),_:1})]),default:o(()=>[e(I,{model:t(a).setting,"label-position":"right","label-width":"140px"},{default:o(()=>[e(Ge,{"before-leave":E,style:{"margin-top":"10px"},"tab-position":"left"},{default:o(()=>[e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[33]||(l[33]=[s("span",{class:"iconfont icon-personalization action-icon",style:{color:"#FF5733"}},null,-1),s("span",{style:{"letter-spacing":"3px"}}," 个性化",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",tl,[s("div",ol,[e(d,{tag:"b"},{default:o(()=>[...l[34]||(l[34]=[r("主题",-1)])]),_:1}),e(x,{modelValue:t(v),"onUpdate:modelValue":l[0]||(l[0]=R=>re(v)?v.value=R:null),size:"small",style:{width:"100px"}},{default:o(()=>[e(y,{value:t(ue).AUTO,label:"跟随系统"},null,8,["value"]),e(y,{value:t(ue).LIGHT,label:"明亮主题"},null,8,["value"]),e(y,{value:t(ue).DARK,label:"深色主题"},null,8,["value"])]),_:1},8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[35]||(l[35]=[r(" 您可以根据个人喜好选择明亮或深色主题，也可以设置为跟随系统 ",-1)])]),_:1})]),s("div",ll,[s("div",nl,[e(d,{tag:"b"},{default:o(()=>[...l[36]||(l[36]=[r("显示背景图",-1)])]),_:1}),e(L,{modelValue:t(a).setting.dynamicBackground,"onUpdate:modelValue":l[1]||(l[1]=R=>t(a).setting.dynamicBackground=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[37]||(l[37]=[r(" 用于控制是否显示首页动态背景图，若浏览器卡顿您可以关闭动态背景图 ",-1)])]),_:1})]),s("div",sl,[s("div",al,[e(d,{tag:"b"},{default:o(()=>[...l[38]||(l[38]=[r("易混淆字符",-1)])]),_:1}),e(S,{modelValue:t(a).setting.easyConfuseChat,"onUpdate:modelValue":l[2]||(l[2]=R=>t(a).setting.easyConfuseChat=R),size:"small",style:{width:"100px"}},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[39]||(l[39]=[r(" 随机生成密码时将不会使用配置的易混淆字符 ",-1)])]),_:1})]),s("div",rl,[s("div",il,[e(d,{tag:"b"},{default:o(()=>[...l[40]||(l[40]=[r("自动生成密码",-1)])]),_:1}),e(L,{modelValue:t(a).setting.autoGeneratePassword,"onUpdate:modelValue":l[3]||(l[3]=R=>t(a).setting.autoGeneratePassword=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[41]||(l[41]=[r(" 当您添加密码时是否希望系统使用默认规则自动生成一个密码 ",-1)])]),_:1})]),s("div",dl,[s("div",ul,[e(d,{tag:"b"},{default:o(()=>[...l[42]||(l[42]=[r("随机密码生成规则",-1)])]),_:1})]),e(g,{class:"function-line"}),s("div",pl,[s("div",null,[e(C,null,{default:o(()=>[e(U,{md:{span:10},sm:{span:24},style:{"margin-bottom":"10px","text-align":"center"}},{default:o(()=>[e(w,{modelValue:t(a).setting.generateRule.uppercase,"onUpdate:modelValue":l[4]||(l[4]=R=>t(a).setting.generateRule.uppercase=R),border:"",label:"大写",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"]),e(w,{modelValue:t(a).setting.generateRule.lowercase,"onUpdate:modelValue":l[5]||(l[5]=R=>t(a).setting.generateRule.lowercase=R),border:"",label:"小写",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"]),e(w,{modelValue:t(a).setting.generateRule.number,"onUpdate:modelValue":l[6]||(l[6]=R=>t(a).setting.generateRule.number=R),border:"",label:"数字",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"]),e(w,{modelValue:t(a).setting.generateRule.symbol,"onUpdate:modelValue":l[7]||(l[7]=R=>t(a).setting.generateRule.symbol=R),border:"",label:"符号",size:"small",style:{margin:"5px 15px"}},null,8,["modelValue"])]),_:1}),e(U,{md:{span:10},sm:{span:24},style:{"text-align":"center"}},{default:o(()=>[l[43]||(l[43]=s("span",null,"密码长度",-1)),e(M,{modelValue:t(a).setting.generateRule.length,"onUpdate:modelValue":l[8]||(l[8]=R=>t(a).setting.generateRule.length=R),max:32,min:4,size:"small",style:{"margin-top":"10px"}},null,8,["modelValue"])]),_:1})]),_:1})])])])]),_:1},8,["height"])]),_:1}),e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[44]||(l[44]=[s("span",{class:"iconfont icon-function action-icon",style:{color:"#FF33FF"}},null,-1),r(" 功能管理 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[t(Re)()?(f(),k("div",fl,[s("div",cl,[e(d,{tag:"b"},{default:o(()=>[...l[45]||(l[45]=[r("启用AI创建",-1)])]),_:1}),e(L,{modelValue:t(a).setting.enableAiAdd,"onUpdate:modelValue":l[9]||(l[9]=R=>t(a).setting.enableAiAdd=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[46]||(l[46]=[r(" 在首页启用AI创建密码，AI创建可以把包含账号信息的文本解析成结构化的密码。 ",-1)])]),_:1})])):A("",!0),s("div",ml,[s("div",gl,[e(d,{tag:"b"},{default:o(()=>[...l[47]||(l[47]=[r("显示标签卡片",-1)])]),_:1}),e(L,{modelValue:t(a).setting.showLabelCard,"onUpdate:modelValue":l[10]||(l[10]=R=>t(a).setting.showLabelCard=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[48]||(l[48]=[r(" 显示标签卡片后，您可以在首页方便地管理所有标签，并使用标签功能筛选密码列表。 ",-1)])]),_:1})]),s("div",yl,[s("div",vl,[e(d,{tag:"b"},{default:o(()=>[...l[49]||(l[49]=[r("在标题栏显示笔记功能入口",-1)])]),_:1}),e(L,{modelValue:t(a).setting.showNote,"onUpdate:modelValue":l[11]||(l[11]=R=>t(a).setting.showNote=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[50]||(l[50]=[r(" 启用笔记功能后可在首页进入笔记页面，如果需要记录图片请确保对象存储服务开启外网访问权限，否则图片无法正常显示。 ",-1)])]),_:1})]),s("div",_l,[s("div",wl,[e(d,{tag:"b"},{default:o(()=>[...l[51]||(l[51]=[r("显示收藏卡片",-1)])]),_:1}),e(L,{modelValue:t(a).setting.showFavoriteCard,"onUpdate:modelValue":l[12]||(l[12]=R=>t(a).setting.showFavoriteCard=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[52]||(l[52]=[r(" 显示收藏卡片后，您可以在首页查看所有已收藏的密码，点击密码名称即可在密码列表中显示。 ",-1)])]),_:1})]),s("div",bl,[s("div",xl,[e(d,{tag:"b"},{default:o(()=>[...l[53]||(l[53]=[r("密码回收站",-1)])]),_:1}),e(L,{modelValue:t(a).setting.enableRecycleBin,"onUpdate:modelValue":l[13]||(l[13]=R=>t(a).setting.enableRecycleBin=R),"before-change":P},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[54]||(l[54]=[r(" 开启密码回收站后，已删除的密码将会被保存至回收站，您可以选择永久删除或恢复。 ",-1)])]),_:1})]),s("div",kl,[s("div",Cl,[e(d,{tag:"b"},{default:o(()=>[...l[55]||(l[55]=[r("快捷键",-1)])]),_:1}),e(L,{modelValue:t(a).setting.enableShortcutKey,"onUpdate:modelValue":l[14]||(l[14]=R=>t(a).setting.enableShortcutKey=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[l[61]||(l[61]=r(" 锁定/解锁： ",-1)),e(B,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:o(()=>[...l[56]||(l[56]=[r("Alt + L",-1)])]),_:1}),l[62]||(l[62]=r(" 搜索： ",-1)),e(B,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:o(()=>[...l[57]||(l[57]=[r("Ctrl + F",-1)])]),_:1}),l[63]||(l[63]=r(" 创建： ",-1)),e(B,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:o(()=>[...l[58]||(l[58]=[r("Alt + N",-1)])]),_:1}),l[64]||(l[64]=r(" 保存： ",-1)),e(B,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:o(()=>[...l[59]||(l[59]=[r("Ctrl + S",-1)])]),_:1}),l[65]||(l[65]=r(" 聚焦搜索： ",-1)),e(B,{size:"small",style:{"text-indent":"0","margin-right":"10px"},type:"primary"},{default:o(()=>[...l[60]||(l[60]=[r("/",-1)])]),_:1})]),_:1})]),e(pe,{closable:!1,"show-icon":"",title:"若您需要更多密码显示空间，可以选择关闭标签和收藏卡片并在更多功能中使用。",type:"info"})]),_:1},8,["height"])]),_:1}),e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[66]||(l[66]=[s("span",{class:"iconfont icon-display action-icon",style:{color:"#00e329"}},null,-1),r(" 密码显示 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",Sl,[s("div",Al,[e(d,{tag:"b"},{default:o(()=>[...l[67]||(l[67]=[r("密码排序",-1)])]),_:1}),s("div",null,[e(x,{modelValue:t(a).setting.sortField,"onUpdate:modelValue":l[15]||(l[15]=R=>t(a).setting.sortField=R),size:"small",style:{width:"90px"}},{default:o(()=>[e(y,{label:"添加时间",value:"addTime"}),e(y,{label:"修改时间",value:"updateTime"}),e(y,{label:"密码强度",value:"strength"}),e(y,{label:"密码名称",value:"title"}),e(y,{label:"登录名",value:"username"}),e(y,{label:"收藏",value:"favorite"})]),_:1},8,["modelValue"]),e(x,{modelValue:t(a).setting.sortOrder,"onUpdate:modelValue":l[16]||(l[16]=R=>t(a).setting.sortOrder=R),size:"small",style:{width:"65px","margin-left":"5px"}},{default:o(()=>[e(y,{value:t(Ee).ASC,label:"正序"},null,8,["value"]),e(y,{value:t(Ee).DESC,label:"倒序"},null,8,["value"])]),_:1},8,["modelValue"])])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[68]||(l[68]=[r(" 此选项用于设置密码默认排序规则。您也可以通过点击密码列表中的小箭头进行临时排序，临时排序会在页面刷新后重置。 ",-1)])]),_:1})]),s("div",$l,[s("div",Pl,[e(d,{tag:"b"},{default:o(()=>[...l[69]||(l[69]=[r("在密码列表中显示标签",-1)])]),_:1}),e(L,{modelValue:t(a).setting.showLabelForTable,"onUpdate:modelValue":l[17]||(l[17]=R=>t(a).setting.showLabelForTable=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[70]||(l[70]=[r(" 此选项用于设置是否在密码列表中显示标签列，显示标签将会占用更多空间，您可根据需要开启。 ",-1)])]),_:1})]),s("div",Fl,[s("div",Vl,[e(d,{tag:"b"},{default:o(()=>[...l[71]||(l[71]=[r("在密码列表中显示时间",-1)])]),_:1}),e(x,{modelValue:t(a).setting.showTimeForTable,"onUpdate:modelValue":l[18]||(l[18]=R=>t(a).setting.showTimeForTable=R),size:"small",style:{width:"100px"}},{default:o(()=>[e(y,{label:"不显示时间",value:"no"}),e(y,{label:"显示添加时间",value:"addTime"}),e(y,{label:"显示修改时间",value:"updateTime"})]),_:1},8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[72]||(l[72]=[r(" 此选项用于设置是否在密码列表中显示时间，显示时间将会占用更多空间，您可根据需要开启。 ",-1)])]),_:1})]),s("div",Dl,[s("div",Rl,[e(d,{tag:"b"},{default:o(()=>[...l[73]||(l[73]=[r("显示密码强度",-1)])]),_:1}),e(L,{modelValue:t(a).setting.showStrength,"onUpdate:modelValue":l[19]||(l[19]=R=>t(a).setting.showStrength=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[74]||(l[74]=[r(" 我们根据密码组成将密码分为弱、中、强3个等级，分别用颜色 ",-1),s("div",{class:"password-strength",style:{"background-color":"#F56C6C"}},null,-1),s("div",{class:"password-strength",style:{"background-color":"#FF9700"}},null,-1),s("div",{class:"password-strength",style:{"background-color":"#67C23A"}},null,-1),r(" 表示，若您不喜欢此功能可在此关闭。 ",-1)])]),_:1})]),s("div",El,[s("div",Tl,[e(d,{tag:"b"},{default:o(()=>[...l[75]||(l[75]=[r("密码颜色",-1)])]),_:1}),e(L,{modelValue:t(a).setting.passwordColor,"onUpdate:modelValue":l[20]||(l[20]=R=>t(a).setting.passwordColor=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[76]||(l[76]=[r(" 开启此功能后您可以在创建密码时选择密码颜色，并在卡片或表格中显示 ",-1)])]),_:1})])]),_:1},8,["height"])]),_:1}),e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[77]||(l[77]=[s("span",{class:"iconfont icon-verify action-icon",style:{color:"#33CFFF"}},null,-1),r(" 密码安全 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",Il,[s("div",Ml,[e(d,{tag:"b"},{default:o(()=>[...l[78]||(l[78]=[r("超时锁定",-1)])]),_:1}),e(x,{modelValue:t(a).setting.timeoutLock,"onUpdate:modelValue":l[21]||(l[21]=R=>t(a).setting.timeoutLock=R),disabled:t(a).setting.autoUnlock,title:t(a).setting.autoUnlock?"已开启自动解锁无法设置自动锁定":"",size:"small",style:{width:"100px"}},{default:o(()=>[e(y,{value:0,label:"永不超时"}),e(y,{value:30,label:"30秒"}),e(y,{value:60,label:"1分钟"}),e(y,{value:300,label:"5分钟"}),e(y,{value:600,label:"10分钟"}),e(y,{value:1800,label:"30分钟"}),e(y,{value:3600,label:"1小时"}),e(y,{value:14400,label:"4小时"}),e(y,{value:28800,label:"8小时"}),e(y,{value:43200,label:"12小时"})]),_:1},8,["modelValue","disabled","title"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[79]||(l[79]=[r(" 系统将在此时间后自动锁定密码列表。 ",-1)])]),_:1})]),t(p).loginType!=="local"?(f(),k("div",Ll,[s("div",Ul,[e(d,{tag:"b"},{default:o(()=>[...l[80]||(l[80]=[r("自动登录",-1)])]),_:1}),e(L,{modelValue:t(a).setting.autoLogin,"onUpdate:modelValue":l[22]||(l[22]=R=>t(a).setting.autoLogin=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[81]||(l[81]=[r(" 开启自动登录功能后，系统会将您的登录信息通过浏览器指纹加密后存储在浏览器中。当您再次打开password-XL并成功验证主密码时，系统会自动登录。 ",-1)])]),_:1})])):A("",!0),s("div",Bl,[s("div",zl,[e(d,{tag:"b"},{default:o(()=>[...l[82]||(l[82]=[r("自动解锁",-1)])]),_:1}),e(L,{modelValue:t(a).setting.autoUnlock,"onUpdate:modelValue":l[23]||(l[23]=R=>t(a).setting.autoUnlock=R),"before-change":$},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[83]||(l[83]=[r(" 开启自动解锁功能后，系统会将您的主密码通过浏览器指纹加密后存储在浏览器中。当您再次打开password-XL时，系统会自动登录并使用主密码解锁。 ",-1)])]),_:1})]),s("div",Nl,[s("div",Ol,[e(d,{tag:"b"},{default:o(()=>[...l[84]||(l[84]=[r("验证密码时显示手势",-1)])]),_:1}),e(L,{modelValue:t(a).setting.verifyShowGesture,"onUpdate:modelValue":l[24]||(l[24]=R=>t(a).setting.verifyShowGesture=R)},null,8,["modelValue"])]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[85]||(l[85]=[r(" 当您使用手势密码时可以在此配置是否显示手势滑动轨迹。 ",-1)])]),_:1})]),s("div",Kl,[e(ae,{plain:"",type:"primary",onClick:t(i).setPasswordRef.setMainPassword},{default:o(()=>[...l[86]||(l[86]=[r("修改主密码",-1)])]),_:1},8,["onClick"]),e(ae,{type:"danger",onClick:t(i).cancelAccountRef.showCloseAccount},{default:o(()=>[...l[87]||(l[87]=[r("注销账户",-1)])]),_:1},8,["onClick"])])]),_:1},8,["height"])]),_:1}),e(G,{name:"loginInfo"},{label:o(()=>[e(d,null,{default:o(()=>[...l[88]||(l[88]=[s("span",{class:"iconfont icon-info action-icon",style:{color:"#409EFF"}},null,-1),r(" 登录信息 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",Hl,[e(Ne)])]),_:1},8,["height"])]),_:1}),T()?A("",!0):(f(),V(G,{key:0},{label:o(()=>[e(d,null,{default:o(()=>[...l[89]||(l[89]=[s("span",{class:"iconfont icon-recovery action-icon",style:{color:"#ffc400"}},null,-1),r(" 备份恢复 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[t(Re)()?(f(),V(pe,{key:0,style:{"margin-bottom":"10px"},type:"success"},{default:o(()=>[...l[90]||(l[90]=[r("AI批量导入功能已上线，可以快速导入已有密码，欢迎体验!",-1)])]),_:1})):A("",!0),e(pe,{style:{"margin-bottom":"10px"},type:"warning"},{default:o(()=>[...l[91]||(l[91]=[r("笔记数据不会被备份或导出，请注意",-1)])]),_:1}),s("div",Gl,[s("div",jl,[e(d,{tag:"b"},{default:o(()=>[...l[92]||(l[92]=[r("备份密码",-1)])]),_:1}),e(ae,{plain:"",size:"small",type:"primary",onClick:l[25]||(l[25]=R=>t(i).backupAndRecoveryRef.backup(!1))},{default:o(()=>[...l[93]||(l[93]=[r("备份 ",-1)])]),_:1})]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[l[95]||(l[95]=r(" 密码备份功能可以安全的将加密后的密码文件导出，在需要时通过 ",-1)),e(d,null,{default:o(()=>[...l[94]||(l[94]=[r("恢复备份密码",-1)])]),_:1}),l[96]||(l[96]=r(" 功能还原。 ",-1))]),_:1})]),t(Re)()?(f(),k("div",Yl,[s("div",Jl,[e(d,{tag:"b"},{default:o(()=>[...l[97]||(l[97]=[r("AI批量导入",-1)])]),_:1}),e(ae,{plain:"",size:"small",type:"primary",onClick:l[26]||(l[26]=R=>t(i).aiImportRef.batchImport())},{default:o(()=>[...l[98]||(l[98]=[r("导入 ",-1)])]),_:1})]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[99]||(l[99]=[r(" AI导入功能支持批量导入非结构化密码，例如从一段文本中导入多个密码 ",-1)])]),_:1})])):A("",!0),s("div",hl,[s("div",Wl,[e(d,{tag:"b"},{default:o(()=>[...l[100]||(l[100]=[r("恢复备份密码",-1)])]),_:1}),e(ae,{plain:"",size:"small",type:"primary",onClick:l[27]||(l[27]=R=>t(i).backupAndRecoveryRef.recovery())},{default:o(()=>[...l[101]||(l[101]=[r("恢复 ",-1)])]),_:1})]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[102]||(l[102]=[r(" 此功能可以将备份文件中的密码恢复到密码列表。在验证备份文件的主密码后，您可以选择合并或覆盖方式恢复密码。 ",-1)])]),_:1})]),s("div",Xl,[s("div",ql,[e(d,{tag:"b"},{default:o(()=>[...l[103]||(l[103]=[r("导出密码",-1)])]),_:1}),e(ae,{plain:"",size:"small",type:"primary",onClick:l[28]||(l[28]=R=>t(i).exportExcelRef.exportExcel(!1))},{default:o(()=>[...l[104]||(l[104]=[r("导出 Excel ",-1)])]),_:1})]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[105]||(l[105]=[r(" 导出密码会将敏感信息明文存储在excel表格中，请注意密码安全。若您仅需要迁移账号或备份密码建议使用密码备份与恢复功能更加高效安全。 ",-1)])]),_:1})]),s("div",Ql,[s("div",Zl,[e(d,{tag:"b"},{default:o(()=>[...l[106]||(l[106]=[r("导入密码",-1)])]),_:1}),e(ae,{plain:"",size:"small",type:"primary",onClick:l[29]||(l[29]=R=>t(i).importExcelRef&&t(i).importExcelRef.importExcel())},{default:o(()=>[...l[107]||(l[107]=[r("导入 Excel ",-1)])]),_:1})]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[...l[108]||(l[108]=[r(" 密码导入功能支持按照密码模板导入excel文件中的密码，您可以通过下载模板功能获取密码模板。 ",-1)])]),_:1})]),s("div",en,[s("div",tn,[e(d,{tag:"b"},{default:o(()=>[...l[109]||(l[109]=[r("下载导入模板",-1)])]),_:1}),e(ae,{plain:"",size:"small",type:"primary",onClick:l[30]||(l[30]=R=>t(i).exportExcelRef&&t(i).exportExcelRef.exportExcel(!0))},{default:o(()=>[...l[110]||(l[110]=[r("下载 ",-1)])]),_:1})]),e(g,{class:"function-line"}),e(d,{style:{"text-indent":"10px"},tag:"p",type:"info"},{default:o(()=>[l[112]||(l[112]=r(" 您可在下载的Excel模板中按照要求填写您的密码列表（ ",-1)),e(d,{type:"danger"},{default:o(()=>[...l[111]||(l[111]=[r("密码名称为必填",-1)])]),_:1}),l[113]||(l[113]=r(" ），然后使用密码导入功能导入您的密码。 ",-1))]),_:1})])]),_:1},8,["height"])]),_:1})),e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[114]||(l[114]=[s("span",{class:"iconfont icon-problem action-icon",style:{color:"#FF69B4"}},null,-1),r(" 问题反馈 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",on,[s("div",ln,[e(d,{tag:"b"},{default:o(()=>[...l[115]||(l[115]=[r("建议反馈",-1)])]),_:1})]),e(g,{class:"function-line"}),s("div",nn,[e(d,{style:{"text-indent":"10px"},tag:"p"},{default:o(()=>[l[117]||(l[117]=r(" 您的建议是我们不断进步的动力，您可以在此项目 ",-1)),e(Oe,{href:t(te).repository.url+"/issues",style:{position:"relative",top:"-2px"},target:"_blank",type:"primary"},{default:o(()=>[...l[116]||(l[116]=[r("开源地址 ",-1)])]),_:1},8,["href"]),l[118]||(l[118]=r(" 中留下您遇到的问题或提出宝贵的建议。 ",-1))]),_:1})])]),s("div",sn,[s("div",an,[e(d,{tag:"b"},{default:o(()=>[...l[119]||(l[119]=[r("常见问题",-1)])]),_:1})]),s("div",rn,[e(Pe)])])]),_:1},8,["height"])]),_:1}),e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[120]||(l[120]=[s("span",{class:"iconfont icon-about action-icon",style:{color:"#FF4500"}},null,-1),r(" 关于项目 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",dn,[e(Ke)])]),_:1},8,["height"])]),_:1}),e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[121]||(l[121]=[s("span",{class:"iconfont icon-coffee action-icon",style:{color:"#FF5858FF"}},null,-1),r(" 支持我们 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",un,[e(Fe)])]),_:1},8,["height"])]),_:1}),e(G,null,{label:o(()=>[e(d,null,{default:o(()=>[...l[122]||(l[122]=[s("span",{class:"iconfont icon-copyright action-icon",style:{color:"#FF8C00"}},null,-1),r(" 版权声明 ",-1)])]),_:1})]),default:o(()=>[e(F,{height:D()},{default:o(()=>[s("div",pn,[e(He)])]),_:1},8,["height"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","fullscreen"])}}}),cn=X(fn,[["__scopeId","data-v-1390986a"]]),mn={key:0,style:{"margin-top":"10px","text-align":"center"}},gn=J({__name:"SetPassword",setup(H,{expose:c}){const n=Q(),a=Ye(),p=le(),i=z(),b=z(),v=z(),m=z(!1),_=z(JSON.parse(JSON.stringify(n.mainPasswordType))),D=z(""),$=z(""),P=Ie({firstMainPassword:"",secondMainPassword:""}),E=Ie({firstMainPassword:[{required:!0,message:"请输入主密码",trigger:"blur"}],secondMainPassword:[{required:!0,message:"请再次输入主密码",trigger:"blur"}]}),O=()=>{console.log("进入设置密码"),P.firstMainPassword="",P.secondMainPassword="",$.value="",n.serviceStatus===j.WAIT_INIT?(console.log("设置密码，初始化主密码"),m.value=!0):(console.log("设置密码，先验证当前密码是否正确"),p.verifyPasswordRef.getAndVerify(d=>n.passwordManager.verifyPassword(d)).then(d=>{D.value=d,m.value=!0,console.log("设置密码，验证当前密码是否正确 通过")}))},N=d=>{console.log("设置密码，标准主密码 确认"),d.validate(y=>{if(y){if(P.firstMainPassword!==P.secondMainPassword){console.log("设置密码，标准主密码 两次输入的密码不一致"),Z.error("两次输入的密码不一致");return}if(P.firstMainPassword===D.value){console.log("设置密码，标准主密码 新密码与原密码一致"),Z.error("新密码与原密码一致");return}n.serviceStatus===j.WAIT_INIT?u(P.firstMainPassword):l(P.firstMainPassword)}})},T=d=>{if(console.log("设置密码，手势主密码 绘制完成事件"),!$.value){console.log("设置密码，手势主密码 第一次绘制"),$.value=d;return}if(!(d.length<5)){if($.value!==d){$.value="",Z.warning("两次绘制的密码不一致");return}if($.value===D.value){$.value="",console.log("设置密码，手势主密码 新密码与原密码一致"),Z.error("新密码与原密码一致");return}n.serviceStatus===j.WAIT_INIT?u($.value):l($.value)}},u=d=>{console.log("设置密码，输入完成 初始化主密码"),n.loading(),n.passwordManager.initMainPassword(_.value,d).then(y=>{y.status?(m.value=!1,console.log("设置密码，设置成功"),Z.success("设置成功"),a.setAutoLoginInfo(d)):(console.log("设置密码，设置失败 ",y.message),Z.error(y.message)),n.unloading()}).catch(()=>{n.unloading()})},l=d=>{console.log("设置密码，输入完成 修改主密码"),n.passwordManager.updateMainPassword(D.value,_.value,d).then(y=>{y.status?(m.value=!1,a.setAutoLoginInfo(d),console.log("设置密码，修改成功"),Z.success("修改成功")):(console.log("设置密码，修改失败：",y.message),Z.error(y.message)),n.unloading()}).catch(()=>{n.unloading()})};return h(_,()=>{i.value?.clearValidate()}),c({setMainPassword:O}),(d,y)=>{const x=ne,g=Ae,L=ce,S=he,w=Be,U=ut,M=Ft,C=dt,F=de,G=ge;return f(),V(G,{modelValue:t(m),"onUpdate:modelValue":y[7]||(y[7]=B=>re(m)?m.value=B:null),"close-on-click-modal":!1,"close-on-press-escape":t(n).serviceStatus!==t(j).WAIT_INIT,"show-close":t(n).serviceStatus!==t(j).WAIT_INIT,width:["xs"].includes(t(Y)().value)?"95%":"550px",onOpen:y[8]||(y[8]=B=>t(i)?.resetFields()),onOpened:y[9]||(y[9]=B=>t(b)?.focus())},Wt({header:o(()=>[e(x,{size:"large",style:{"user-select":"none"}},{default:o(()=>[...y[10]||(y[10]=[s("span",{class:"iconfont icon-verify"},null,-1),r(" 设置主密码 ",-1)])]),_:1})]),default:o(()=>[e(g,{closable:!1,"show-icon":"",style:{"margin-top":"10px"},title:"主密码一旦遗忘，所有密码均无法找回！请慎重设置您的主密码。",type:"warning"}),e(C,{modelValue:t(_),"onUpdate:modelValue":y[5]||(y[5]=B=>re(_)?_.value=B:null),style:{"margin-top":"15px"},type:"card"},{default:o(()=>[e(U,{name:t(Ve).STANDARD,label:"标准密码"},{default:o(()=>[e(w,{ref_key:"setPasswordFormRef",ref:i,model:t(P),rules:t(E),"label-width":"80px",style:{width:"300px",margin:"20px auto"},onSubmit:y[4]||(y[4]=_t(()=>{},["prevent"]))},{default:o(()=>[e(S,{label:"主密码",prop:"firstMainPassword"},{default:o(()=>[e(L,{ref_key:"firstPasswordInputRef",ref:b,modelValue:t(P).firstMainPassword,"onUpdate:modelValue":y[0]||(y[0]=B=>t(P).firstMainPassword=B),autocomplete:"new-password",placeholder:"请输入主密码","show-password":"",type:"password",onKeyup:y[1]||(y[1]=Me(B=>t(v).focus(),["enter","native"]))},null,8,["modelValue"])]),_:1}),e(S,{label:"确认密码",prop:"secondMainPassword",style:{"padding-top":"10px"}},{default:o(()=>[e(L,{ref_key:"secondMainPasswordRef",ref:v,modelValue:t(P).secondMainPassword,"onUpdate:modelValue":y[2]||(y[2]=B=>t(P).secondMainPassword=B),autocomplete:"new-password",placeholder:"请再次输入主密码","show-password":"",type:"password",onKeyup:y[3]||(y[3]=Me(B=>N(t(i)),["enter","native"]))},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["name"]),e(U,{disabled:t(n).globalLoading.vis,name:t(Ve).GESTURE,label:"手势密码"},{default:o(()=>[t(_)===t(Ve).GESTURE?(f(),k("div",mn,[t($)?(f(),V(x,{key:1},{default:o(()=>[...y[12]||(y[12]=[r("请再次绘制手势密码",-1)])]),_:1})):(f(),V(x,{key:0},{default:o(()=>[...y[11]||(y[11]=[r("请绘制手势密码",-1)])]),_:1})),e(M,{style:{width:"350px",margin:"0 auto"},onComplete:T})])):A("",!0)]),_:1},8,["disabled","name"])]),_:1},8,["modelValue"])]),_:2},[t(_)===t(Ve).STANDARD?{name:"footer",fn:o(()=>[e(F,{disabled:t(n).globalLoading.vis,type:"primary",onClick:y[6]||(y[6]=B=>N(t(i)))},{default:o(()=>[...y[13]||(y[13]=[r("确定 ",-1)])]),_:1},8,["disabled"])]),key:"0"}:void 0]),1032,["modelValue","close-on-press-escape","show-close","width"])}}}),yn=X(gn,[["__scopeId","data-v-c3cf4cd1"]]),vn={style:{position:"absolute",padding:"7px"}},_n={style:{"margin-top":"20px",padding:"10px"}},wn={style:{"margin-top":"20px",padding:"10px"}},bn=J({__name:"BackupAndRecovery",setup(H,{expose:c}){const n=Q(),a=le(),p=z(!1),i=z(),b=z([]),v=z([]),m=u=>{console.log("密码备份 auto:",u);let l=n.passwordManager.getStoreData();if(!l){console.error("系统异常 备份文件不存在"),se.error({title:"系统异常",message:"备份文件不存在"});return}let d=u?`您与“${_e(Date.now(),"YYYY-MM-DD HH:mm")}” 进行密码恢复时系统自动备份了该文件，`:`您于“${_e(Date.now(),"YYYY-MM-DD HH:mm")}” 手动备份了该文件，`,y=n.allPasswordArray.length,x=Vt(),g={explain:`此文件为password-XL 密码备份文件，${d}此文件包含：${y} 个密码、${x} 个标签。 password-XL 官网服务地址为：https://password-xl.cn`,storeData:l,backupTime:Date.now()},L="密码备份 "+_e(Date.now(),"YYYY-MM-DD HH:mm:ss")+".json";const S=new Blob([JSON.stringify(g)],{type:"text/plain;charset=utf-8"});console.log("密码备份 导出文件:",L),to.saveAs(S,L)},_=()=>{console.log("密码恢复"),i.value.click()},D=()=>{if(i.value.files.length===0)return;console.log("密码备份,文件选择器选择了文件：",i.value.files.length);let u=i.value.files[0],l=new FileReader;l.onload=()=>{if(l.result)try{let d=JSON.parse(l.result);i.value.value="",$(d)}catch(d){console.error(d),se.error({title:"恢复失败",message:"请检查备份文件是否正确"})}},l.readAsText(u)},$=async u=>{console.log("密码备份,开始恢复密码");let l,d,y=et(n.mainPassword,u.storeData.passwordData);if(console.log("密码备份, 检查当前主密码是否可以解锁备份文件:",y),y)l=De(n.mainPassword,u.storeData.passwordData),d=De(n.mainPassword,u.storeData.labelData);else{let x=await a.verifyPasswordRef.getAndVerify(g=>et(g,u.storeData.passwordData),u.storeData.mainPasswordType);console.log("密码备份, 需要用户输入备份文件的主密码 mainPassword:",x),x&&(l=De(x,u.storeData.passwordData),d=De(x,u.storeData.labelData))}if(!l||!d)return console.log("密码恢复失败, 请检查备份文件及主密码是否正确"),se.error({title:"恢复失败",message:"请检查备份文件及主密码是否正确"}),!1;b.value=Dt(JSON.parse(l)),v.value=JSON.parse(d),console.log("密码恢复, 解压缩密码列表: ",b.value.length,v.value),!n.allPasswordArray.length&&!n.labelArray.length?(console.log("密码恢复, 当前列表没有密码直接恢复"),P()):p.value=!0},P=()=>{console.log("密码恢复, 覆盖方式恢复 验证密码"),a.verifyPasswordRef.getAndVerify(u=>n.passwordManager.verifyPassword(u)).then(()=>{E()})},E=()=>{console.log("密码恢复, 覆盖方式恢复"),(n.allPasswordArray.length||n.labelArray.length)&&(console.log("密码恢复, 恢复前先备份当前数据"),m(!0),Z.success("已为您自动备份现有密码")),console.log("密码恢复, 覆盖 数据确认：",n.allPasswordArray.length,b.value.length,n.labelArray.length,v.value.length),n.allPasswordArray=b.value,n.labelArray=v.value,T()},O=()=>{console.log("密码恢复, 合并方式恢复 验证密码"),a.verifyPasswordRef.getAndVerify(u=>n.passwordManager.verifyPassword(u)).then(()=>{N()})},N=()=>{console.log("密码恢复, 合并方式恢复"),(n.allPasswordArray.length||n.labelArray.length)&&(console.log("密码恢复, 恢复前先备份当前数据"),m(!0),Z.success("已为您自动备份现有密码")),Rt(n.allPasswordArray,b.value),Et(n.labelArray,v.value),T()},T=async()=>{console.log("密码恢复, 同步密码与标签文件");let u=await n.passwordManager.syncStoreData().catch(l=>l);console.log("密码恢复, 同步密码与标签文件 结果：",u),u.status?(Z.success("密码恢复成功"),p.value=!1):se.error({title:"系统异常",message:u.message})};return c({backup:m,recovery:_}),(u,l)=>{const d=ne,y=we,x=Se,g=Ce,L=ge;return f(),k(W,null,[s("input",{ref_key:"fileInput",ref:i,accept:"application/json",style:{display:"none"},type:"file",onChange:l[0]||(l[0]=S=>D())},null,544),e(L,{modelValue:t(p),"onUpdate:modelValue":l[1]||(l[1]=S=>re(p)?p.value=S:null),fullscreen:["xs","sm"].includes(t(Y)().value),draggable:"",width:"600px"},{header:o(()=>[e(d,{size:"large",style:{"user-select":"none"}},{default:o(()=>[...l[2]||(l[2]=[s("span",{class:"iconfont icon-recovery"},null,-1),r(" 恢复密码 ",-1),s("span",{style:{"font-weight":"bold"}},"·",-1),r(" 请选择恢复方式 ",-1)])]),_:1})]),default:o(()=>[e(g,null,{default:o(()=>[e(x,{md:{span:12},sm:{span:24},class:"recovery-col"},{default:o(()=>[s("div",{class:"recovery-type recovery-merge",onClick:O},[s("div",vn,[e(y,{effect:"dark",type:"success"},{default:o(()=>[...l[3]||(l[3]=[r("推荐",-1)])]),_:1})]),l[6]||(l[6]=s("div",{class:"icon-div"},[s("span",{class:"iconfont icon-merge"})],-1)),e(d,{class:"recovery-text"},{default:o(()=>[...l[4]||(l[4]=[r(" 合并恢复 ",-1)])]),_:1}),s("div",_n,[e(d,null,{default:o(()=>[...l[5]||(l[5]=[r("将现有密码与备份文件中的密码合并（修改过的密码会添加备注说明）",-1)])]),_:1})])])]),_:1}),e(x,{md:{span:12},sm:{span:24},class:"recovery-col"},{default:o(()=>[s("div",{class:"recovery-type recovery-cover",onClick:P},[l[9]||(l[9]=s("div",{class:"icon-div"},[s("span",{class:"iconfont icon-cover"})],-1)),e(d,{class:"recovery-text"},{default:o(()=>[...l[7]||(l[7]=[r(" 覆盖恢复 ",-1)])]),_:1}),s("div",wn,[e(d,null,{default:o(()=>[...l[8]||(l[8]=[r("使用备份文件覆盖密码列表，现有的密码和标签都将被删除",-1)])]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])],64)}}}),xn=X(bn,[["__scopeId","data-v-9c120f14"]]),kn={key:1,style:{"text-align":"center"}},Cn={style:{margin:"20px"}},Sn={style:{margin:"40px"}},An=J({__name:"RecycleBin",setup(H,{expose:c}){const n=Q(),a=ie(),p=()=>{console.log("打开回收站"),n.recycleBinDialogVis=!0},i=()=>{console.log("启用回收站功能"),a.setting.enableRecycleBin=!0,n.passwordManager.syncSetting().then(m=>{m&&m.status&&Z.success("已开启密码回收站")})},b=m=>{console.log("彻底删除密码：",m.id),n.passwordManager.completelyDeletePassword(m.id).then(_=>{_.status&&Z.success("删除成功")})},v=m=>{console.log("还原密码：",m.id),n.passwordManager.cancelDeletePassword(m.id)};return c({openRecycleBin:p}),(m,_)=>{const D=ne,$=Ue,P=ye,E=Le,O=de,N=ge;return f(),V(N,{modelValue:t(n).recycleBinDialogVis,"onUpdate:modelValue":_[0]||(_[0]=T=>t(n).recycleBinDialogVis=T),fullscreen:["xs"].includes(t(Y)().value),class:"recycle-bin",draggable:"",width:"600px"},{header:o(()=>[e(D,{size:"large",style:{"user-select":"none"}},{default:o(()=>[..._[1]||(_[1]=[s("span",{class:"iconfont icon-recycle-bin"},null,-1),r(" 回收站 ",-1)])]),_:1})]),default:o(()=>[t(a).setting.enableRecycleBin?(f(),V(E,{key:0,data:t(n).deletedArray,"header-cell-style":{padding:0},height:"380px"},{empty:o(()=>[e(D,{type:"info"},{default:o(()=>[..._[2]||(_[2]=[r("这里空空如也",-1)])]),_:1})]),default:o(()=>[e($,{prop:"title"}),e($,{width:"150px"},{default:o(T=>[e(P,{underline:!1,type:"primary",onClick:u=>v(T.row)},{default:o(()=>[..._[3]||(_[3]=[r("还原",-1)])]),_:1},8,["onClick"]),e(P,{underline:!1,style:{"margin-left":"15px"},type:"danger",onClick:u=>b(T.row)},{default:o(()=>[..._[4]||(_[4]=[r(" 彻底删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])):(f(),k("div",kn,[_[7]||(_[7]=s("div",{style:{"margin-top":"20px"}},[s("span",{class:"iconfont icon-recycle-bin not-enabled-recycle-bin-icon"})],-1)),s("div",Cn,[e(D,{type:"info"},{default:o(()=>[..._[5]||(_[5]=[r("当前未开启密码回收站功能",-1)])]),_:1})]),s("div",Sn,[e(O,{plain:"",type:"primary",onClick:i},{default:o(()=>[..._[6]||(_[6]=[r("开启回收站",-1)])]),_:1})])]))]),_:1},8,["modelValue","fullscreen"])}}}),$n=X(An,[["__scopeId","data-v-e6d7b6c4"]]),Pn={key:0,class:"empty-favorite"},Fn={key:1},Vn=J({__name:"Favorite",setup(H){const c=Q(),n=le(),a=z(0),p=v=>{console.log("取消收藏：",v.id),v.favorite=!1,a.value=0,c.filterCondition.favoriteId=0,c.passwordManager.updatePassword(v)},i=v=>{console.log("收藏夹过滤密码：",v,c.filterCondition.favoriteId),c.filterCondition.favoriteId===v?c.filterCondition.favoriteId=0:(c.filterCondition.favoriteId=v,console.log("收藏夹密码过滤，清除标签密码过滤：",c.filterCondition.favoriteId),n.labelTreeRef?n.labelTreeRef.setCheckedNodes([]):c.filterCondition.labelArray=[])},b=v=>c.filterCondition.favoriteId===v.id?"dark":a.value===v.id?"light":"plain";return(v,m)=>{const _=we,D=qe,$=Xe,P=We,E=ze;return f(),V(E,{height:"calc(50vh - 106px)"},{default:o(()=>[t(c).favoritePasswordArray.length?A("",!0):(f(),k("div",Pn," 暂无收藏 ")),t(c).favoritePasswordArray.length?(f(),k("div",Fn,[(f(!0),k(W,null,fe(t(c).favoritePasswordArray,O=>(f(),V(P,{trigger:"contextmenu"},{dropdown:o(()=>[e($,null,{default:o(()=>[e(D,{onClick:N=>p(O)},{default:o(()=>[...m[1]||(m[1]=[s("span",{class:"iconfont icon-edit cancel-favorite"},null,-1),r(" 取消收藏 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:o(()=>[e(_,{effect:b(O),class:"favorite-tag",size:"large",type:"warning",onClick:N=>i(O.id),onMouseenter:N=>a.value=O.id,onMouseleave:m[0]||(m[0]=N=>a.value=0)},{default:o(()=>[r(K(O.title),1)]),_:2},1032,["effect","onClick","onMouseenter"])]),_:2},1024))),256))])):A("",!0)]),_:1})}}}),bt=X(Vn,[["__scopeId","data-v-6e060ee0"]]),Dn={key:0,style:{"font-size":"12px",color:"#999","margin-bottom":"20px"}},Rn=J({__name:"FavoriteDrawer",setup(H,{expose:c}){const n=Q(),a=z(!1);return c({showFavoriteDrawer:()=>{a.value=!0}}),h(()=>n.filterCondition.favoriteId,()=>{a.value=!1}),(i,b)=>{const v=bt,m=Qe;return f(),k("div",null,[e(m,{modelValue:t(a),"onUpdate:modelValue":b[0]||(b[0]=_=>re(a)?a.value=_:null),direction:["xs","sm"].includes(t(Y)().value)?"btt":"rtl",size:["xs","sm"].includes(t(Y)().value)?"60%":"350px",title:"收藏"},{default:o(()=>[t(n).favoritePasswordArray.length?(f(),k("div",Dn,[...b[1]||(b[1]=[s("span",{class:"iconfont icon-info",style:{"font-size":"100%"}},null,-1),r(" 点击收藏内容即可查看密码 ",-1)])])):A("",!0),e(v)]),_:1},8,["modelValue","direction","size"])])}}}),En=X(Rn,[["__scopeId","data-v-e746cfbb"]]),Tn=["onClick","onContextmenu"],In={key:1,style:{width:"100%"}},Mn=J({__name:"LabelTree",setup(H,{expose:c}){const n=Q(),a=le(),p=z({}),i={},b=z(0),v=()=>n.labelArray.map(u=>u.id),m=u=>u.data.id!==b.value,_=(u,l)=>{console.log("标签，添加标签");let d=0;u&&(d=l==="peer"?u.data.pid:u.data.id);let y={id:Date.now(),pid:d,name:"新标签",children:[]};b.value=y.id,u?l==="peer"?a.labelTreeRef.insertAfter(y,u.data.id):a.labelTreeRef.append(y,u.data.id):a.labelTreeRef.append(y),a.labelTreeRef.setCurrentKey(y.id,!0),setTimeout(function(){console.log("标签，设置输入焦点"),i[y.id]?.focus()},150)},D=u=>{console.log("标签，编辑标签: ",u.data),b.value=u.data.id,setTimeout(function(){i[u.data.id]?.focus()},150)},$=u=>{console.log("标签，删除标签: ",u.data),ke.confirm("确认删除“"+u.data.name+"”吗？","删除标签",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{P(u)}).catch(()=>{})},P=u=>{console.log("标签，确认删除标签: ",u.data);const l=(x,g)=>{g.push(x.id);for(let L=0;L<x.children.length;L++)l(x.children[L],g)};let d=[];l(u.data,d);let y=!1;for(let x=0;x<n.allPasswordArray.length;x++){let g=n.allPasswordArray[x];for(let L=0;L<g.labels.length;L++)d.includes(g.labels[L])&&(g.labels.splice(L--,1),y=!0)}a.labelTreeRef.remove(u.data.id);for(let x=0;x<n.filterCondition.labelArray.length;x++)d.includes(n.filterCondition.labelArray[x])&&n.filterCondition.labelArray.splice(x,1);for(let x=0;x<d.length;x++)delete i[d[x]];n.passwordManager.syncStoreData(),y&&n.passwordManager.syncStoreData()},E=u=>{console.log("标签，保存标签:",u),u.name.trim()&&b.value!==0&&(b.value=0,n.passwordManager.syncStoreData())},O=u=>{b.value===0&&a.labelTreeRef.setChecked(u,!u.checked)},N=()=>{let u=a.labelTreeRef.getCheckedKeys();console.log("标签密码过滤：",u),u.length>0&&(console.log("标签密码过滤，清除收藏密码过滤：",n.filterCondition.favoriteId),n.filterCondition.favoriteId=0),n.filterCondition.labelArray=u},T=(u,l)=>{console.log("标签 右键菜单"),u.stopPropagation(),a.contextmenuRef.hideContextmenu();for(let d in p.value)p.value[d]&&p.value[d].handleClose()};return c({addLabel:_}),(u,l)=>{const d=de,y=ce,x=qe,g=Xe,L=We,S=Gt,w=ze;return f(),V(w,{height:"calc(50vh - 106px)"},{default:o(()=>[e(S,{ref:U=>t(a).labelTreeRef=U,"allow-drag":m,"check-strictly":!0,data:t(n).labelArray,"default-expanded-keys":v(),"expand-on-click-node":!1,draggable:"","node-key":"id","show-checkbox":"",style:{"background-color":"rgba(0,0,0,0)"},onCheckChange:N,onNodeDrop:l[1]||(l[1]=U=>t(n).passwordManager.syncStoreData())},{empty:o(()=>[t(n).serviceStatus===t(j).UNLOCKED?(f(),V(d,{key:0,plain:"",size:"small",type:"primary",onClick:l[0]||(l[0]=U=>_(null,"sub"))},{default:o(()=>[...l[2]||(l[2]=[r(" 创建密码标签 ",-1)])]),_:1})):A("",!0)]),default:o(({node:U,data:M})=>[e(L,{ref:C=>t(p)[M.id]=C,disabled:t(b)!==0,"hide-timeout":0,style:{width:"100%"},trigger:"contextmenu"},{dropdown:o(()=>[e(g,null,{default:o(()=>[e(x,{onClick:C=>_(U,"peer")},{default:o(()=>[...l[3]||(l[3]=[s("span",{class:"iconfont icon-peer-directory more-item",style:{color:"rgb(22 220 109)"}},null,-1),r(" 添加同级标签 ",-1)])]),_:1},8,["onClick"]),e(x,{onClick:C=>_(U,"sub")},{default:o(()=>[...l[4]||(l[4]=[s("span",{class:"iconfont icon-sub-directory more-item",style:{color:"rgb(0 147 255)"}},null,-1),r(" 添加子级标签 ",-1)])]),_:1},8,["onClick"]),e(x,{divided:"",onClick:C=>D(U)},{default:o(()=>[...l[5]||(l[5]=[s("span",{class:"iconfont icon-edit more-item",style:{color:"#FF9700","font-size":"130%"}},null,-1),r(" 修改标签 ",-1)])]),_:1},8,["onClick"]),e(x,{onClick:C=>$(U)},{default:o(()=>[...l[6]||(l[6]=[s("span",{class:"iconfont icon-delete more-item",style:{color:"rgb(255,23,23)","font-size":"130%"}},null,-1),r(" 删除标签 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:o(()=>[M.id!==t(b)?(f(),k("div",{key:0,class:"label-content",onClick:C=>O(U),onContextmenu:C=>T(C,M.id)},K(M.name),41,Tn)):A("",!0),M.id===t(b)?(f(),k("div",In,[e(y,{ref:C=>i[U.data.id]=C,modelValue:M.name,"onUpdate:modelValue":C=>M.name=C,size:"small",onBlur:C=>E(M),onKeyup:Me(C=>E(M),["enter"])},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])])):A("",!0)]),_:2},1032,["disabled"])]),_:1},8,["data","default-expanded-keys"])]),_:1})}}}),xt=X(Mn,[["__scopeId","data-v-7bfb6101"]]),Ln=J({__name:"LabelDrawer",setup(H,{expose:c}){const n=z(!1);return c({showLabelDrawer:()=>{n.value=!0}}),(p,i)=>{const b=xt,v=Qe;return f(),k("div",null,[e(v,{modelValue:t(n),"onUpdate:modelValue":i[0]||(i[0]=m=>re(n)?n.value=m:null),direction:["xs","sm"].includes(t(Y)().value)?"btt":"rtl",size:["xs","sm"].includes(t(Y)().value)?"80%":"350px",title:"标签"},{default:o(()=>[i[1]||(i[1]=s("div",{style:{"font-size":"12px",color:"#999","margin-bottom":"20px"}},[s("span",{class:"iconfont icon-info",style:{"font-size":"100%"}}),r(" 选中标签可以对密码列表进行过滤 ")],-1)),e(b)]),_:1},8,["modelValue","direction","size"])])}}}),Un=X(Ln,[["__scopeId","data-v-df4b86cb"]]),Bn={class:"generate-input-div"},zn={class:"generate-use-type-div"},Nn={class:"generate-length-div"},On=["onClick"],Kn={class:"iconfont icon-check-mark",style:{"font-size":"14px"}},Hn={style:{"margin-right":"10px"}},Gn={style:{display:"flex","justify-content":"end"}},jn=J({__name:"PasswordForm",setup(H,{expose:c}){const n=le(),a=Q(),p=ie(),i=z(""),b=z(!1),v=()=>({id:0,title:"",address:"",username:"",password:"",remark:"",addTime:0,updateTime:0,deleteTime:0,favoriteTime:0,favorite:!1,customFields:[],labels:[],status:je.NORMAL,bgColor:""}),m=z(v()),_=z(JSON.parse(JSON.stringify(p.setting.generateRule))),D=Ie({title:[{required:!0,message:"请输入名称",trigger:"blur"}]}),$=S=>{console.log("显示添加密码表单 title：",S),i.value="add",m.value=v(),_.value=JSON.parse(JSON.stringify(p.setting.generateRule)),a.passwordFormDrawerVis=!0,n.passwordFormFormRef?.clearValidate(),p.setting.autoGeneratePassword&&(console.log("显示添加密码表单 settingStore"),l()),S&&yt(()=>{m.value.title=S}),setTimeout(()=>{console.log("显示添加密码表单 设置焦点"),n.passwordFormTitleRef?.focus()},300)},P=S=>{console.log("设置密码表单：",S),T!==null&&clearInterval(T),u!==null&&clearTimeout(u),S.name&&(m.value.title=S.name),S.address&&(m.value.address=S.address),S.username&&(m.value.username=S.username),S.password&&(m.value.password=S.password),S.remark&&(m.value.remark=S.remark),console.log("设置密码表单2：",m.value)},E=S=>{console.log("显示修改密码表单：",S.id),i.value="edit",_.value=JSON.parse(JSON.stringify(p.setting.generateRule)),m.value=JSON.parse(JSON.stringify(S)),a.passwordFormDrawerVis=!0,n.passwordFormFormRef?.clearValidate()},O=()=>{console.log("关闭密码表单"),a.passwordFormDrawerVis=!1},N=(S,w)=>{if(console.log("用户名自动预测 queryString:",S),!S){w([]);return}let U=a.passwordArray.filter(M=>M.username.startsWith(S)).map(M=>({value:M.username})).filter((M,C,F)=>C===F.findIndex(G=>G.value===M.value));w([...new Set(U)])};let T=null,u=null;const l=()=>{console.log("随机生成密码"),b.value=!1,T!==null&&clearInterval(T),u=setTimeout(()=>{b.value=!0,m.value.password="";const S=Tt(_.value);if(!S)return;let w=0;T=setInterval(()=>{m.value.password+=S[w++],w>=S.length&&(clearInterval(T),T=null)},500/_.value.length/4)},1)},d=()=>a.labelArray.map(S=>S.id),y=()=>{m.value.customFields instanceof Array||(m.value.customFields=[]),m.value.customFields.push({key:"",val:"",hidden:!1})},x=async S=>{console.log("保存密码"),await S.validate(w=>{w&&(console.log("保存密码 校验通过"),i.value==="add"?(console.log("新增密码保存"),a.passwordManager.addPassword(JSON.parse(JSON.stringify(m.value))).then(U=>{U.status?(Z.success("保存成功"),a.passwordFormDrawerVis=!1):se.error({title:"系统异常",message:U.message})})):(console.log("修改密码保存"),m.value.updateTime=Date.now(),a.passwordManager.updatePassword(JSON.parse(JSON.stringify(m.value))).then(U=>{U.status?(Z.success("修改成功"),a.passwordFormDrawerVis=!1):se.error({title:"系统异常",message:U.message})})))})};c({addPasswordForm:$,editPasswordForm:E,setPasswordForm:P,closePasswordForm:O});const g=S=>{p.setting.enableShortcutKey&&S.ctrlKey&&S.key.toUpperCase()==="S"&&a.passwordFormDrawerVis&&(console.log("使用快捷键 Ctrl + S"),S.preventDefault(),x(n.passwordFormFormRef))},L=S=>{m.value.customFields.splice(S,1)};return $e(()=>{document.addEventListener("keydown",g)}),vt(()=>{document.removeEventListener("keydown",g)}),(S,w)=>{const U=ne,M=ce,C=he,F=ct,G=de,B=me,pe=pt,ae=Se,Ne=Ce,Oe=ft,Pe=be,Ke=jt,Fe=Yt,He=Be,Ge=Qe;return f(),V(Ge,{modelValue:t(a).passwordFormDrawerVis,"onUpdate:modelValue":w[15]||(w[15]=I=>t(a).passwordFormDrawerVis=I),direction:["xs","sm"].includes(t(Y)().value)?"btt":"rtl","show-close":!1,size:["xs","sm"].includes(t(Y)().value)?"80%":"540px"},{header:o(()=>[e(U,{style:{"font-size":"16px"}},{default:o(()=>[r(K(t(i)==="add"?"添加密码":"修改密码"),1)]),_:1})]),default:o(()=>[e(He,{ref:I=>t(n).passwordFormFormRef=I,model:t(m),rules:t(D),autocomplete:"off","label-width":"60px"},{default:o(()=>[e(C,{label:"名称",prop:"title"},{default:o(()=>[e(M,{ref:I=>t(n).passwordFormTitleRef=I,modelValue:t(m).title,"onUpdate:modelValue":w[0]||(w[0]=I=>t(m).title=I),autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),_:1}),e(C,{label:"地址",prop:"address"},{default:o(()=>[e(M,{modelValue:t(m).address,"onUpdate:modelValue":w[1]||(w[1]=I=>t(m).address=I),autocomplete:"new-password",clearable:"",placeholder:"https://"},null,8,["modelValue"])]),_:1}),e(C,{label:"用户名",prop:"username"},{default:o(()=>[e(F,{modelValue:t(m).username,"onUpdate:modelValue":w[2]||(w[2]=I=>t(m).username=I),"fetch-suggestions":N,autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),_:1}),e(C,{label:"密码"},{default:o(()=>[e(Pe,{class:"generate-card"},{default:o(()=>[s("div",Bn,[e(M,{modelValue:t(m).password,"onUpdate:modelValue":w[4]||(w[4]=I=>t(m).password=I),autocomplete:"new-password",class:"generate-input",clearable:"",placeholder:"输入密码或随机生成"},{append:o(()=>[e(B,{content:"随机生成",placement:"top"},{default:o(()=>[e(G,{ref:I=>t(n).passwordFormGenerateBtnRef=I,class:"refresh-password",tabindex:"-1",onClick:l},{default:o(()=>[s("i",{class:wt([{"random-dice":t(b)},"iconfont icon-dice"]),onAnimationend:w[3]||(w[3]=I=>b.value=!1)},null,34)]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(G,{plain:"",tabindex:"-1",type:"success",onClick:w[5]||(w[5]=I=>t(q)(t(m).password))},{default:o(()=>[...w[16]||(w[16]=[r("复制",-1)])]),_:1})]),s("div",zn,[e(Ne,null,{default:o(()=>[e(ae,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:o(()=>[e(pe,{modelValue:t(_).uppercase,"onUpdate:modelValue":w[6]||(w[6]=I=>t(_).uppercase=I),disabled:!t(_).lowercase&&!t(_).number&&!t(_).symbol,border:"",class:"generate-type-checkbox",label:"大写",size:"small",tabindex:"-1",onChange:l},null,8,["modelValue","disabled"])]),_:1}),e(ae,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:o(()=>[e(pe,{modelValue:t(_).lowercase,"onUpdate:modelValue":w[7]||(w[7]=I=>t(_).lowercase=I),disabled:!t(_).uppercase&&!t(_).number&&!t(_).symbol,border:"",class:"generate-type-checkbox",label:"小写",size:"small",tabindex:"-1",onChange:l},null,8,["modelValue","disabled"])]),_:1}),e(ae,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:o(()=>[e(pe,{modelValue:t(_).number,"onUpdate:modelValue":w[8]||(w[8]=I=>t(_).number=I),disabled:!t(_).uppercase&&!t(_).lowercase&&!t(_).symbol,border:"",class:"generate-type-checkbox",label:"数字",size:"small",tabindex:"-1",onChange:l},null,8,["modelValue","disabled"])]),_:1}),e(ae,{sm:{span:6},xs:{span:12},style:{"text-align":"center"}},{default:o(()=>[e(pe,{modelValue:t(_).symbol,"onUpdate:modelValue":w[9]||(w[9]=I=>t(_).symbol=I),disabled:!t(_).uppercase&&!t(_).lowercase&&!t(_).number,border:"",class:"generate-type-checkbox",label:"符号",size:"small",tabindex:"-1",onChange:l},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),s("div",Nn,[e(Oe,{ref:I=>t(n).passwordFormGenerateRuleRef=I,modelValue:t(_).length,"onUpdate:modelValue":w[10]||(w[10]=I=>t(_).length=I),max:32,min:4,"show-input-controls":!1,"show-input":"",size:"small",tabindex:"-1",onChange:l},null,8,["modelValue"])])]),_:1})]),_:1}),e(C,{label:"标签"},{default:o(()=>[e(Ke,{modelValue:t(m).labels,"onUpdate:modelValue":w[11]||(w[11]=I=>t(m).labels=I),"check-strictly":!0,data:t(a).labelArray,"default-expanded-keys":d(),props:{label:"name"},multiple:"","node-key":"id","show-checkbox":""},null,8,["modelValue","data","default-expanded-keys"])]),_:1}),e(C,{label:"备注"},{default:o(()=>[e(M,{modelValue:t(m).remark,"onUpdate:modelValue":w[12]||(w[12]=I=>t(m).remark=I),rows:2,autocomplete:"new-password",placeholder:"备注...",type:"textarea"},null,8,["modelValue"])]),_:1}),t(p).setting.passwordColor?(f(),V(C,{key:0},{default:o(()=>[(f(!0),k(W,null,fe(t(p).setting.bgColors,I=>(f(),k("div",{style:oe({"background-color":t(Te)(I,t(m).bgColor===I?"0.5":"0.3"),transform:t(m).bgColor===I?"scale(1.5)":"scale(1)"}),class:"bg-color-item",onClick:xe=>t(m).bgColor===I?t(m).bgColor="":t(m).bgColor=I},[gt(s("span",Kn,null,512),[[Xt,t(m).bgColor===I]])],12,On))),256))]),_:1})):A("",!0),e(C,{label:"自定义"},{default:o(()=>[t(m).customFields&&t(m).customFields.length>0?(f(),V(Pe,{key:0,style:{width:"100%"}},{default:o(()=>[(f(!0),k(W,null,fe(t(m).customFields,(I,xe)=>(f(),k("div",{style:oe([{"margin-bottom":xe!==t(m).customFields.length-1?"15px":"0"},{display:"flex"}])},[s("div",Hn,[I.hidden?(f(),V(Fe,{key:0,style:{cursor:"pointer"},onClick:R=>I.hidden=!1},{default:o(()=>[...w[17]||(w[17]=[s("span",{class:"iconfont icon-hide"},null,-1)])]),_:1},8,["onClick"])):(f(),V(Fe,{key:1,style:{cursor:"pointer"},onClick:R=>I.hidden=!0},{default:o(()=>[...w[18]||(w[18]=[s("span",{class:"iconfont icon-show"},null,-1)])]),_:1},8,["onClick"]))]),e(M,{modelValue:I.key,"onUpdate:modelValue":R=>I.key=R,autocomplete:"off",placeholder:"名称",style:{"margin-right":"10px",flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),e(M,{modelValue:I.val,"onUpdate:modelValue":R=>I.val=R,autocomplete:"off",type:I.hidden?"password":"text",placeholder:"内容",style:{"margin-right":"10px",flex:"2"}},null,8,["modelValue","onUpdate:modelValue","type"]),e(G,{plain:"",title:"删除",type:"danger",onClick:R=>L(xe)},{default:o(()=>[...w[19]||(w[19]=[s("span",{class:"iconfont icon-clean"},null,-1)])]),_:1},8,["onClick"])],4))),256))]),_:1})):A("",!0),e(G,{plain:"",style:{"margin-top":"10px"},type:"primary",onClick:w[13]||(w[13]=I=>y())},{default:o(()=>[...w[20]||(w[20]=[r("添加自定义信息",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"]),s("div",Gn,[e(G,{ref:I=>t(n).passwordFormSaveBtnRef=I,type:"primary",onClick:w[14]||(w[14]=I=>x(t(n).passwordFormFormRef))},{default:o(()=>[...w[21]||(w[21]=[r("保存 ",-1)])]),_:1},512)])]),_:1},8,["modelValue","direction","size"])}}}),Yn=X(jn,[["__scopeId","data-v-5dfb87da"]]),Jn=J({__name:"CancelAccount",setup(H,{expose:c}){const n=le(),a=Q(),p=z(!1),i=()=>{console.log("准备注销账户"),p.value=!0},b=()=>{console.log("准备注销账户 验证密码"),n.verifyPasswordRef.getAndVerify(v=>a.passwordManager.verifyPassword(v)).then(()=>{console.log("准备注销账户 发起注销"),a.passwordManager.closeAccount().then(v=>{console.log("准备注销账户 结果：",v.status),v.status?(se.success({title:"账户注销成功",message:"欢迎再次使用！"}),console.log("准备注销账户 退出登录"),a.logout()):se.error({title:"账户注销失败",message:v.message})})})};return c({showCloseAccount:i}),(v,m)=>{const _=ne,D=Ae,$=de,P=ge;return f(),V(P,{modelValue:t(p),"onUpdate:modelValue":m[1]||(m[1]=E=>re(p)?p.value=E:null),width:["xs"].includes(t(Y)().value)?"95%":"400px"},{header:o(()=>[e(_,{size:"large",style:{"user-select":"none"}},{default:o(()=>[...m[2]||(m[2]=[s("span",{class:"iconfont icon-risk"},null,-1),r(" 注销账户 ",-1)])]),_:1})]),footer:o(()=>[e($,{plain:"",type:"primary",onClick:m[0]||(m[0]=E=>p.value=!1)},{default:o(()=>[...m[4]||(m[4]=[r("我点错了",-1)])]),_:1}),e($,{type:"danger",onClick:b},{default:o(()=>[...m[5]||(m[5]=[r("确认注销",-1)])]),_:1})]),default:o(()=>[e(D,{closable:!1,type:"error"},{default:o(()=>[...m[3]||(m[3]=[r("注销账户将永久删除所有密码和标签且不可恢复，确认注销账户吗？",-1)])]),_:1})]),_:1},8,["modelValue","width"])}}}),hn=X(Jn,[["__scopeId","data-v-c6356025"]]),Wn={style:{display:"flex","justify-content":"space-between"}},Xn=J({__name:"FavoriteCard",setup(H){const c=Q(),n=ie();return(a,p)=>{const i=ne,b=mt,v=me,m=bt,_=be;return t(n).setting.showFavoriteCard?(f(),V(_,{key:0,style:oe({"background-color":t(c).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"}),class:"favorite-card"},{header:o(()=>[s("div",Wn,[s("div",null,[p[2]||(p[2]=s("span",{class:"iconfont icon-collect",style:{color:"#FF9700","margin-right":"8px","font-size":"110%"}},null,-1)),e(i,{size:"large"},{default:o(()=>[...p[1]||(p[1]=[r("收藏",-1)])]),_:1})]),s("div",null,[t(c).filterCondition.favoriteId!==0?(f(),V(v,{key:0,content:"收藏过滤生效中，点击取消",placement:"left"},{default:o(()=>[e(b,{class:"item","is-dot":""},{default:o(()=>[s("span",{class:"iconfont icon-filtration filter-icon",onClick:p[0]||(p[0]=D=>t(c).filterCondition.favoriteId=0)})]),_:1})]),_:1})):A("",!0)])])]),default:o(()=>[e(m)]),_:1},8,["style"])):A("",!0)}}}),qn=X(Xn,[["__scopeId","data-v-27e83281"]]),Qn={style:{display:"flex","justify-content":"space-between"}},Zn=J({__name:"LabelCard",setup(H){const c=Q(),n=le(),a=ie();return(p,i)=>{const b=ne,v=mt,m=me,_=xt,D=be;return t(a).setting.showLabelCard?(f(),V(D,{key:0,style:oe({"background-color":t(c).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"}),class:"label-card",header:"标签"},{header:o(()=>[s("div",Qn,[s("div",null,[i[2]||(i[2]=s("span",{class:"iconfont icon-label",style:{color:"#409EFF","margin-right":"8px","font-size":"110%"}},null,-1)),e(b,{size:"large"},{default:o(()=>[...i[1]||(i[1]=[r("标签",-1)])]),_:1})]),s("div",null,[t(c).filterCondition.labelArray.length?(f(),V(m,{key:0,content:"标签过滤生效中，点击取消",placement:"left"},{default:o(()=>[e(v,{class:"item","is-dot":""},{default:o(()=>[s("span",{class:"iconfont icon-filtration filter-icon",onClick:i[0]||(i[0]=$=>t(n).labelTreeRef.setCheckedNodes([]))})]),_:1})]),_:1})):A("",!0)])])]),default:o(()=>[e(_,{ref:$=>t(n).labelTreeDivRef=$},null,512)]),_:1},8,["style"])):A("",!0)}}}),es=X(Zn,[["__scopeId","data-v-565bc2b0"]]),ts=""+new URL("empty-CTwObXQe.svg",import.meta.url).href,os={class:"empty-list-div"},ls={key:0},ns={key:1},ss=J({__name:"EmptyList",setup(H){const c=Q(),n=le();return(a,p)=>{const i=de;return f(),k("div",os,[t(c).serviceStatus===t(j).LOGGED?(f(),k("div",ls,[p[3]||(p[3]=s("span",{class:"iconfont icon-lock-close"},null,-1)),p[4]||(p[4]=s("div",{class:"status-tip"},"已锁定",-1)),e(i,{plain:"",style:{"margin-top":"30px"},type:"primary",onClick:p[0]||(p[0]=b=>t(n).verifyPasswordRef.verifyAndUnlock())},{default:o(()=>[...p[2]||(p[2]=[r(" 解锁 ",-1)])]),_:1})])):A("",!0),t(c).serviceStatus===t(j).UNLOCKED?(f(),k("div",ns,[p[6]||(p[6]=s("img",{alt:"",src:ts},null,-1)),p[7]||(p[7]=s("div",{class:"status-tip"},"这里一个密码都没有",-1)),t(c).passwordArray.length===0?(f(),V(i,{key:0,plain:"",style:{"margin-top":"30px"},type:"primary",onClick:p[1]||(p[1]=b=>t(n).passwordFormRef.addPasswordForm())},{default:o(()=>[...p[5]||(p[5]=[r(" 添加我的第一个密码 ",-1)])]),_:1})):A("",!0)])):A("",!0)])}}}),kt=X(ss,[["__scopeId","data-v-46971f0f"]]),as=["onDblclick"],rs=["onClick"],is={class:"password-field-ul",style:{height:"100%"}},ds={key:0,class:"empty-card"},us={key:1},ps={key:2},fs={class:"card-username-div"},cs=["onClick"],ms={key:3},gs={key:0,class:"card-password-span"},ys={key:1,style:{position:"relative",top:"3px"}},vs=["onClick"],_s=["onClick"],ws={key:4},bs={key:5},xs={key:0},ks={key:0},Cs={key:0,class:"card-password-span"},Ss={key:1,style:{position:"relative",top:"3px"}},As=["onClick"],$s=["onClick"],Ps=["onClick"],Fs={key:1},Vs={style:{display:"flex","justify-content":"space-between"}},Ds=J({__name:"PasswordCards",setup(H){const c=Q(),n=le(),a=ie(),p=z(0),i=z(),b=z({}),v=l=>{console.log("收藏密码：",l.id),l.favorite=!l.favorite,l.favoriteTime=Date.now(),c.passwordManager.updatePassword(l)},m=l=>{console.log("card 查看密码：",l.id),l.password.length>40?(console.log("card 查看密码 长度大于40"),n.showPasswordRef.showPassword(l),p.value=0):p.value=l.id},_=l=>{console.log("card 删除密码：",l.id),ke.confirm("确认删除“"+l.title+"”吗？","删除密码",{confirmButtonClass:"confirm-delete-btn",confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("card 确认删除：",l.id),c.passwordManager.deletePassword(l.id).then(d=>{d.status||(console.log("card 删除密码异常：",d.message),se.error({title:"系统异常",message:d.message}))})}).catch(()=>{})},D=()=>["xs"].includes(Y().value)?1:["sm","md"].includes(Y().value)?2:["lg"].includes(Y().value)?3:4,$=l=>{let d=c.isDark?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.1)";return a.setting.passwordColor?{"background-color":Te(l.bgColor,"0.06"),"border-bottom":l.bgColor?"1px solid "+Te(l.bgColor,"0.06"):"1px solid "+d}:{"background-color":"rgba(0,0,0,0)","border-bottom":"1px solid "+d}},P=()=>a.setting.dynamicBackground?{"background-color":c.isDark?"rgba(0,0,0,0.3)":"rgba(255,255,255,0.3)"}:{"background-color":c.isDark?"rgba(0,0,0,1)":"rgba(255,255,255,1)"},E=z(1),O=z(D()*5),N=()=>c.visPasswordArray.slice(0,E.value*O.value),T=()=>{const l=i.value.wrapRef;l.scrollTop+l.clientHeight>=l.scrollHeight-200&&E.value*O.value<c.visPasswordArray.length&&E.value++},u=()=>{i.value.wrapRef.addEventListener("scroll",()=>{T()})};return $e(()=>{T(),u()}),(l,d)=>{const y=me,x=ne,g=ye,L=we,S=de,w=be,U=kt,M=ze;return f(),V(M,{ref_key:"passwordCardScrollbar",ref:i,height:"100%"},{default:o(()=>[t(c).visPasswordArray.length?(f(),k("div",{key:0,style:oe([{"grid-template-columns":"repeat("+D()+", 1fr)"},{display:"grid",padding:"6px"}])},[(f(!0),k(W,null,fe(N(),C=>(f(),k("div",{onDblclick:F=>t(n).passwordFormRef.editPasswordForm(C)},[e(w,{style:oe(P()),"body-style":"height: 100%;",class:"password-card"},{header:o(()=>[s("div",{style:oe($(C)),class:"password-header-div"},[s("div",null,[t(a).setting.showStrength&&C.password?(f(),V(y,{key:0,content:t(rt)(C.password),placement:"top"},{default:o(()=>[s("div",{style:oe({"background-color":t(it)(C.password)}),class:"password-strength"},null,4)]),_:2},1032,["content"])):A("",!0),e(x,{style:{"font-size":"17px",color:"#555"}},{default:o(()=>[r(K(C.title),1)]),_:2},1024)]),s("div",null,[e(y,{content:C.favorite?"取消收藏":"收藏",placement:"top"},{default:o(()=>[s("span",{class:wt([C.favorite?"icon-favorited":"icon-collect","iconfont icon-favorited card-opt-icon"]),style:oe([{color:C.favorite?"#FF9700":"rgb(255 151 0 / 75%)"},{"font-size":"115%"}]),onClick:F=>v(C)},null,14,rs)]),_:2},1032,["content"])])],4)]),footer:o(()=>[s("div",Vs,[e(x,{style:{"font-size":"80%"},type:"info"},{default:o(()=>[r(K(t(_e)(C.updateTime,"YYYY-MM-DD HH:mm")),1)]),_:2},1024),s("div",null,[e(y,{content:"删除",placement:"top"},{default:o(()=>[e(S,{plain:"",size:"small",type:"danger",onClick:F=>_(C)},{default:o(()=>[...d[13]||(d[13]=[s("span",{class:"iconfont icon-delete card-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(y,{content:"修改",placement:"top"},{default:o(()=>[e(S,{plain:"",size:"small",type:"primary",onClick:F=>t(n).passwordFormRef.editPasswordForm(C)},{default:o(()=>[...d[14]||(d[14]=[s("span",{class:"iconfont icon-edit card-opt-icon",style:{"font-size":"145%"}},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(y,{content:"分享",placement:"top"},{default:o(()=>[e(S,{plain:"",size:"small",type:"success",onClick:F=>t(at)(C)},{default:o(()=>[...d[15]||(d[15]=[s("span",{class:"iconfont icon-share card-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),default:o(()=>[s("ul",is,[!C.address&&!C.username&&!C.password&&!C.remark&&!C.labels.length&&!(C.customFields&&C.customFields.length>0)?(f(),k("li",ds,[e(x,{style:{margin:"20px 0"}},{default:o(()=>[...d[1]||(d[1]=[r(" 空空如也！ ",-1)])]),_:1})])):A("",!0),C.address?(f(),k("li",us,[e(x,{class:"password-field-name"},{default:o(()=>[...d[2]||(d[2]=[r("地址:",-1)])]),_:1}),e(x,{class:"password-field-value"},{default:o(()=>[t(nt)(C.address)?(f(),V(g,{key:0,href:C.address,target:"_blank",type:"primary"},{default:o(()=>[r(K(C.address),1)]),_:2},1032,["href"])):(f(),V(x,{key:1},{default:o(()=>[r(K(C.address),1)]),_:2},1024))]),_:2},1024),d[3]||(d[3]=s("div",{class:"clear"},null,-1))])):A("",!0),C.username?(f(),k("li",ps,[e(x,{class:"password-field-name"},{default:o(()=>[...d[4]||(d[4]=[r("用户名:",-1)])]),_:1}),e(x,{class:"password-field-value"},{default:o(()=>[s("div",fs,[r(K(C.username)+" ",1),e(y,{"hide-after":0,"show-after":300,content:"复制用户名",placement:"top"},{default:o(()=>[s("span",{class:"iconfont icon-copy password-row-icon copy-username",onClick:F=>t(q)(C.username)},null,8,cs)]),_:2},1024)])]),_:2},1024),d[5]||(d[5]=s("div",{class:"clear"},null,-1))])):A("",!0),C.password?(f(),k("li",ms,[e(x,{class:"password-field-name"},{default:o(()=>[...d[6]||(d[6]=[r("密码:",-1)])]),_:1}),e(x,{class:"password-field-value"},{default:o(()=>[t(p)===C.id?(f(),k("span",gs,K(C.password),1)):(f(),k("span",ys,"**********")),t(p)===C.id?(f(),k("span",{key:2,class:"iconfont icon-hide password-card-icon",onClick:d[0]||(d[0]=F=>p.value=0)})):(f(),k("span",{key:3,class:"iconfont icon-show password-card-icon",onClick:F=>m(C)},null,8,vs)),s("span",{class:"iconfont icon-copy password-card-icon",onClick:F=>t(q)(C.password)},null,8,_s)]),_:2},1024),d[7]||(d[7]=s("div",{class:"clear"},null,-1))])):A("",!0),C.remark?(f(),k("li",ws,[e(x,{class:"password-field-name"},{default:o(()=>[...d[8]||(d[8]=[r("备注:",-1)])]),_:1}),e(x,{class:"password-field-value"},{default:o(()=>[r(K(C.remark),1)]),_:2},1024),d[9]||(d[9]=s("div",{class:"clear"},null,-1))])):A("",!0),C.labels.length?(f(),k("li",bs,[e(x,{class:"password-field-name"},{default:o(()=>[...d[10]||(d[10]=[r("标签:",-1)])]),_:1}),e(x,{class:"password-field-value"},{default:o(()=>[(f(!0),k(W,null,fe(t(st)(C),F=>(f(),V(L,{class:"card-label"},{default:o(()=>[r(K(F.name),1)]),_:2},1024))),256))]),_:2},1024),d[11]||(d[11]=s("div",{class:"clear"},null,-1))])):A("",!0),(f(!0),k(W,null,fe(C.customFields,(F,G)=>(f(),k(W,null,[F.key||F.val?(f(),k("li",xs,[e(x,{class:"password-field-name"},{default:o(()=>[r(K(F.key)+":",1)]),_:2},1024),e(x,{class:"password-field-value"},{default:o(()=>[F.hidden?(f(),k("span",ks,[t(b)[C.id+"_"+G]?(f(),k("span",Cs,K(F.val),1)):(f(),k("span",Ss,"**********")),t(b)[C.id+"_"+G]?(f(),k("span",{key:2,class:"iconfont icon-hide password-card-icon",onClick:B=>t(b)[C.id+"_"+G]=!1},null,8,As)):(f(),k("span",{key:3,class:"iconfont icon-show password-card-icon",onClick:B=>t(b)[C.id+"_"+G]=!0},null,8,$s)),s("span",{class:"iconfont icon-copy password-card-icon",onClick:B=>t(q)(F.val)},null,8,Ps)])):(f(),k("span",Fs,K(F.val),1))]),_:2},1024),d[12]||(d[12]=s("div",{class:"clear"},null,-1))])):A("",!0)],64))),256))])]),_:2},1032,["style"])],40,as))),256))],4)):(f(),V(U,{key:1}))]),_:1},512)}}}),Rs=X(Ds,[["__scopeId","data-v-14d86cc3"]]),Es={key:0,class:"password-card-table"},Ts={key:0,class:"username-div"},Is={class:"username-text"},Ms=["onClick"],Ls={key:0,class:"table-password-div"},Us={style:{width:"150px"}},Bs={key:0,class:"table-password-span"},zs={key:1,class:"table-password-symbol"},Ns=["onClick"],Os=["onClick"],Ks={style:{display:"flex","justify-content":"space-evenly"}},Hs=J({__name:"PasswordTable",setup(H){const c=Q(),n=le(),a=ie(),p=z(0),i=z(),b=T=>{console.log("table 查看密码：",T.id),T.password.length>40?(console.log("table 查看密码 长度大于40"),n.showPasswordRef.showPassword(T),p.value=0):p.value=T.id},v=T=>{console.log("table 删除密码：",T.id),ke.confirm("确认删除“"+T.title+"”吗？","删除密码",{confirmButtonClass:"confirm-delete-btn",confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("table 确认删除：",T.id),c.passwordManager.deletePassword(T.id).then(u=>{u.status||(console.log("table 删除密码异常：",u.message),se.error({title:"系统异常",message:u.message}))})}).catch(()=>{})},m=T=>{T.favorite?(console.log("取消收藏密码"),T.favorite=!1):(console.log("收藏密码"),T.favorite=!0),T.favoriteTime=Date.now(),c.passwordManager.updatePassword(T)},_=(T,u)=>{let l=tt(T.password),d=tt(u.password);return l>d?a.setting.sortOrder===Ee.ASC?1:-1:l<d?a.setting.sortOrder===Ee.ASC?-1:1:0},D=T=>a.setting.passwordColor&&T.row.bgColor?{"background-color":Te(T.row.bgColor,"0.1")}:{"background-color":"rgba(0,0,0,0)"},$=z(1),P=z(Math.ceil(innerHeight/62)+5),E=()=>c.visPasswordArray.slice(0,$.value*P.value),O=()=>{const T=i.value?.$el.querySelector(".el-scrollbar__wrap");T.scrollTop+T.clientHeight>=T.scrollHeight-200&&$.value*P.value<c.visPasswordArray.length&&$.value++},N=()=>{i.value.$el.querySelector(".el-scrollbar__wrap").addEventListener("scroll",()=>{O()})};return $e(()=>{O(),N()}),(T,u)=>{const l=me,d=Ue,y=ye,x=ne,g=we,L=Le,S=kt;return t(c).visPasswordArray.length?(f(),k("div",Es,[e(L,{ref_key:"passwordTableRef",ref:i,"cell-style":{"background-color":"rgba(0,0,0,0)"},data:E(),"header-cell-style":{"background-color":"rgba(0,0,0,0)"},"header-row-style":{"background-color":"rgba(0,0,0,0)"},"row-style":D,height:"calc(100vh - 120px)",style:{"background-color":"rgba(0,0,0,0)"}},{default:o(()=>[t(a).setting.showStrength?(f(),V(d,{key:0,"sort-method":_,prop:"strength",sortable:"",width:"30px"},{default:o(w=>[e(l,{content:t(rt)(w.row.password),placement:"top"},{default:o(()=>[s("div",{style:oe({"background-color":t(it)(w.row.password)}),class:"password-strength"},null,4)]),_:2},1032,["content"])]),_:1})):A("",!0),e(d,{label:"名称","min-width":"130px",prop:"title",sortable:""}),e(d,{label:"地址","min-width":"200px",prop:"address"},{default:o(w=>[s("div",null,[t(nt)(w.row.address)?(f(),V(y,{key:0,href:w.row.address,class:"address-link",target:"_blank",type:"primary"},{default:o(()=>[r(K(w.row.address),1)]),_:2},1032,["href"])):(f(),V(x,{key:1},{default:o(()=>[r(K(w.row.address),1)]),_:2},1024))])]),_:1}),e(d,{label:"用户名","min-width":"180px",prop:"username",sortable:""},{default:o(w=>[w.row.username?(f(),k("div",Ts,[s("div",Is,K(w.row.username),1),s("div",null,[s("span",{class:"iconfont icon-copy password-row-icon copy-username",onClick:U=>t(q)(w.row.username)},null,8,Ms)])])):A("",!0)]),_:1}),e(d,{label:"密码",prop:"password",width:"220px"},{default:o(w=>[w.row.password?(f(),k("div",Ls,[s("div",Us,[t(p)===w.row.id?(f(),k("span",Bs,K(w.row.password),1)):A("",!0),t(p)!==w.row.id?(f(),k("span",zs,"*******")):A("",!0)]),s("div",null,[t(p)===w.row.id?(f(),k("span",{key:0,class:"iconfont icon-hide password-row-icon",onClick:u[0]||(u[0]=U=>p.value=0)})):A("",!0),t(p)!==w.row.id?(f(),k("span",{key:1,class:"iconfont icon-show password-row-icon",onClick:U=>b(w.row)},null,8,Ns)):A("",!0),s("span",{class:"iconfont icon-copy password-row-icon",onClick:U=>t(q)(w.row.password)},null,8,Os)])])):A("",!0)]),_:1}),t(a).setting.showTimeForTable==="addTime"?(f(),V(d,{key:1,formatter:w=>t(_e)(w.addTime,"YYYY-MM-DD HH:mm"),label:"添加时间","min-width":"150px",prop:"addTime",sortable:""},null,8,["formatter"])):A("",!0),t(a).setting.showTimeForTable==="updateTime"?(f(),V(d,{key:2,formatter:w=>t(_e)(w.updateTime,"YYYY-MM-DD HH:mm"),label:"修改时间","min-width":"150px",prop:"updateTime",sortable:""},null,8,["formatter"])):A("",!0),t(a).setting.showLabelForTable?(f(),V(d,{key:3,label:"标签","min-width":"110px",prop:"labels"},{default:o(w=>[(f(!0),k(W,null,fe(t(st)(w.row),U=>(f(),V(g,{class:"table-label"},{default:o(()=>[r(K(U.name),1)]),_:2},1024))),256))]),_:1})):A("",!0),e(d,{label:"备注","min-width":"130px",prop:"remark"}),e(d,{label:"操作","min-width":"145px",width:"150px"},{default:o(w=>[s("div",Ks,[e(l,{content:"分享",placement:"top"},{default:o(()=>[e(y,{underline:!1,type:"success",onClick:U=>t(at)(w.row)},{default:o(()=>[...u[1]||(u[1]=[s("span",{class:"iconfont icon-share table-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(l,{content:"修改",placement:"top"},{default:o(()=>[e(y,{underline:!1,type:"primary",onClick:U=>t(n).passwordFormRef.editPasswordForm(w.row)},{default:o(()=>[...u[2]||(u[2]=[s("span",{class:"iconfont icon-edit table-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024),e(l,{content:w.row.favorite?"取消收藏":"收藏",placement:"top"},{default:o(()=>[w.row.favorite?(f(),V(y,{key:0,underline:!1,type:"primary",onClick:U=>m(w.row)},{default:o(()=>[...u[3]||(u[3]=[s("span",{class:"iconfont icon-favorited table-opt-icon",style:{color:"#FF9700"}},null,-1)])]),_:1},8,["onClick"])):A("",!0),w.row.favorite?A("",!0):(f(),V(y,{key:1,underline:!1,type:"primary",onClick:U=>m(w.row)},{default:o(()=>[...u[4]||(u[4]=[s("span",{class:"iconfont icon-collect table-opt-icon",style:{color:"#FF9700"}},null,-1)])]),_:1},8,["onClick"]))]),_:2},1032,["content"]),e(l,{content:"删除",placement:"top"},{default:o(()=>[e(y,{underline:!1,type:"danger",onClick:U=>v(w.row)},{default:o(()=>[...u[5]||(u[5]=[s("span",{class:"iconfont icon-delete table-opt-icon"},null,-1)])]),_:1},8,["onClick"])]),_:2},1024)])]),_:1})]),_:1},8,["data"])])):(f(),V(S,{key:1}))}}}),Gs=X(Hs,[["__scopeId","data-v-2b6dba48"]]),js=J({__name:"FilteringTip",setup(H){const c=Q(),n=le(),a=ie(),p=()=>c.filterCondition.favoriteId?!a.setting.showFavoriteCard||["xs","sm"].includes(Y().value):!1,i=()=>c.filterCondition.labelArray.length===0?!1:!a.setting.showLabelCard||["xs","sm"].includes(Y().value);return(b,v)=>{const m=Ae;return f(),k(W,null,[p()?(f(),k("div",{key:0,style:oe({"background-color":t(c).isDark?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"})},[e(m,{center:"","close-text":"取消筛选","show-icon":"",title:"现在显示的是根据收藏筛选后的密码",type:"warning",onClose:v[0]||(v[0]=_=>t(c).filterCondition.favoriteId=0)})],4)):A("",!0),i()?(f(),k("div",{key:1,style:oe({"background-color":t(c).isDark?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"})},[e(m,{center:"","close-text":"取消筛选","show-icon":"",title:"现在显示的是根据标签筛选后的密码",type:"warning",onClose:v[1]||(v[1]=_=>t(n).labelTreeRef.setCheckedNodes([]))})],4)):A("",!0)],64)}}}),Ys={class:"password-card-header"},Js={class:"password-count"},hs={style:{display:"flex"}},Ws={key:0,class:"clear-history",style:{"text-align":"center","margin-left":"-20px","margin-right":"-20px"}},Xs={key:1},qs={style:{display:"flex"}},Qs=J({__name:"PasswordHeader",setup(H){const c=Q(),n=le(),a=oo(),p=ie(),i=z(""),b=z(!1),v=x=>{console.log("header 过滤密码 searchText:",i.value," 触发方式："+x),c.filterCondition.searchText=i.value},m=()=>{if(!i.value||!i.value.trim())return;console.log("header 保存搜索记录：",i.value);let x=[],g=localStorage.getItem("searchHistory");g&&(x=JSON.parse(g));let L=x.findIndex(S=>S===i.value.trim());L>-1&&(console.log("header 保存搜索记录 删除已存在的搜索历史"),x.splice(L,1)),x.unshift(i.value),x.length>100&&(x=x.splice(0,100)),localStorage.setItem("searchHistory",JSON.stringify(x))},_=(x,g)=>{if(!x){g([]);return}console.log("header 自动补全：",x);let L=localStorage.getItem("searchHistory");if(L){let S=JSON.parse(L);if(S&&S.length>0){let w=x?S.filter(M=>M.includes(x)):S;w=w.slice(0,5);let U=w.map((M=>({value:M})));U.push({value:i.value,type:"cleanHistory"}),g(U);return}}g([])},D=()=>{console.log("header 清除搜索历史"),localStorage.removeItem("searchHistory")};let $=null;const P=()=>{if($&&clearTimeout($),i.value===""&&!b.value){v("textBlank");return}$=setTimeout(function(){v("delayed")},200)},E=()=>{console.log("header 添加密码"),n.passwordFormRef.addPasswordForm()},O=()=>{console.log("header 解锁"),n.verifyPasswordRef.verifyAndUnlock()},N=()=>{c.passwordManager.lock()},T=x=>{c.setTopicMode(x)},u=()=>{n.recycleBinRef.openRecycleBin()},l=()=>{a.push("/note")},d=()=>{location.href="https://home.password-xl.cn"},y=()=>{n.aiAddPasswordRef.show()};return(x,g)=>{const L=ne,S=de,w=ct,U=me,M=qe,C=Xe,F=We,G=Je;return f(),k(W,null,[s("div",Ys,[s("div",null,[t(p).setting.showPasswordStatistics?(f(),V(L,{key:0,class:"hidden-sm-and-down password-title",style:{width:"300px"}},{default:o(()=>[t(c).visPasswordArray.length>0?(f(),k(W,{key:0},[g[13]||(g[13]=s("span",null," 共 ",-1)),s("span",Js,K(t(c).visPasswordArray.length),1),g[14]||(g[14]=s("span",null," 个密码 ",-1))],64)):t(c).passwordArray.length?A("",!0):(f(),k(W,{key:1},[r(" 没有保存的密码 ")],64))]),_:1})):(f(),k("div",{key:1,class:"hidden-xs-only",style:{height:"32px"},onClick:d},[...g[15]||(g[15]=[s("img",{alt:"",src:lo,style:{height:"32px",cursor:"pointer"}},null,-1)])]))]),s("div",hs,[e(w,{ref:B=>t(n).searchInputRef=B,modelValue:t(i),"onUpdate:modelValue":g[1]||(g[1]=B=>re(i)?i.value=B:null),debounce:10,disabled:t(c).serviceStatus!==t(j).UNLOCKED,"fetch-suggestions":_,class:"search-input","popper-class":"header-autocomplete-suggestion",clearable:"",placeholder:"搜索..",onBlur:g[2]||(g[2]=B=>{b.value=!1,m()}),onChange:g[3]||(g[3]=B=>v("change")),onClear:g[4]||(g[4]=B=>v("clear")),onCompositionend:g[5]||(g[5]=B=>b.value=!1),onCompositionstart:g[6]||(g[6]=B=>b.value=!0),onKeyup:[P,g[7]||(g[7]=Me(B=>v("inputEnter"),["enter","native"]))]},{default:o(({item:B})=>[B.type==="cleanHistory"?(f(),k("div",Ws,[s("span",{class:"clear-history-text",onClick:D},"清除搜索历史")])):(f(),k("div",Xs,K(B.value),1))]),append:o(()=>[e(S,{class:"search-btn",onClick:g[0]||(g[0]=B=>v("searchBtn"))},{default:o(()=>[...g[16]||(g[16]=[s("span",{class:"iconfont icon-search search-input-icon"},null,-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),s("div",qs,[t(p).setting.enableAiAdd&&t(Re)()?(f(),V(S,{key:0,ref:B=>t(n).aiCreatePasswordBtnRef=B,disabled:t(c).serviceStatus!==t(j).UNLOCKED,class:"ai-add-password-btn",plain:"",type:"primary",onClick:y},{default:o(()=>[...g[17]||(g[17]=[r(" Ai ",-1)])]),_:1},8,["disabled"])):A("",!0),e(S,{ref:B=>t(n).createPasswordBtnRef=B,disabled:t(c).serviceStatus!==t(j).UNLOCKED,class:"add-password-btn",plain:"",type:"primary",onClick:E},{default:o(()=>[...g[18]||(g[18]=[r(" 添加 ",-1)])]),_:1},8,["disabled"]),t(c).serviceStatus===t(j).UNLOCKED&&!["xs","sm"].includes(t(Y)().value)&&t(p).setting.showNote?(f(),V(U,{key:1,content:"打开笔记"},{default:o(()=>[e(S,{class:"to-note-btn",plain:"",onClick:l},{default:o(()=>[...g[19]||(g[19]=[s("span",{class:"iconfont icon-note",style:{"font-size":"125%",transform:"scaleX(1.1)",color:"#67C23A"}},null,-1)])]),_:1})]),_:1})):A("",!0),t(c).serviceStatus===t(j).UNLOCKED?(f(),V(U,{key:2,content:"锁定"},{default:o(()=>[e(S,{class:"lock-btn",plain:"",onClick:N},{default:o(()=>[s("span",{style:oe([{color:t(c).isDark?"#ccc":"#666"},{"font-size":"120%"}]),class:"iconfont icon-lock"},null,4)]),_:1})]),_:1})):A("",!0),t(c).serviceStatus===t(j).LOGGED?(f(),V(U,{key:3,content:"解锁"},{default:o(()=>[e(S,{class:"unlock-btn",plain:"",onClick:O},{default:o(()=>[s("span",{style:oe([{color:t(c).isDark?"#ccc":"#666"},{"font-size":"120%"}]),class:"iconfont icon-unlock"},null,4)]),_:1})]),_:1})):A("",!0),e(F,{trigger:"click"},{dropdown:o(()=>[e(C,null,{default:o(()=>[["xs","sm"].includes(t(Y)().value)||!t(p).setting.showLabelCard?(f(),V(M,{key:0,disabled:t(c).serviceStatus!==t(j).UNLOCKED,onClick:t(n).labelDrawer?.showLabelDrawer},{default:o(()=>[...g[21]||(g[21]=[s("span",{class:"iconfont icon-label menu-item",style:{color:"#409EFF"}},null,-1),r(" 标签 ",-1)])]),_:1},8,["disabled","onClick"])):A("",!0),["xs","sm"].includes(t(Y)().value)||!t(p).setting.showFavoriteCard?(f(),V(M,{key:1,disabled:t(c).serviceStatus!==t(j).UNLOCKED,onClick:t(n).favoriteDrawer?.showFavoriteDrawer},{default:o(()=>[...g[22]||(g[22]=[s("span",{class:"iconfont icon-collect menu-item",style:{color:"#FF9700"}},null,-1),r(" 收藏 ",-1)])]),_:1},8,["disabled","onClick"])):A("",!0),t(p).setting.passwordDisplayMode===t(ee).TABLE?(f(),V(M,{key:2,divided:["xs","sm"].includes(t(Y)().value)||!t(p).setting.showFavoriteCard||!t(p).setting.showLabelCard,onClick:g[8]||(g[8]=B=>t(p).setting.passwordDisplayMode=t(ee).CARD)},{default:o(()=>[...g[23]||(g[23]=[s("span",{class:"iconfont icon-card menu-item",style:{color:"#67c23a"}},null,-1),r(" 卡片视图 ",-1)])]),_:1},8,["divided"])):A("",!0),t(p).setting.passwordDisplayMode===t(ee).CARD?(f(),V(M,{key:3,onClick:g[9]||(g[9]=B=>t(p).setting.passwordDisplayMode=t(ee).TABLE)},{default:o(()=>[...g[24]||(g[24]=[s("span",{class:"iconfont icon-list menu-item",style:{color:"#409eff"}},null,-1),r(" 列表视图 ",-1)])]),_:1})):A("",!0),e(M,{disabled:t(c).serviceStatus!==t(j).UNLOCKED,divided:"",onClick:l},{default:o(()=>[...g[25]||(g[25]=[s("span",{class:"iconfont icon-note menu-item",style:{color:"#67C23A",transform:"scaleX(1.1)"}},null,-1),r(" 打开笔记 ",-1)])]),_:1},8,["disabled"]),t(c).isDark?A("",!0):(f(),V(M,{key:4,divided:["xs","sm"].includes(t(Y)().value),onClick:g[10]||(g[10]=B=>T(t(ue).DARK))},{default:o(()=>[...g[26]||(g[26]=[s("span",{class:"iconfont icon-dark-mode menu-item",style:{color:"rgb(96 0 255)"}},null,-1),r(" 深色主题 ",-1)])]),_:1},8,["divided"])),t(c).isDark?(f(),V(M,{key:5,divided:["xs","sm"].includes(t(Y)().value),onClick:g[11]||(g[11]=B=>T(t(ue).LIGHT))},{default:o(()=>[...g[27]||(g[27]=[s("span",{class:"iconfont icon-right-mode menu-item",style:{color:"rgb(186 255 0)"}},null,-1),r(" 明亮主题 ",-1)])]),_:1},8,["divided"])):A("",!0),e(M,{disabled:t(c).serviceStatus!==t(j).UNLOCKED,divided:"",onClick:t(n).settingRef?.openSetting},{default:o(()=>[...g[28]||(g[28]=[s("span",{class:"iconfont icon-setting menu-item",style:{color:"#409EFF"}},null,-1),r(" 系统设置 ",-1)])]),_:1},8,["disabled","onClick"]),e(M,{disabled:t(c).serviceStatus!==t(j).UNLOCKED,onClick:u},{default:o(()=>[...g[29]||(g[29]=[s("span",{class:"iconfont icon-recycle-bin menu-item",style:{color:"#E6A23C"}},null,-1),r(" 回收站 ",-1)])]),_:1},8,["disabled"]),e(M,{divided:"",onClick:g[12]||(g[12]=B=>t(c).logout())},{default:o(()=>[...g[30]||(g[30]=[s("span",{class:"iconfont icon-exit menu-item",style:{color:"#F56C6C"}},null,-1),r(" 退出登录 ",-1)])]),_:1})]),_:1})]),default:o(()=>[e(S,{style:oe({color:t(c).isDark?"#ccc":"#666"}),class:"menu-btn",plain:""},{default:o(()=>[...g[20]||(g[20]=[s("span",{class:"iconfont icon-menu",style:{"font-size":"130%"}},null,-1)])]),_:1},8,["style"])]),_:1})])]),e(G,{class:"password-head-body-line"})],64)}}}),Zs=X(Qs,[["__scopeId","data-v-76794967"]]),ea={id:"contextmenu-ul"},ta=J({__name:"Contextmenu",setup(H,{expose:c}){const n=Q(),a=le(),p=ie(),i=z({show:!1,x:0,y:0}),b=P=>{console.log("显示右键菜单"),P.preventDefault(),i.value.x=P.clientX,i.value.y=P.clientY,i.value.show=!0},v=()=>{i.value.show=!1},m=P=>{console.log("右键菜单，切换密码展示方式"),p.setting.passwordDisplayMode=P,n.passwordManager.syncSetting(),i.value.show=!1},_=()=>{if(console.log("右键菜单，创建密码"),n.serviceStatus===j.UNLOCKED){a.passwordFormRef.addPasswordForm(),i.value.show=!1;return}console.log("右键菜单，创建密码 需要解锁"),a.verifyPasswordRef.verifyAndUnlock().then(()=>{a.passwordFormRef.addPasswordForm(),i.value.show=!1})},D=()=>{if(console.log("右键菜单，打开回收站"),n.serviceStatus===j.UNLOCKED){a.recycleBinRef.openRecycleBin(),i.value.show=!1;return}console.log("右键菜单，打开回收站 需要解锁"),a.verifyPasswordRef.verifyAndUnlock().then(()=>{a.recycleBinRef.openRecycleBin(),i.value.show=!1})},$=()=>{if(console.log("右键菜单，添加标签"),n.serviceStatus===j.UNLOCKED){a.labelTreeDivRef.addLabel(null,"sub"),i.value.show=!1;return}console.log("右键菜单，添加标签 需要解锁"),a.verifyPasswordRef.verifyAndUnlock().then(()=>{a.labelTreeDivRef.addLabel(null,"sub"),i.value.show=!1})};return c({showContextmenu:b,hideContextmenu:v}),(P,E)=>{const O=be;return t(i).show?(f(),k("div",{key:0,style:oe({top:t(i).y+"px",left:t(i).x+"px"}),class:"contextmenu-div"},[e(O,null,{default:o(()=>[s("ul",ea,[s("li",{onClick:_},[...E[4]||(E[4]=[s("span",{class:"iconfont icon-create",style:{color:"#409EFF"}},null,-1),r(" 创建密码 ",-1)])]),t(n).serviceStatus===t(j).LOGGED?(f(),k("li",{key:0,onClick:E[0]||(E[0]=N=>t(a).verifyPasswordRef.verifyAndUnlock())},[...E[5]||(E[5]=[s("span",{class:"iconfont icon-lock",style:{color:"#E6A23C"}},null,-1),r(" 解锁 ",-1)])])):A("",!0),t(n).serviceStatus===t(j).UNLOCKED?(f(),k("li",{key:1,onClick:E[1]||(E[1]=N=>t(n).passwordManager.lock())},[...E[6]||(E[6]=[s("span",{class:"iconfont icon-unlock",style:{color:"#E6A23C"}},null,-1),r(" 锁定 ",-1)])])):A("",!0),t(p).setting.passwordDisplayMode===t(ee).CARD?(f(),k("li",{key:2,onClick:E[2]||(E[2]=N=>m(t(ee).TABLE))},[...E[7]||(E[7]=[s("span",{class:"iconfont icon-list",style:{color:"#67C23A"}},null,-1),r(" 表格视图 ",-1)])])):A("",!0),t(p).setting.passwordDisplayMode===t(ee).TABLE?(f(),k("li",{key:3,onClick:E[3]||(E[3]=N=>m(t(ee).CARD))},[...E[8]||(E[8]=[s("span",{class:"iconfont icon-card",style:{color:"#67C23A"}},null,-1),r(" 卡片视图 ",-1)])])):A("",!0),s("li",{onClick:$},[...E[9]||(E[9]=[s("span",{class:"iconfont icon-label",style:{color:"#409EFF"}},null,-1),r(" 添加标签 ",-1)])]),s("li",{onClick:D},[...E[10]||(E[10]=[s("span",{class:"iconfont icon-recycle-bin",style:{color:"#F56C6C"}},null,-1),r(" 回收站 ",-1)])])])]),_:1})],4)):A("",!0)}}}),oa=X(ta,[["__scopeId","data-v-15310a4c"]]),la={style:{height:"calc(100vh - 84px)"}},na={style:{height:"calc(100vh - 60px)"}},sa=J({__name:"IndexPage",setup(H){const c=lt(()=>ot(()=>import("./ExportExcel-DQsUL2HF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),n=lt(()=>ot(()=>import("./ImportExcel-BVzN8J8u.js"),__vite__mapDeps([11,3,2,4,5,6,7,10,1,8,9,12]),import.meta.url)),a=Q(),p=le(),i=ie();return $e(()=>{a.serviceStatus===j.LOGGED?(console.log("页面加载完成，验证并解锁"),p.verifyPasswordRef.verifyAndUnlock(),i.setting.autoUnlock||localStorage.removeItem("mainPassword")):a.serviceStatus===j.WAIT_INIT&&(console.log("页面加载完成，初始化主密码"),p.setPasswordRef.setMainPassword())}),["xs","sm"].includes(Y().value)&&i.setting.passwordDisplayMode===ee.TABLE&&(i.setting.passwordDisplayMode=ee.CARD),(b,v)=>{const m=Zs,_=js,D=Gs,$=Rs,P=be,E=Se,O=es,N=qn,T=Ce,u=hn,l=Yn,d=Un,y=En,x=$n,g=xn,L=yn,S=cn,w=co,U=fo,M=uo,C=io;return f(),k(W,null,[["xs","sm"].includes(t(Y)().value)?(f(),k("div",{key:1,style:oe([{"background-color":t(a).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"},{"backdrop-filter":"blur(50px)",height:"100vh"}])},[e(m),e(_),t(i).setting.passwordDisplayMode===t(ee).TABLE?(f(),V(D,{key:0})):A("",!0),s("div",na,[t(i).setting.passwordDisplayMode===t(ee).CARD?(f(),V($,{key:0})):A("",!0)])],4)):(f(),k("div",{key:0,onClick:v[0]||(v[0]=F=>t(p).contextmenuRef&&t(p).contextmenuRef.hideContextmenu()),onContextmenu:v[1]||(v[1]=_t(F=>t(p).contextmenuRef.showContextmenu(F),["prevent"]))},[e(T,{class:"password-body-row"},{default:o(()=>[e(E,{lg:{span:!t(i).setting.showLabelCard&&!t(i).setting.showFavoriteCard?24:20},md:{span:!t(i).setting.showLabelCard&&!t(i).setting.showFavoriteCard?24:18},xl:{span:!t(i).setting.showLabelCard&&!t(i).setting.showFavoriteCard?24:21}},{default:o(()=>[e(P,{style:oe({"background-color":t(a).isDark?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.4)"}),"body-class":"password-card-body",class:"password-card"},{default:o(()=>[e(m),e(_),t(i).setting.passwordDisplayMode===t(ee).TABLE?(f(),V(D,{key:0})):A("",!0),s("div",la,[t(i).setting.passwordDisplayMode===t(ee).CARD?(f(),V($,{key:0})):A("",!0)])]),_:1},8,["style"])]),_:1},8,["lg","md","xl"]),t(i).setting.showLabelCard||t(i).setting.showFavoriteCard?(f(),V(E,{key:0,lg:{span:4},md:{span:6},xl:{span:3}},{default:o(()=>[e(O),e(N)]),_:1})):A("",!0)]),_:1})],32)),e(u,{ref:F=>t(p).cancelAccountRef=F},null,512),e(l,{ref:F=>t(p).passwordFormRef=F},null,512),e(d,{ref:F=>t(p).labelDrawer=F},null,512),e(y,{ref:F=>t(p).favoriteDrawer=F},null,512),e(x,{ref:F=>t(p).recycleBinRef=F},null,512),e(g,{ref:F=>t(p).backupAndRecoveryRef=F},null,512),e(L,{ref:F=>t(p).setPasswordRef=F},null,512),e(S,{ref:F=>t(p).settingRef=F},null,512),e(w,{ref:F=>t(p).tourRef=F},null,512),e(U,{ref:F=>t(p).showPasswordRef=F},null,512),t(i).visSetting?(f(),k(W,{key:2},[e(t(c),{ref:F=>t(p).exportExcelRef=F},null,512),e(t(n),{ref:F=>t(p).importExcelRef=F},null,512)],64)):A("",!0),e(oa,{ref:F=>t(p).contextmenuRef=F},null,512),e(M),e(C,{ref:F=>t(p).aiImportRef=F},null,512)],64)}}}),ga=X(sa,[["__scopeId","data-v-4b255405"]]);export{ga as default};
